{"content":"\r\n<h1 id=\"azipps_1_3_155_2_AADRM_Convert_AadrmKeyToKeyVault_md\">Convert-AadrmKeyToKeyVault</h1>\r\n\r\n\r\n\t<div class=\"summary\">Changes the location of a legacy customer-managed key in Azure Rights Management with the location of a customer-managed key in Azure Key Vault.</div>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"syntax\">Syntax</h2>\r\n\t\t<pre class=\"syntax\"><code class=\"lang-powershell\" dir=\"ltr\">Convert-AadrmKeyToKeyVault [-Force] -KeyIdentifier &lt;String&gt; -KeyVaultKeyUrl &lt;String&gt; [-Confirm] [-WhatIf]\r\n [&lt;CommonParameters&gt;]</code></pre>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"description\">Description</h2>\r\n\t<p>The <strong>Convert-AadrmKeyToKeyVault</strong> cmdlet is only for customers who have previously created a customer-managed key for the Azure Rights Management service and have received an invitation from AskIPteam at Microsoft to migrate their Azure Rights Management tenant key to Azure Key Vault.<br><br>Do not run this cmdlet without assistance from Microsoft.<br><br>You must use PowerShell to configure your tenant key; you cannot do this configuration by using a management portal.<br><br>Azure RMS now uses Azure Key Vault to manage and monitor a customer-managed Azure RMS tenant key. To create a customer-managed Azure RMS tenant key for the first time, run <a href=\"./use-aadrmkeyvaultkey\">Use-AadrmKeyVaultKey</a> instead of this cmdlet.<br><br>For more information about how to manage your Azure RMS tenant key, see <a href=\"https://docs.microsoft.com/en-us/rights-management/plan-design/plan-implement-tenant-key\">Planning and implementing your Azure Rights Management tenant key</a> (<a href=\"https://docs.microsoft.com/en-us/rights-management/plan-design/plan-implement-tenant-key\">https://docs.microsoft.com/en-us/rights-management/plan-design/plan-implement-tenant-key</a>) on the Microsoft documentation site.<br><br>Before you run this cmdlet, you will need to identify your original customer-managed Azure RMS tenant key.\nTo do that, use the <a href=\"./get-aadrmkeys\">Get-AadrmKeys</a> cmdlet. From the output and identified key, you will need the KeyIdentifier value for the <em>KeyIdentifier</em> parameter when you run this cmdlet.<br><br>Also, your organization&#39;s administrator for Azure Key Vault must create a new key for Azure RMS and supply you with a URL for this key. You will need to specify the URL for the <em>KeyVaultKeyUrl</em> parameter when you run this cmdlet. This Azure Key Vault administrator must also grant Azure RMS access to the key vault that contains the key.<br><br>For security reasons, this cmdlet does not let you change the access control for the key; this must be done from Key Vault.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"examples\">Examples</h2>\r\n\t<p><strong>Example 1: Change the location of a legacy Azure RMS tenant key with a key in Azure Key Vault</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>Convert-AadrmKeyToKeyVault -KeyIdentifier aaaaaaaa-1111-2222-3333-bbbbbbbbbbbb -KeyVaultKeyUrl \"https://contoso.vault.azure.net/keys/contoso-rms-key/aaaabbbbcccc111122223333\"</code></pre>\r\n\t<p>Changes the location of the original customer-managed key in Azure RMS that has the key identifier of aaaaaaaa-1111-2222-3333-bbbbbbbbbbbb with the location of a customer-managed key in Azure Key Vault, which is named contoso-rms-key and has the version number aaaabbbbcccc111122223333 in the Contoso key vault.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"parameters\">Parameters</h2>\r\n  <div class=\"parameterName\">-Force</div>\r\n\t<div class=\"parameterSummary\"><p>Forces the command to run without asking for user confirmation.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-KeyIdentifier</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the key identifier value of the original customer-managed Azure RMS tenant key that you now want to manage from Azure Key Vault.<br><br>To get the key identifier value, use the <strong>Get-AadrmKeys</strong> cmdlet.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName, ByValue)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-KeyVaultKeyUrl</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the URL of the key in Azure Key Vault that you want to use for the Azure RMS tenant key. This key will be used in Azure RMS as the root key for all cryptographic operations for your Azure RMS tenant.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName, ByValue)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Confirm</div>\r\n\t<div class=\"parameterSummary\"><p>Prompts you for confirmation before running the cmdlet.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>cf</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-WhatIf</div>\r\n\t<div class=\"parameterSummary\"><p>Shows what would happen if the cmdlet runs. The cmdlet is not run.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>wi</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n\r\n\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"related-links\">Related Links</h2>\r\n\t<ul class=\"list-clean\">\r\n\t<li><a href=\"./get-aadrmkeys\">Get-AadrmKeys</a></li>\r\n\t<li><a href=\"./use-aadrmkeyvaultkey\">Use-AadrmKeyVaultKey</a></li>\r\n\t<li><a href=\"https://docs.microsoft.com/en-us/rights-management/plan-design/plan-implement-tenant-key\">Planning and implementing your Azure Rights Management tenant key</a></li>\r\n\t</ul>\r\n","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"description\" content=\"Changes the location of a legacy customer-managed key in Azure Rights Management with the location of a customer-managed key in Azure Key Vault.\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"PowerShell\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"PowerShell\">\r\n<meta name=\"depot_name\" content=\"PowerShell.PowerShell\">\r\n<meta name=\"ms.gitsourceurl\" content=\"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azipps/1.3.155.2/AADRM/Convert-AadrmKeyToKeyVault.md\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"external_help_file\" content=\"Microsoft.RightsManagementServices.Online.Admin.PowerShell.dll-Help.xml\">\r\n<meta name=\"online_version\" content=\"https://go.microsoft.com/fwlink/?LinkId=799850\">\r\n<meta name=\"schema\" content=\"2.0.0\">\r\n<meta name=\"ms.assetid\" content=\"58EEEE8D-9C0E-4879-8F04-3F56589B1238\">\r\n<meta name=\"updated_at\" content=\"02/13/2017 05:02 AM\">\r\n<meta name=\"ms.date\" content=\"02/13/2017\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/Azure/azure-docs-powershell-aip/blob/master/Azure%20Information%20Protection/AADRM/vlatest/Convert-AadrmKeyToKeyVault.md\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/Azure/azure-docs-powershell-aip/blob/e4c765ba645ee6c466dd1ff7182695aa9e59fb44\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"PowerShellHelpPub\">\r\n<meta name=\"keywords\" content=\"powershell, cmdlet\">\r\n<meta name=\"toc_rel\" content=\"../toc2.json\">\r\n","rawMetadata":{"commandList":[],"description":"Changes the location of a legacy customer-managed key in Azure Rights Management with the location of a customer-managed key in Azure Key Vault.","search.ms_sitename":"Docs","search.ms_docsetname":"PowerShell","version":0,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/powershell/","locale":"en-us","site_name":"Docs","search.ms_product":"PowerShell","_op_openToPublicContributors":true,"depot_name":"PowerShell.PowerShell","open_to_public_contributors":true,"ms.gitsourceurl":"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azipps/1.3.155.2/AADRM/Convert-AadrmKeyToKeyVault.md","layout":"Conceptual","_op_layout":"Conceptual","pagetype":"Reference","title":"Convert-AadrmKeyToKeyVault | Microsoft Docs","_op_ogTitle":"Convert-AadrmKeyToKeyVault","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/aadrm/convert-aadrmkeytokeyvault","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/aadrm/convert-aadrmkeytokeyvault","external_help_file":"Microsoft.RightsManagementServices.Online.Admin.PowerShell.dll-Help.xml","online_version":"https://go.microsoft.com/fwlink/?LinkId=799850","schema":"2.0.0","ms.assetid":"58EEEE8D-9C0E-4879-8F04-3F56589B1238","updated_at":"02/13/2017 05:02 AM","ms.date":"02/13/2017","content_git_url":"https://github.com/Azure/azure-docs-powershell-aip/blob/master/Azure%20Information%20Protection/AADRM/vlatest/Convert-AadrmKeyToKeyVault.md","original_content_git_url":"https://github.com/Azure/azure-docs-powershell-aip/blob/master/Azure%20Information%20Protection/AADRM/vlatest/Convert-AadrmKeyToKeyVault.md","gitcommit":"https://github.com/Azure/azure-docs-powershell-aip/blob/e4c765ba645ee6c466dd1ff7182695aa9e59fb44","ms.topic":"reference","author":"erickson-doug","ms.author":"PowerShellHelpPub","keywords":"powershell, cmdlet","toc_asset_id":"azipps-1.3.155.2/module/toc.json","toc_rel":"../toc.json","fileRelativePath":"azipps-1.3.155.2/module/AADRM/Convert-AadrmKeyToKeyVault.html"},"themesRelativePathToOutputRoot":"_themes/"}