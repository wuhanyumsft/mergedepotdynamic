{"content":"\r\n<h1 id=\"azipps_1_3_155_2_AADRM_Use_AadrmKeyVaultKey_md\">Use-AadrmKeyVaultKey</h1>\r\n\r\n\r\n\t<div class=\"summary\">Tells Rights Management to use a customer-managed tenant key in Azure Key Vault.</div>\r\n\r\n<nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n  <h3>In this Article</h3>\r\n</nav>\r\n\t<h2 class=\"cli\" id=\"syntax\">Syntax</h2>\r\n\t\t<pre class=\"syntax loading\"><code class=\"lang-powershell\" dir=\"ltr\">Use-AadrmKeyVaultKey [-Force] -KeyVaultKeyUrl &lt;String&gt; [-Confirm] [-WhatIf] [&lt;CommonParameters&gt;]</code></pre>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"description\">Description</h2>\r\n\t<p>The <strong>Use-AadrmKeyVaultKey</strong> cmdlet tells Azure RMS to use a customer-managed key (BYOK) that has been created by an administrator in your organization who is responsible for managing Azure Key Vault. This key then becomes the customer-managed tenant key for Azure RMS in your organization.<br><br>You must use PowerShell to configure your tenant key; you cannot do this configuration by using a management portal.<br><br>You can run this cmdlet before or after Azure RMS is activated. In either case, your Azure RMS tenant key in Azure Key Vault will automatically include the initial key that Microsoft generated (a Microsoft-managed key) when the Azure RMS tenant was first created.<br><br>After you run this cmdlet, Azure RMS uses Azure Key Vault to centrally manage and monitor use of your Azure RMS tenant key. All calls to your Azure RMS tenant key will be made to and from a key vault that your organization owns. You can confirm which key you are using in Key Vault by using the <a href=\"./get-aadrmkeys\">Get-AadrmKeys</a> cmdlet.<br><br>For more information about the types of tenant keys that Azure RMS supports, see <a href=\"https://docs.microsoft.com/en-us/rights-management/plan-design/plan-implement-tenant-key\">Planning and implementing your Azure Rights Management tenant key</a>.<br><br>For more information about Azure Key Vault, see <a href=\"https://azure.microsoft.com/documentation/articles/key-vault-whatis\">What is Azure Key Vault</a>.<br><br>For security reasons, this cmdlet does not let you set or change the access control for your Azure RMS tenant key in Key Vault. Instead, this must be done by your organization&#39;s administrator for Azure Key Vault. After that access is granted, run this cmdlet to tell Azure RMS to use the key and version that you specify with the <em>KeyVaultKeyUrl</em> parameter.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"examples\">Examples</h2>\r\n\t<p><strong>Example 1: Configure Azure RMS to use a customer-managed key in Azure Key Vault</strong></p>\r\n\t\r\n\t<pre class=\"loading\"><code class=\"lang-powershell\">PS C:\\>Use-AadrmKeyVaultKey -KeyVaultKeyUrl \"https://contoso.vault.azure.net/keys/contoso-rms-key/aaaabbbbcccc111122223333\"</code></pre>\r\n\t<p>This command tells Azure RMS to use the key named contoso-rms-key, version aaaabbbbcccc111122223333, in the key vault named contoso.<br><br>This key and version in Azure Key Vault then becomes the customer-managed tenant key for Azure RMS.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"parameters\">Parameters</h2>\r\n  <div class=\"parameterName\">-Force</div>\r\n\t<div class=\"parameterSummary\"><p>Forces the command to run without asking for user confirmation.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-KeyVaultKeyUrl</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the URL of the key and version in Azure Key Vault that you want to use for the Azure RMS tenant key.<br><br>This key will be used in Azure RMS as the root key for all cryptographic operations for your Azure RMS tenant.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName, ByValue)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Confirm</div>\r\n\t<div class=\"parameterSummary\"><p>Prompts you for confirmation before running the cmdlet.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>cf</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-WhatIf</div>\r\n\t<div class=\"parameterSummary\"><p>Shows what would happen if the cmdlet runs.<br><br>The cmdlet is not run.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>wi</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n\r\n\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"related-links\">Related Links</h2>\r\n\t<ul class=\"list-clean\">\r\n\t<li><a href=\"./get-aadrmkeys\">Get-AadrmKeys</a></li>\r\n\t<li><a href=\"https://docs.microsoft.com/en-us/rights-management/plan-design/plan-implement-tenant-key\">Planning and implementing your Azure Rights Management tenant key</a></li>\r\n\t<li><a href=\"https://azure.microsoft.com/documentation/articles/key-vault-whatis\">What is Azure Key Vault</a></li>\r\n\t</ul>\r\n","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"description\" content=\"Tells Rights Management to use a customer-managed tenant key in Azure Key Vault.\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"PowerShell\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"PowerShell\">\r\n<meta name=\"depot_name\" content=\"PowerShell.PowerShell\">\r\n<meta name=\"ms.gitsourceurl\" content=\"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azipps/1.3.155.2/AADRM/Use-AadrmKeyVaultKey.md\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"external_help_file\" content=\"Microsoft.RightsManagementServices.Online.Admin.PowerShell.dll-Help.xml\">\r\n<meta name=\"online_version\" content=\"https://go.microsoft.com/fwlink/?LinkId=799849\">\r\n<meta name=\"schema\" content=\"2.0.0\">\r\n<meta name=\"ms.assetid\" content=\"2EC79F48-DC64-42D0-B317-89397A72243D\">\r\n<meta name=\"updated_at\" content=\"02/14/2017 05:02 AM\">\r\n<meta name=\"ms.date\" content=\"02/14/2017\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/Azure/azure-docs-powershell-aip/blob/master/Azure%20Information%20Protection/AADRM/vlatest/Use-AadrmKeyVaultKey.md\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/Azure/azure-docs-powershell-aip/blob/22a102658f1b1c573e607b7c05590c1e292e41e2\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"PowerShellHelpPub\">\r\n<meta name=\"keywords\" content=\"powershell, cmdlet\">\r\n<meta name=\"toc_rel\" content=\"../toc2.json\">\r\n","rawMetadata":{"commandList":[],"description":"Tells Rights Management to use a customer-managed tenant key in Azure Key Vault.","search.ms_sitename":"Docs","search.ms_docsetname":"PowerShell","version":0,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/powershell/","locale":"en-us","site_name":"Docs","search.ms_product":"PowerShell","_op_openToPublicContributors":true,"depot_name":"PowerShell.PowerShell","open_to_public_contributors":true,"ms.gitsourceurl":"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azipps/1.3.155.2/AADRM/Use-AadrmKeyVaultKey.md","layout":"Conceptual","_op_layout":"Conceptual","pagetype":"Reference","title":"Use-AadrmKeyVaultKey | Microsoft Docs","_op_ogTitle":"Use-AadrmKeyVaultKey","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/aadrm/use-aadrmkeyvaultkey","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/aadrm/use-aadrmkeyvaultkey","external_help_file":"Microsoft.RightsManagementServices.Online.Admin.PowerShell.dll-Help.xml","online_version":"https://go.microsoft.com/fwlink/?LinkId=799849","schema":"2.0.0","ms.assetid":"2EC79F48-DC64-42D0-B317-89397A72243D","updated_at":"02/14/2017 05:02 AM","ms.date":"02/14/2017","content_git_url":"https://github.com/Azure/azure-docs-powershell-aip/blob/master/Azure%20Information%20Protection/AADRM/vlatest/Use-AadrmKeyVaultKey.md","original_content_git_url":"https://github.com/Azure/azure-docs-powershell-aip/blob/master/Azure%20Information%20Protection/AADRM/vlatest/Use-AadrmKeyVaultKey.md","gitcommit":"https://github.com/Azure/azure-docs-powershell-aip/blob/22a102658f1b1c573e607b7c05590c1e292e41e2","ms.topic":"reference","author":"erickson-doug","ms.author":"PowerShellHelpPub","keywords":"powershell, cmdlet","toc_asset_id":"azipps-1.3.155.2/module/toc.json","toc_rel":"../toc.json","_op_displayDate":"2017-2-14","_op_displayDate_source":"2017-02-14T00:00:00Z","fileRelativePath":"azipps-1.3.155.2/module/AADRM/Use-AadrmKeyVaultKey.html"},"themesRelativePathToOutputRoot":"_themes/"}