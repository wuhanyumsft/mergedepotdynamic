{"content":"    \r\n    <h1 id=\"System_Text_UTF8Encoding\">\r\n      <span class=\"lang-csharp\">UTF8Encoding</span>\r\n        Class\r\n    </h1>\r\n    \r\n    \r\n    <nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n      <h3>In this Article</h3>\r\n    </nav><div class=\"summary\">\r\n    \t<p>Represents a UTF-8 encoding of Unicode characters.</p>\n\r\n    </div><h2>Syntax</h2>\r\n    \r\n    \t<h3>Declaration</h3>\r\n    \t<pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">[System.Runtime.InteropServices.ComVisible(true)]\npublic class UTF8Encoding : System.Text.Encoding</code></pre>\r\n    \r\n    \r\n    \r\n    <h3>Inheritance Hierarchy</h3>\r\n    <ul class=\"inheritance\">\r\n        <li class=\"l0\">\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">Object</a>\r\n          </div>\r\n        </li>\r\n        <li class=\"l1\">\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding\" data-linktype=\"relative-path\">System.Text.Encoding</a>\r\n          </div>\r\n        </li>\r\n      <li class=\"l2\">\r\n        <div class=\"xref\">\r\n          <div class=\"lang-csharp\">UTF8Encoding</div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    \r\n      <div class=\"referencebox inheritedMembers\">\r\n        <h3>Inherited Members</h3>\r\n        <h4></h4>\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_System_Object_\" data-linktype=\"relative-path\">Equals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_GetType\" data-linktype=\"relative-path\">GetType()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_MemberwiseClone\" data-linktype=\"relative-path\">MemberwiseClone()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ReferenceEquals_System_Object_System_Object_\" data-linktype=\"relative-path\">ReferenceEquals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ToString\" data-linktype=\"relative-path\">ToString()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_ASCII\" data-linktype=\"relative-path\">ASCII</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_BigEndianUnicode\" data-linktype=\"relative-path\">BigEndianUnicode</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_BodyName\" data-linktype=\"relative-path\">BodyName</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_Clone\" data-linktype=\"relative-path\">Clone()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_CodePage\" data-linktype=\"relative-path\">CodePage</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_Convert_System_Text_Encoding_System_Text_Encoding_System_Byte___\" data-linktype=\"relative-path\">Convert(Encoding,Encoding,Byte[])</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_Convert_System_Text_Encoding_System_Text_Encoding_System_Byte___System_Int32_System_Int32_\" data-linktype=\"relative-path\">Convert(Encoding,Encoding,Byte[],Int32,Int32)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_DecoderFallback\" data-linktype=\"relative-path\">DecoderFallback</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_Default\" data-linktype=\"relative-path\">Default</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_EncoderFallback\" data-linktype=\"relative-path\">EncoderFallback</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_EncodingName\" data-linktype=\"relative-path\">EncodingName</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetByteCount_System_Char___\" data-linktype=\"relative-path\">GetByteCount(Char[])</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetBytes_System_Char___\" data-linktype=\"relative-path\">GetBytes(Char[])</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetBytes_System_Char___System_Int32_System_Int32_\" data-linktype=\"relative-path\">GetBytes(Char[],Int32,Int32)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetBytes_System_String_\" data-linktype=\"relative-path\">GetBytes(String)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetCharCount_System_Byte___\" data-linktype=\"relative-path\">GetCharCount(Byte[])</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetChars_System_Byte___\" data-linktype=\"relative-path\">GetChars(Byte[])</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetChars_System_Byte___System_Int32_System_Int32_\" data-linktype=\"relative-path\">GetChars(Byte[],Int32,Int32)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetEncoding_System_Int32_\" data-linktype=\"relative-path\">GetEncoding(Int32)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetEncoding_System_Int32_System_Text_EncoderFallback_System_Text_DecoderFallback_\" data-linktype=\"relative-path\">GetEncoding(Int32,EncoderFallback,DecoderFallback)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetEncoding_System_String_\" data-linktype=\"relative-path\">GetEncoding(String)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetEncoding_System_String_System_Text_EncoderFallback_System_Text_DecoderFallback_\" data-linktype=\"relative-path\">GetEncoding(String,EncoderFallback,DecoderFallback)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetEncodings\" data-linktype=\"relative-path\">GetEncodings()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetString_System_Byte__System_Int32_\" data-linktype=\"relative-path\">GetString(Byte*,Int32)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_GetString_System_Byte___\" data-linktype=\"relative-path\">GetString(Byte[])</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_HeaderName\" data-linktype=\"relative-path\">HeaderName</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_IsAlwaysNormalized\" data-linktype=\"relative-path\">IsAlwaysNormalized()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_IsAlwaysNormalized_System_Text_NormalizationForm_\" data-linktype=\"relative-path\">IsAlwaysNormalized(NormalizationForm)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_IsBrowserDisplay\" data-linktype=\"relative-path\">IsBrowserDisplay</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_IsBrowserSave\" data-linktype=\"relative-path\">IsBrowserSave</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_IsMailNewsDisplay\" data-linktype=\"relative-path\">IsMailNewsDisplay</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_IsMailNewsSave\" data-linktype=\"relative-path\">IsMailNewsSave</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_IsReadOnly\" data-linktype=\"relative-path\">IsReadOnly</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_IsSingleByte\" data-linktype=\"relative-path\">IsSingleByte</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_RegisterProvider_System_Text_EncodingProvider_\" data-linktype=\"relative-path\">RegisterProvider(EncodingProvider)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_Unicode\" data-linktype=\"relative-path\">Unicode</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_UTF32\" data-linktype=\"relative-path\">UTF32</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_UTF7\" data-linktype=\"relative-path\">UTF7</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_UTF8\" data-linktype=\"relative-path\">UTF8</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_WebName\" data-linktype=\"relative-path\">WebName</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_WindowsCodePage\" data-linktype=\"relative-path\">WindowsCodePage</a>\r\n          </div>\r\n          \r\n      </div>\r\n    \r\n    \r\n      <h2>Remarks</h2>\r\n      <p>Encoding is the process of transforming a set of Unicode characters into a sequence of bytes. Decoding is the process of transforming a sequence of encoded bytes into a set of Unicode characters.  </p>\n<p> UTF-8 is a Unicode encoding that represents each code point as a sequence of one to four bytes. Unlike the UTF-16 and UTF-32 encodings, the UTF-8 encoding does not require &quot;endianness&quot;; the encoding scheme is the same regardless of whether the processor is big-endian or little-endian. UTF8Encoding corresponds to the Windows code page 65001. For more information about the UTFs and other encodings supported by <a class=\"xref\" href=\"system.text\" data-linktype=\"relative-path\">System.Text</a>, see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a>.  </p>\n<p> You can instantiate a UTF8Encoding object in a number of ways, depending on whether you want to it to provide a byte order mark (BOM) and whether you want to enable error detection. The following table lists the constructors and the <a class=\"xref\" href=\"system.text.encoding\" data-linktype=\"relative-path\">Encoding</a> property that return a UTF8Encoding object.  </p>\n<table>\n<thead>\n<tr>\n<th>Member</th>\n<th>BOM</th>\n<th>Error detection</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_UTF8_\" data-linktype=\"relative-path\">UTF8</a></td>\n<td>Yes</td>\n<td>No (Replacement fallback)</td>\n</tr>\n<tr>\n<td><a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding__ctor\" data-linktype=\"relative-path\">System.Text.UTF8Encoding.UTF8Encoding()</a></td>\n<td>No</td>\n<td>No (Replacement fallback)</td>\n</tr>\n<tr>\n<td><a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding__ctor_System_Boolean_\" data-linktype=\"relative-path\">System.Text.UTF8Encoding.UTF8Encoding(Boolean)</a></td>\n<td>Configurable</td>\n<td>No (Replacement fallback)</td>\n</tr>\n<tr>\n<td><a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding__ctor_System_Boolean_System_Boolean_\" data-linktype=\"relative-path\">System.Text.UTF8Encoding.UTF8Encoding(Boolean,Boolean)</a></td>\n<td>Configurable</td>\n<td>Configurable</td>\n</tr>\n</tbody>\n</table>\n<p> The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method determines how many bytes result in encoding a set of Unicode characters, and the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method performs the actual encoding.  </p>\n<p> Likewise, the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> method determines how many characters result in decoding a sequence of bytes, and the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetChars_\" data-linktype=\"relative-path\">GetChars</a> and <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetString_\" data-linktype=\"relative-path\">GetString</a> methods perform the actual decoding.  </p>\n<p> For an encoder or decoder that is able to save state information when encoding or decoding data that spans multiple blocks (such as string of 1 million characters that is encoded in 100,000-character segments), use the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetEncoder_\" data-linktype=\"relative-path\">GetEncoder</a> and <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetDecoder_\" data-linktype=\"relative-path\">GetDecoder</a> properties, respectively.  </p>\n<p> Optionally, the UTF8Encoding object provides a byte order mark (BOM), which is an array of bytes that can be prefixed to the beginning of the byte stream that results from the encoding process. If a UTF-8 encoded byte stream is prefaced with a byte order mark (BOM), it helps the decoder determine the byte order and the transformation format or UTF. Note, however, that the Unicode Standard neither requires nor recommends a BOM in UTF-8 encoded streams. For more information on byte order and the byte order mark, see The Unicode Standard at the <a href=\"http://go.microsoft.com/fwlink/?LinkId=37123\" data-linktype=\"external\">Unicode home page</a>.  </p>\n<p> If the encoder is configured to provide a BOM, you can retrieve it by calling the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetPreamble_\" data-linktype=\"relative-path\">GetPreamble</a> method; otherwise, the method returns an empty array. Note that, even if a UTF8Encoding object is configured for BOM support, you must include the BOM at the beginning of the encoded byte stream as appropriate; the encoding methods of the UTF8Encoding class do not do this automatically.  </p>\n<div class=\"NOTE\"><h5>Note</h5><p> To enable error detection and to make the class instance more secure, you should call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding__ctor_System_Boolean_System_Boolean_\" data-linktype=\"relative-path\">UTF8Encoding(Boolean,Boolean)</a> constructor and set the <code>throwOnInvalidBytes</code> parameter to <code>true</code>. With error detection enabled, a method that detects an invalid sequence of characters or bytes throws an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, no exception is thrown, and the invalid sequence is generally ignored.  </p>\n</div>\n<div class=\"NOTE\"><h5>Note</h5><p> The state of a UTF-8 encoded object is not preserved if the object is serialized and deserialized using different .NET Framework versions.</p>\n</div>\n\r\n    \r\n    \r\n    <h2>Constructors\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding__ctor\" data-linktype=\"self-bookmark\">UTF8Encoding()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> class.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding__ctor_System_Boolean_\" data-linktype=\"self-bookmark\">UTF8Encoding(Boolean)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> class. A parameter specifies whether to provide a Unicode byte order mark.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding__ctor_System_Boolean_System_Boolean_\" data-linktype=\"self-bookmark\">UTF8Encoding(Boolean,Boolean)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> class. Parameters specify whether to provide a Unicode byte order mark and whether to throw an exception when an invalid encoding is detected.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Methods\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_Equals_System_Object_\" data-linktype=\"self-bookmark\">Equals(Object)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Determines whether the specified object is equal to the current <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> object.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetByteCount_System_String_\" data-linktype=\"self-bookmark\">GetByteCount(String)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Calculates the number of bytes produced by encoding the characters in the specified <a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a>.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetByteCount_System_Char__System_Int32_\" data-linktype=\"self-bookmark\">GetByteCount(Char*,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Calculates the number of bytes produced by encoding a set of characters starting at the specified character pointer.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetByteCount_System_Char___System_Int32_System_Int32_\" data-linktype=\"self-bookmark\">GetByteCount(Char[],Int32,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Calculates the number of bytes produced by encoding a set of characters from the specified character array.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetBytes_System_Char__System_Int32_System_Byte__System_Int32_\" data-linktype=\"self-bookmark\">GetBytes(Char*,Int32,Byte*,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Encodes a set of characters starting at the specified character pointer into a sequence of bytes that are stored starting at the specified byte pointer.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetBytes_System_Char___System_Int32_System_Int32_System_Byte___System_Int32_\" data-linktype=\"self-bookmark\">GetBytes(Char[],Int32,Int32,Byte[],Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Encodes a set of characters from the specified character array into the specified byte array.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetBytes_System_String_System_Int32_System_Int32_System_Byte___System_Int32_\" data-linktype=\"self-bookmark\">GetBytes(String,Int32,Int32,Byte[],Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Encodes a set of characters from the specified <a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a> into the specified byte array.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetCharCount_System_Byte__System_Int32_\" data-linktype=\"self-bookmark\">GetCharCount(Byte*,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Calculates the number of characters produced by decoding a sequence of bytes starting at the specified byte pointer.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetCharCount_System_Byte___System_Int32_System_Int32_\" data-linktype=\"self-bookmark\">GetCharCount(Byte[],Int32,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Calculates the number of characters produced by decoding a sequence of bytes from the specified byte array.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetChars_System_Byte__System_Int32_System_Char__System_Int32_\" data-linktype=\"self-bookmark\">GetChars(Byte*,Int32,Char*,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Decodes a sequence of bytes starting at the specified byte pointer into a set of characters that are stored starting at the specified character pointer.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetChars_System_Byte___System_Int32_System_Int32_System_Char___System_Int32_\" data-linktype=\"self-bookmark\">GetChars(Byte[],Int32,Int32,Char[],Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Decodes a sequence of bytes from the specified byte array into the specified character array.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetDecoder\" data-linktype=\"self-bookmark\">GetDecoder()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Obtains a decoder that converts a UTF-8 encoded sequence of bytes into a sequence of Unicode characters.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetEncoder\" data-linktype=\"self-bookmark\">GetEncoder()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Obtains an encoder that converts a sequence of Unicode characters into a UTF-8 encoded sequence of bytes.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetHashCode\" data-linktype=\"self-bookmark\">GetHashCode()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Returns the hash code for the current instance.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetMaxByteCount_System_Int32_\" data-linktype=\"self-bookmark\">GetMaxByteCount(Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Calculates the maximum number of bytes produced by encoding the specified number of characters.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetMaxCharCount_System_Int32_\" data-linktype=\"self-bookmark\">GetMaxCharCount(Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Calculates the maximum number of characters produced by decoding the specified number of bytes.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetPreamble\" data-linktype=\"self-bookmark\">GetPreamble()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Returns a Unicode byte order mark encoded in UTF-8 format, if the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> encoding object is configured to supply one.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Text_UTF8Encoding_GetString_System_Byte___System_Int32_System_Int32_\" data-linktype=\"self-bookmark\">GetString(Byte[],Int32,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Decodes a range of bytes from a byte array into a string.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"constructors\">\r\n        <h2>Constructors\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding__ctor\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">UTF8Encoding()</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> class.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public UTF8Encoding ();</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This constructor creates an instance that does not provide a Unicode byte order mark and does not throw an exception when an invalid encoding is detected.  </p>\n<div class=\"NOTE\"><h5>Note</h5><p> For security reasons, we recommend that you enable error detection by calling a constructor with a <code>throwOnInvalidBytes</code> parameter and setting its value to <code>true</code>.</p>\n</div>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example creates a new <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> instance and displays its name.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.ctor1 Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        UTF8Encoding utf8 = new UTF8Encoding();\n        String encodingName = utf8.EncodingName;\n        Console.WriteLine(&quot;Encoding name: &quot; + encodingName);\n    }\n}\n</code></pre><pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.ctor1 Example#1\">using namespace System;\nusing namespace System::Text;\nint main()\n{\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   String^ encodingName = utf8-&gt;EncodingName;\n   Console::WriteLine( &quot;Encoding name: {0}&quot;, encodingName );\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.ctor1 Example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim utf8 As New UTF8Encoding()\n        Dim encodingName As String = utf8.EncodingName\n        Console.WriteLine(&quot;Encoding name: &quot; &amp; encodingName)\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding__ctor_System_Boolean_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">UTF8Encoding(Boolean)</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> class. A parameter specifies whether to provide a Unicode byte order mark.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public UTF8Encoding (bool encoderShouldEmitUTF8Identifier);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>encoderShouldEmitUTF8Identifier</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.boolean\" data-linktype=\"relative-path\">Boolean</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p><code>true</code> to specify that the <span class=\"xref\">stem.Text.UTF8Encoding.GetPreamble*</span> method returns a Unicode byte order mark; otherwise, <code>false</code>. See the Remarks section for more information.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This constructor creates an instance that does not throw an exception when an invalid encoding is detected.  </p>\n<div class=\"NOTE\"><h5>Note</h5><p> For security reasons, you should enable error detection by calling a constructor that includes a <code>throwOnInvalidBytes</code> parameter and setting its value to <code>true</code>.  </p>\n</div>\n<p> The <code>encoderShouldEmitUTF8Identifier</code> parameter controls the operation of the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetPreamble_\" data-linktype=\"relative-path\">GetPreamble</a> method. If <code>true</code>, the method returns a byte array containing the Unicode byte order mark (BOM) in UTF-8 format.  If <code>false</code>, it returns a zero-length byte array. However, setting <code>encoderShouldEmitUTF8Identifier</code> to <code>true</code> does not cause the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method to prefix the BOM at the beginning of the byte array, nor does it cause the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method to include the number of bytes in the BOM in the byte count.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example creates a new <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> instance and specifies that a Unicode byte order mark prefix should be emitted by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetPreamble_\" data-linktype=\"relative-path\">GetPreamble</a> method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetPreamble_\" data-linktype=\"relative-path\">GetPreamble</a> method then returns the Unicode byte order mark prefix.  </p>\n<pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.ctor2 Example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim utf8 As New UTF8Encoding()\n        Dim utf8EmitBOM As New UTF8Encoding(True)\n        \n        Console.WriteLine(&quot;utf8 preamble:&quot;)\n        ShowArray(utf8.GetPreamble())\n        \n        Console.WriteLine(&quot;utf8EmitBOM:&quot;)\n        ShowArray(utf8EmitBOM.GetPreamble())\n    End Sub &#39;Main\n    \n    \n    Public Shared Sub ShowArray(theArray As Array)\n        Dim o As Object\n        For Each o In  theArray\n            Console.Write(&quot;[{0}]&quot;, o)\n        Next o\n        Console.WriteLine()\n    End Sub &#39;ShowArray\nEnd Class &#39;UTF8EncodingExample\n</code></pre><pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.ctor2 Example#1\">using namespace System;\nusing namespace System::Text;\nusing namespace System::Collections;\nvoid ShowArray( Array^ theArray )\n{\n   IEnumerator^ myEnum = theArray-&gt;GetEnumerator();\n   while ( myEnum-&gt;MoveNext() )\n   {\n      Object^ o = safe_cast&lt;Object^&gt;(myEnum-&gt;Current);\n      Console::Write( &quot;[{0}]&quot;, o );\n   }\n\n   Console::WriteLine();\n}\n\nint main()\n{\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   UTF8Encoding^ utf8EmitBOM = gcnew UTF8Encoding( true );\n   Console::WriteLine( &quot;utf8 preamble:&quot; );\n   ShowArray( utf8-&gt;GetPreamble() );\n   Console::WriteLine( &quot;utf8EmitBOM:&quot; );\n   ShowArray( utf8EmitBOM-&gt;GetPreamble() );\n}\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.ctor2 Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        UTF8Encoding utf8 = new UTF8Encoding();\n        UTF8Encoding utf8EmitBOM = new UTF8Encoding(true);\n\n        Console.WriteLine(&quot;utf8 preamble:&quot;);\n        ShowArray(utf8.GetPreamble());\n\n        Console.WriteLine(&quot;utf8EmitBOM:&quot;);\n        ShowArray(utf8EmitBOM.GetPreamble());\n    }\n\n    public static void ShowArray(Array theArray) {\n        foreach (Object o in theArray) {\n            Console.Write(&quot;[{0}]&quot;, o);\n        }\n        Console.WriteLine();\n    }\n}\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding__ctor_System_Boolean_System_Boolean_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">UTF8Encoding(Boolean,Boolean)</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> class. Parameters specify whether to provide a Unicode byte order mark and whether to throw an exception when an invalid encoding is detected.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public UTF8Encoding (bool encoderShouldEmitUTF8Identifier, bool throwOnInvalidBytes);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>encoderShouldEmitUTF8Identifier</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.boolean\" data-linktype=\"relative-path\">Boolean</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p><code>true</code> to specify that the <span class=\"xref\">stem.Text.UTF8Encoding.GetPreamble*</span> method should return a Unicode byte order mark; otherwise, <code>false</code>. See the Remarks section for more information.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>throwOnInvalidBytes</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.boolean\" data-linktype=\"relative-path\">Boolean</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p><code>true</code> to throw an exception when an invalid encoding is detected; otherwise, <code>false</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The <code>encoderShouldEmitUTF8Identifier</code> parameter controls the operation of the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetPreamble_\" data-linktype=\"relative-path\">GetPreamble</a> method. If <code>true</code>, the method returns a byte array containing the Unicode byte order mark (BOM) in UTF-8 format.  If <code>false</code>, it returns a zero-length byte array. However, setting <code>encoderShouldEmitUTF8Identifier</code> to <code>true</code> does not cause the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method to prefix the BOM at the beginning of the byte array, nor does it cause the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method to include the number of bytes in the BOM in the byte count.  </p>\n<p> If <code>throwOnInvalidBytes</code> is <code>true</code>, a method that detects an invalid byte sequence throws an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">System.ArgumentException</a> exception. Otherwise, the method does not throw an exception, and the invalid sequence is ignored.  </p>\n<div class=\"NOTE\"><h5>Note</h5><p> For security reasons, you should enable error detection by calling a constructor that includes a <code>throwOnInvalidBytes</code> parameter and setting that parameter to <code>true</code>.</p>\n</div>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example creates a new <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> instance, specifying that the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetPreamble_\" data-linktype=\"relative-path\">GetPreamble</a> method should not emit a Unicode byte order mark prefix, and an exception should be thrown when an invalid encoding is detected. The behavior of this constructor is compared to the default <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding__ctor\" data-linktype=\"relative-path\">UTF8Encoding()</a> constructor, which does not throw an exception when an invalid encoding is detected. The two <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> instances encode a character array that contains two high surrogates (U+D801 and U+D802) in a row, which is an invalid character sequence; a high surrogate should always be followed by a low surrogate.  </p>\n<pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.ctor3 Example#1\">using namespace System;\nusing namespace System::Text;\n\nvoid ShowArray(Array^ theArray)\n{\n   for each (Byte b in theArray) {\n      Console::Write( &quot;{0:X2} &quot;, b);\n   }\n   Console::WriteLine();\n}\n\nint main()\n{\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   UTF8Encoding^ utf8ThrowException = gcnew UTF8Encoding(false,true);\n   \n   // This array contains two high surrogates in a row (\\uD801, \\uD802).\n   array&lt;Char&gt;^chars = {&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,L&#39;\\xD801&#39;,L&#39;\\xD802&#39;,&#39;d&#39;};\n   \n   // The following method call will not throw an exception.\n   array&lt;Byte&gt;^bytes = utf8-&gt;GetBytes( chars );\n   ShowArray( bytes );\n   Console::WriteLine();\n   \n   try {\n      \n      // The following method call will throw an exception.\n      bytes = utf8ThrowException-&gt;GetBytes( chars );\n   }\n   catch (EncoderFallbackException^ e ) {\n            Console::WriteLine(&quot;{0} exception<br>Message:<br>{1}&quot;,\n                               e-&gt;GetType()-&gt;Name, e-&gt;Message);\n   }\n\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.ctor3 Example#1\">Imports System.Text\n\nClass Example\n    Public Shared Sub Main()\n        Dim utf8 As New UTF8Encoding()\n        Dim utf8ThrowException As New UTF8Encoding(False, True)\n        \n        &#39; Create an array with two high surrogates in a row (\\uD801, \\uD802).\n        Dim chars() As Char = {&quot;a&quot;c, &quot;b&quot;c, &quot;c&quot;c, ChrW(&amp;hD801), ChrW(&amp;hD802), &quot;d&quot;c}\n        \n        &#39; The following method call will not throw an exception.\n        Dim bytes As Byte() = utf8.GetBytes(chars)\n        ShowArray(bytes)\n        Console.WriteLine()\n        \n        Try\n            &#39; The following method call will throw an exception.\n            bytes = utf8ThrowException.GetBytes(chars)\n            ShowArray(bytes)\n        Catch e As EncoderFallbackException\n            Console.WriteLine(&quot;{0} exception{2}Message:{2}{1}&quot;,\n                              e.GetType().Name, e.Message, vbCrLf)\n        End Try\n    End Sub\n    \n    \n    Public Shared Sub ShowArray(theArray As Array)\n        For Each o In theArray\n            Console.Write(&quot;{0:X2} &quot;, o)\n        Next\n        Console.WriteLine()\n    End Sub\nEnd Class\n&#39; The example displays the following output:\n&#39;    61 62 63 EF BF BD EF BF BD 64\n&#39;\n&#39;    EncoderFallbackException exception\n&#39;    Message:\n&#39;    Unable to translate Unicode character \\uD801 at index 3 to specified code page.\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.ctor3 Example#1\">using System;\nusing System.Text;\n\nclass Example\n{\n    public static void Main()\n    {\n        UTF8Encoding utf8 = new UTF8Encoding();\n        UTF8Encoding utf8ThrowException = new UTF8Encoding(false, true);\n\n        // Create an array with two high surrogates in a row (\\uD801, \\uD802).\n        Char[] chars = new Char[] {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;\\uD801&#39;, &#39;\\uD802&#39;, &#39;d&#39;};\n\n        // The following method call will not throw an exception.\n        Byte[] bytes = utf8.GetBytes(chars);\n        ShowArray(bytes);\n        Console.WriteLine();\n\n        try {\n            // The following method call will throw an exception.\n            bytes = utf8ThrowException.GetBytes(chars);\n            ShowArray(bytes);\n        }\n        catch (EncoderFallbackException e) {\n            Console.WriteLine(&quot;{0} exception<br>Message:<br>{1}&quot;,\n                              e.GetType().Name, e.Message);\n        }\n    }\n\n    public static void ShowArray(Array theArray) {\n        foreach (Object o in theArray)\n            Console.Write(&quot;{0:X2} &quot;, o);\n\n        Console.WriteLine();\n    }\n}\n// The example displays the following output:\n//    61 62 63 EF BF BD EF BF BD 64\n//\n//    EncoderFallbackException exception\n//    Message:\n//    Unable to translate Unicode character \\uD801 at index 3 to specified code page.\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"methods\">\r\n        <h2>Methods\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_Equals_System_Object_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_Equals_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Equals(Object)</div>        \r\n          </div>\r\n    \r\n            <p>Determines whether the specified object is equal to the current <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> object.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override bool Equals (object value);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>value</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">Object</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The object to compare with the current instance.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.boolean\" data-linktype=\"relative-path\">Boolean</a></div>\r\n                  </div>\r\n                  <p><code>true</code> if <code>value</code> is an instance of <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> and is equal to the current object; otherwise, <code>false</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Two <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> objects are considered equal if all of the following conditions are true:  </p>\n<ul>\n<li><p>Both objects provide the byte order mark, or both do not.  </p>\n</li>\n<li><p>Both objects use the same encoder fallback.  </p>\n</li>\n<li><p>Both objects use the same decoder fallback.</p>\n</li>\n</ul>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the Equals method to test whether the current <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> object is equal to a different <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> object. Four <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> objects are created and compared and the results of the comparisons are displayed.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.Equals Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        UTF8Encoding utf8 = new UTF8Encoding();\n        UTF8Encoding utf8true = new UTF8Encoding(true);\n        UTF8Encoding utf8truetrue = new UTF8Encoding(true, true);\n        UTF8Encoding utf8falsetrue = new UTF8Encoding(false, true);\n        \n        DescribeEquivalence(utf8.Equals(utf8));\n        DescribeEquivalence(utf8.Equals(utf8true));\n        DescribeEquivalence(utf8.Equals(utf8truetrue));\n        DescribeEquivalence(utf8.Equals(utf8falsetrue));\n        \n        DescribeEquivalence(utf8true.Equals(utf8));\n        DescribeEquivalence(utf8true.Equals(utf8true));\n        DescribeEquivalence(utf8true.Equals(utf8truetrue));\n        DescribeEquivalence(utf8true.Equals(utf8falsetrue));\n        \n        DescribeEquivalence(utf8truetrue.Equals(utf8));\n        DescribeEquivalence(utf8truetrue.Equals(utf8true));\n        DescribeEquivalence(utf8truetrue.Equals(utf8truetrue));\n        DescribeEquivalence(utf8truetrue.Equals(utf8falsetrue));\n        \n        DescribeEquivalence(utf8falsetrue.Equals(utf8));\n        DescribeEquivalence(utf8falsetrue.Equals(utf8true));\n        DescribeEquivalence(utf8falsetrue.Equals(utf8truetrue));\n        DescribeEquivalence(utf8falsetrue.Equals(utf8falsetrue));\n    }\n\n    public static void DescribeEquivalence(Boolean isEquivalent) {\n        Console.WriteLine(\n            &quot;{0} equivalent encoding.&quot;, (isEquivalent ? &quot;An&quot; : &quot;Not an&quot;)\n        );\n    }\n}\n</code></pre><pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.Equals Example#1\">using namespace System;\nusing namespace System::Text;\nvoid DescribeEquivalence( Boolean isEquivalent )\n{\n   Console::WriteLine( &quot;{0} equivalent encoding.&quot;, (isEquivalent ? (String^)&quot;An&quot; : &quot;Not an&quot;) );\n}\n\nint main()\n{\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   UTF8Encoding^ utf8true = gcnew UTF8Encoding( true );\n   UTF8Encoding^ utf8truetrue = gcnew UTF8Encoding( true,true );\n   UTF8Encoding^ utf8falsetrue = gcnew UTF8Encoding( false,true );\n   DescribeEquivalence( utf8-&gt;Equals( utf8 ) );\n   DescribeEquivalence( utf8-&gt;Equals( utf8true ) );\n   DescribeEquivalence( utf8-&gt;Equals( utf8truetrue ) );\n   DescribeEquivalence( utf8-&gt;Equals( utf8falsetrue ) );\n   DescribeEquivalence( utf8true-&gt;Equals( utf8 ) );\n   DescribeEquivalence( utf8true-&gt;Equals( utf8true ) );\n   DescribeEquivalence( utf8true-&gt;Equals( utf8truetrue ) );\n   DescribeEquivalence( utf8true-&gt;Equals( utf8falsetrue ) );\n   DescribeEquivalence( utf8truetrue-&gt;Equals( utf8 ) );\n   DescribeEquivalence( utf8truetrue-&gt;Equals( utf8true ) );\n   DescribeEquivalence( utf8truetrue-&gt;Equals( utf8truetrue ) );\n   DescribeEquivalence( utf8truetrue-&gt;Equals( utf8falsetrue ) );\n   DescribeEquivalence( utf8falsetrue-&gt;Equals( utf8 ) );\n   DescribeEquivalence( utf8falsetrue-&gt;Equals( utf8true ) );\n   DescribeEquivalence( utf8falsetrue-&gt;Equals( utf8truetrue ) );\n   DescribeEquivalence( utf8falsetrue-&gt;Equals( utf8falsetrue ) );\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.Equals Example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim utf8 As New UTF8Encoding()\n        Dim utf8true As New UTF8Encoding(True)\n        Dim utf8truetrue As New UTF8Encoding(True, True)\n        Dim utf8falsetrue As New UTF8Encoding(False, True)\n        \n        DescribeEquivalence(utf8.Equals(utf8))\n        DescribeEquivalence(utf8.Equals(utf8true))\n        DescribeEquivalence(utf8.Equals(utf8truetrue))\n        DescribeEquivalence(utf8.Equals(utf8falsetrue))\n        \n        DescribeEquivalence(utf8true.Equals(utf8))\n        DescribeEquivalence(utf8true.Equals(utf8true))\n        DescribeEquivalence(utf8true.Equals(utf8truetrue))\n        DescribeEquivalence(utf8true.Equals(utf8falsetrue))\n        \n        DescribeEquivalence(utf8truetrue.Equals(utf8))\n        DescribeEquivalence(utf8truetrue.Equals(utf8true))\n        DescribeEquivalence(utf8truetrue.Equals(utf8truetrue))\n        DescribeEquivalence(utf8truetrue.Equals(utf8falsetrue))\n        \n        DescribeEquivalence(utf8falsetrue.Equals(utf8))\n        DescribeEquivalence(utf8falsetrue.Equals(utf8true))\n        DescribeEquivalence(utf8falsetrue.Equals(utf8truetrue))\n        DescribeEquivalence(utf8falsetrue.Equals(utf8falsetrue))\n    End Sub &#39;Main\n    \n    \n    Public Shared Sub DescribeEquivalence(isEquivalent As Boolean)\n        Dim phrase as String\n        If isEquivalent Then\n            phrase = &quot;An&quot;\n        Else\n            phrase = &quot;Not an&quot;\n        End If\n        Console.WriteLine(&quot;{0} equivalent encoding.&quot;, phrase)\n    End Sub &#39;DescribeEquivalence\nEnd Class &#39;UTF8EncodingExample\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetByteCount_System_String_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetByteCount_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetByteCount(String)</div>        \r\n          </div>\r\n    \r\n            <p>Calculates the number of bytes produced by encoding the characters in the specified <a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a>.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetByteCount (string chars);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>chars</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a> containing the set of characters to encode.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The number of bytes produced by encoding the specified characters.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>chars</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p>The resulting number of bytes is greater than the maximum number that can be returned as an integer.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>chars</code> contains an invalid sequence of characters.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.encoderfallbackexception\" data-linktype=\"relative-path\">EncoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.EncoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.encoderexceptionfallback\" data-linktype=\"relative-path\">EncoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> to store the resulting bytes, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method. To calculate the maximum array size, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.  </p>\n<p> To ensure that the encoded bytes are decoded properly when they are saved as a file or as a stream, you can prefix a stream of encoded bytes with a preamble. Inserting the preamble at the beginning of a byte stream (such as at the beginning of a series of bytes to be written to a file) is the developer&#39;s responsibility, and the number of bytes in the preamble is not reflected in the value returned by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example calls the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> and GetByteCount methods to calculate the maximum and actual number of bytes required to encode a string. It also displays the actual number of bytes required to store a byte stream with a byte order mark.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetByteCount#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        String chars = &quot;UTF8 Encoding Example&quot;;\n        Encoding utf8 = Encoding.UTF8;\n\n        Console.WriteLine(&quot;Bytes needed to encode &#39;{0}&#39;:&quot;, chars);\n        Console.WriteLine(&quot;   Maximum:         {0}&quot;,\n                          utf8.GetMaxByteCount(chars.Length));\n        Console.WriteLine(&quot;   Actual:          {0}&quot;,\n                          utf8.GetByteCount(chars));\n        Console.WriteLine(&quot;   Actual with BOM: {0}&quot;,\n                          utf8.GetByteCount(chars) + utf8.GetPreamble().Length);\n    }\n}\n// The example displays the following output:\n//       Bytes needed to encode &#39;UTF8 Encoding Example&#39;:\n//          Maximum:         66\n//          Actual:          21\n//          Actual with BOM: 24\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetByteCount#1\">Imports System.Text\n\nModule Example\n    Public Sub Main()\n        Dim chars As String = &quot;UTF8 Encoding Example&quot;\n        Dim utf8 As Encoding = Encoding.UTF8\n\n        Console.WriteLine(&quot;Bytes needed to encode &#39;{0}&#39;:&quot;, chars)\n        Console.WriteLine(&quot;   Maximum:         {0}&quot;,\n                          utf8.GetMaxByteCount(chars.Length))\n        Console.WriteLine(&quot;   Actual:          {0}&quot;,\n                          utf8.GetByteCount(chars))\n        Console.WriteLine(&quot;   Actual with BOM: {0}&quot;,\n                          utf8.GetByteCount(chars) + utf8.GetPreamble().Length)\n    End Sub\nEnd Module\n&#39; The example displays the following output:\n&#39;       Bytes needed to encode &#39;UTF8 Encoding Example&#39;:\n&#39;          Maximum:         66\n&#39;          Actual:          21\n&#39;          Actual with BOM: 24\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetByteCount_System_Char__System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetByteCount_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetByteCount(Char*,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Calculates the number of bytes produced by encoding a set of characters starting at the specified character pointer.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetByteCount (char* chars, int count);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>chars</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.char\" data-linktype=\"relative-path\">Char</a>*</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A pointer to the first character to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>count</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of characters to encode.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The number of bytes produced by encoding the specified characters.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>chars</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>count</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> The resulting number of bytes is greater than the maximum number that can be returned as an integer.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>chars</code> contains an invalid sequence of characters.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.encoderfallbackexception\" data-linktype=\"relative-path\">EncoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for a complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.EncoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.encoderexceptionfallback\" data-linktype=\"relative-path\">EncoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method to store the resulting bytes, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method. To calculate the maximum array size, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.  </p>\n<p> To ensure that the encoded bytes are decoded properly when they are saved as a file or as a stream, you can prefix a stream of encoded bytes with a preamble. Inserting the preamble at the beginning of a byte stream (such as at the beginning of a series of bytes to be written to a file) is the developer&#39;s responsibility, and the number of bytes in the preamble is not reflected in the value returned by the GetByteCount method.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetByteCount_System_Char___System_Int32_System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetByteCount_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetByteCount(Char[],Int32,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Calculates the number of bytes produced by encoding a set of characters from the specified character array.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetByteCount (char[] chars, int index, int count);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>chars</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.char\" data-linktype=\"relative-path\">Char</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The character array containing the set of characters to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>index</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The index of the first character to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>count</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of characters to encode.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The number of bytes produced by encoding the specified characters.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>chars</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>index</code> or <code>count</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> <code>index</code> and <code>count</code> do not denote a valid range in <code>chars</code>.  </p>\n<p> -or-  </p>\n<p> The resulting number of bytes is greater than the maximum number that can be returned as an integer.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>chars</code> contains an invalid sequence of characters.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.encoderfallbackexception\" data-linktype=\"relative-path\">EncoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> The <span class=\"xref\">stem.Text.Encoding.EncoderFallback*</span> property is set to <a class=\"xref\" href=\"system.text.encoderexceptionfallback\" data-linktype=\"relative-path\">EncoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> to store the resulting bytes, you call the uses GetByteCount method. To calculate the maximum array size, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method. The GetByteCount method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.  </p>\n<p> To ensure that the encoded bytes are decoded properly when they are saved as a file or as a stream, you can prefix a stream of encoded bytes with a preamble. Inserting the preamble at the beginning of a byte stream (such as at the beginning of a series of bytes to be written to a file) is the developer&#39;s responsibility, and the number of bytes in the preamble is not reflected in the value returned by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example populates an array with a Latin uppercase and lowercase characters and calls the GetByteCount method to determine the number of bytes needed to encode the Latin lowercase characters. It then displays this information along with the total number of bytes needed if a byte order mark is added. It compares this number with the value returned by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method, which indicates maximum number of bytes needed to encode the Latin lowercase characters.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetByteCount#2\">using System;\nusing System.Text;\n\npublic class Example\n{\n   public static void Main()\n   {\n      int uppercaseStart = 0x0041;\n      int uppercaseEnd = 0x005a;\n      int lowercaseStart = 0x0061;\n      int lowercaseEnd = 0x007a;\n      // Instantiate a UTF8 encoding object with BOM support.\n      Encoding utf8 = new UTF8Encoding(true);\n\n      // Populate array with characters.\n      char[] chars = new char[lowercaseEnd - lowercaseStart + uppercaseEnd - uppercaseStart + 2];\n      int index = 0;\n      for (int ctr = uppercaseStart; ctr &lt;= uppercaseEnd; ctr++) {\n         chars[index] = (char)ctr;\n         index++;\n      }\n      for (int ctr = lowercaseStart; ctr &lt;= lowercaseEnd; ctr++) {\n         chars[index] = (char)ctr;\n         index++;\n      }\n\n      // Display the bytes needed for the lowercase characters.\n      Console.WriteLine(&quot;Bytes needed for lowercase Latin characters:&quot;);\n      Console.WriteLine(&quot;   Maximum:         {0,5:N0}&quot;,\n                        utf8.GetMaxByteCount(lowercaseEnd - lowercaseStart + 1));\n      Console.WriteLine(&quot;   Actual:          {0,5:N0}&quot;,\n                        utf8.GetByteCount(chars, uppercaseEnd - uppercaseStart + 1,\n                                          lowercaseEnd - lowercaseStart + 1));\n      Console.WriteLine(&quot;   Actual with BOM: {0,5:N0}&quot;,\n                        utf8.GetByteCount(chars, uppercaseEnd - uppercaseStart + 1,\n                                          lowercaseEnd - lowercaseStart + 1) +\n                                          utf8.GetPreamble().Length);\n   }\n}\n// The example displays the following output:\n//       Bytes needed for lowercase Latin characters:\n//          Maximum:            81\n//          Actual:             26\n//          Actual with BOM:    29\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetByteCount#2\">Imports System.Text\n\nModule Example\n   Public Sub Main()\n      Dim uppercaseStart As Integer = &amp;h0041\n      Dim uppercaseEnd As Integer = &amp;h005a\n      Dim lowercaseStart As Integer = &amp;h0061\n      Dim lowercaseEnd As Integer = &amp;h007a\n      &#39; Instantiate a UTF8 encoding object with BOM support.\n      Dim utf8 As New UTF8Encoding(True)\n      \n      &#39; Populate array with characters.\n      Dim chars(lowercaseEnd - lowercaseStart + uppercaseEnd - uppercaseStart + 1) As Char\n      Dim index As Integer = 0\n      For ctr As Integer = uppercaseStart To uppercaseEnd\n         chars(index) = ChrW(ctr)\n         index += 1\n      Next\n      For ctr As Integer = lowercaseStart To lowercaseEnd\n         chars(index) = ChrW(ctr)\n         index += 1\n      Next\n\n      &#39; Display the bytes needed for the lowercase characters.\n        Console.WriteLine(&quot;Bytes needed for lowercase Latin characters:&quot;)\n        Console.WriteLine(&quot;   Maximum:         {0,5:N0}&quot;,\n                          utf8.GetMaxByteCount(lowercaseEnd - lowercaseStart + 1))\n        Console.WriteLine(&quot;   Actual:          {0,5:N0}&quot;,\n                          utf8.GetByteCount(chars, uppercaseEnd - uppercaseStart + 1,\n                                            lowercaseEnd - lowercaseStart + 1))\n        Console.WriteLine(&quot;   Actual with BOM: {0,5:N0}&quot;,\n                          utf8.GetByteCount(chars, uppercaseEnd - uppercaseStart + 1,\n                                            lowercaseEnd - lowercaseStart + 1) +\n                                            utf8.GetPreamble().Length)\n   End Sub\nEnd Module\n&#39; The example displays the following output:\n&#39;       Bytes needed for lowercase Latin characters:\n&#39;          Maximum:            81\n&#39;          Actual:             26\n&#39;          Actual with BOM:    29\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetBytes_System_Char__System_Int32_System_Byte__System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetBytes_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetBytes(Char*,Int32,Byte*,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Encodes a set of characters starting at the specified character pointer into a sequence of bytes that are stored starting at the specified byte pointer.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetBytes (char* chars, int charCount, byte* bytes, int byteCount);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>chars</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.char\" data-linktype=\"relative-path\">Char</a>*</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A pointer to the first character to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>charCount</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of characters to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>bytes</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>*</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A pointer to the location at which to start writing the resulting sequence of bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>byteCount</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The maximum number of bytes to write.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The actual number of bytes written at the location indicated by <code>bytes</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>chars</code> is <code>null</code>.  </p>\n<p> -or-  </p>\n<p> <code>bytes</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>charCount</code> or <code>byteCount</code> is less than zero.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>chars</code> contains an invalid sequence of characters.  </p>\n<p> -or-  </p>\n<p> <code>byteCount</code> is less than the resulting number of bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.encoderfallbackexception\" data-linktype=\"relative-path\">EncoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.EncoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.encoderexceptionfallback\" data-linktype=\"relative-path\">EncoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> to store the resulting bytes, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method. To calculate the maximum array size, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.  </p>\n<p> Data to be converted, such as data read from a stream, might be available only in sequential blocks. In this case, or if the amount of data is so large that it needs to be divided into smaller blocks, use the <a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a> or the <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> returned by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetDecoder_\" data-linktype=\"relative-path\">GetDecoder</a> method or the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetEncoder_\" data-linktype=\"relative-path\">GetEncoder</a> method, respectively.  </p>\n<p> To ensure that the encoded bytes are decoded properly when they are saved as a file or as a stream, you can prefix a stream of encoded bytes with a preamble. Inserting the preamble at the beginning of a byte stream (such as at the beginning of a series of bytes to be written to a file) is the developer&#39;s responsibility. The GetBytes method does not prepend a preamble to the beginning of a sequence of encoded bytes.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetBytes_System_Char___System_Int32_System_Int32_System_Byte___System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetBytes_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetBytes(Char[],Int32,Int32,Byte[],Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Encodes a set of characters from the specified character array into the specified byte array.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetBytes (char[] chars, int charIndex, int charCount, byte[] bytes, int byteIndex);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>chars</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.char\" data-linktype=\"relative-path\">Char</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The character array containing the set of characters to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>charIndex</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The index of the first character to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>charCount</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of characters to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>bytes</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The byte array to contain the resulting sequence of bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>byteIndex</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The index at which to start writing the resulting sequence of bytes.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The actual number of bytes written into <code>bytes</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>chars</code> is <code>null</code>.  </p>\n<p> -or-  </p>\n<p> <code>bytes</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>charIndex</code> or <code>charCount</code> or <code>byteIndex</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> <code>charIndex</code> and <code>charCount</code> do not denote a valid range in <code>chars</code>.  </p>\n<p> -or-  </p>\n<p> <code>byteIndex</code> is not a valid index in <code>bytes</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>chars</code> contains an invalid sequence of characters.  </p>\n<p> -or-  </p>\n<p> <code>bytes</code> does not have enough capacity from <code>byteIndex</code> to the end of the array to accommodate the resulting bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.encoderfallbackexception\" data-linktype=\"relative-path\">EncoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.EncoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.encoderexceptionfallback\" data-linktype=\"relative-path\">EncoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> to store the resulting bytes, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method. To calculate the maximum array size, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.  </p>\n<p> Data to be converted, such as data read from a stream, might be available only in sequential blocks. In this case, or if the amount of data is so large that it needs to be divided into smaller blocks, use the <a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a> or the <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> provided by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetDecoder_\" data-linktype=\"relative-path\">GetDecoder</a> method or the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetEncoder_\" data-linktype=\"relative-path\">GetEncoder</a> method, respectively.  </p>\n<p> To ensure that the encoded bytes are decoded properly when they are saved as a file or as a stream, you can prefix a stream of encoded bytes with a preamble. Inserting the preamble at the beginning of a byte stream (such as at the beginning of a series of bytes to be written to a file) is the developer&#39;s responsibility. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method does not prepend a preamble to the beginning of a sequence of encoded bytes.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method to encode a range of characters from a string and stores the encoded bytes in a range of elements in a byte array.  </p>\n<pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.GetBytes3 Example#1\">using namespace System;\nusing namespace System::Text;\nusing namespace System::Collections;\nint main()\n{\n   array&lt;Byte&gt;^bytes;\n   String^ chars = &quot;UTF8 Encoding Example&quot;;\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   int byteCount = utf8-&gt;GetByteCount( chars-&gt;ToCharArray(), 0, 13 );\n   bytes = gcnew array&lt;Byte&gt;(byteCount);\n   int bytesEncodedCount = utf8-&gt;GetBytes( chars, 0, 13, bytes, 0 );\n   Console::WriteLine( &quot;{0} bytes used to encode string.&quot;, bytesEncodedCount );\n   Console::Write( &quot;Encoded bytes: &quot; );\n   IEnumerator^ myEnum = bytes-&gt;GetEnumerator();\n   while ( myEnum-&gt;MoveNext() )\n   {\n      Byte b = safe_cast&lt;Byte&gt;(myEnum-&gt;Current);\n      Console::Write( &quot;[{0}]&quot;, b );\n   }\n\n   Console::WriteLine();\n}\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetBytes3 Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        Byte[] bytes;\n        String chars = &quot;UTF8 Encoding Example&quot;;\n        \n        UTF8Encoding utf8 = new UTF8Encoding();\n        \n        int byteCount = utf8.GetByteCount(chars.ToCharArray(), 0, 13);\n        bytes = new Byte[byteCount];\n        int bytesEncodedCount = utf8.GetBytes(chars, 0, 13, bytes, 0);\n        \n        Console.WriteLine(\n            &quot;{0} bytes used to encode string.&quot;, bytesEncodedCount\n        );\n\n        Console.Write(&quot;Encoded bytes: &quot;);\n        foreach (Byte b in bytes) {\n            Console.Write(&quot;[{0}]&quot;, b);\n        }\n        Console.WriteLine();\n    }\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetBytes3 Example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim bytes() As Byte\n        Dim chars As String = &quot;UTF8 Encoding Example&quot;\n        \n        Dim utf8 As New UTF8Encoding()\n        \n        Dim byteCount As Integer = utf8.GetByteCount(chars.ToCharArray(), 0, 13)\n        bytes = New Byte(byteCount - 1) {}\n        Dim bytesEncodedCount As Integer = utf8.GetBytes(chars, 0, 13, bytes, 0)\n        \n        Console.WriteLine(&quot;{0} bytes used to encode string.&quot;, bytesEncodedCount)\n        \n        Console.Write(&quot;Encoded bytes: &quot;)\n        Dim b As Byte\n        For Each b In  bytes\n            Console.Write(&quot;[{0}]&quot;, b)\n        Next b\n        Console.WriteLine()\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetBytes_System_String_System_Int32_System_Int32_System_Byte___System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetBytes_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetBytes(String,Int32,Int32,Byte[],Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Encodes a set of characters from the specified <a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a> into the specified byte array.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetBytes (string s, int charIndex, int charCount, byte[] bytes, int byteIndex);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>s</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a> containing the set of characters to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>charIndex</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The index of the first character to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>charCount</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of characters to encode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>bytes</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The byte array to contain the resulting sequence of bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>byteIndex</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The index at which to start writing the resulting sequence of bytes.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The actual number of bytes written into <code>bytes</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>s</code> is <code>null</code>.  </p>\n<p> -or-  </p>\n<p> <code>bytes</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>charIndex</code> or <code>charCount</code> or <code>byteIndex</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> <code>charIndex</code> and <code>charCount</code> do not denote a valid range in <code>chars</code>.  </p>\n<p> -or-  </p>\n<p> <code>byteIndex</code> is not a valid index in <code>bytes</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>s</code> contains an invalid sequence of characters.  </p>\n<p> -or-  </p>\n<p> <code>bytes</code> does not have enough capacity from <code>byteIndex</code> to the end of the array to accommodate the resulting bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.encoderfallbackexception\" data-linktype=\"relative-path\">EncoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.EncoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.encoderexceptionfallback\" data-linktype=\"relative-path\">EncoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by GetBytes to store the resulting bytes, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method. To calculate the maximum array size, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.  </p>\n<p> Data to be converted, such as data read from a stream, might be available only in sequential blocks. In this case, or if the amount of data is so large that it needs to be divided into smaller blocks, use the <a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a> or the <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> provided by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetDecoder_\" data-linktype=\"relative-path\">GetDecoder</a> method or the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetEncoder_\" data-linktype=\"relative-path\">GetEncoder</a> method, respectively.  </p>\n<p> To ensure that the encoded bytes are decoded properly when they are saved as a file or as a stream, you can prefix a stream of encoded bytes with a preamble. Inserting the preamble at the beginning of a byte stream (such as at the beginning of a series of bytes to be written to a file) is the developer&#39;s responsibility. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method does not prepend a preamble to the beginning of a sequence of encoded bytes.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the GetBytes method to encode a range of elements from a Unicode character array and store the encoded bytes in a range of elements in a byte array.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetBytes1 Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        Byte[] bytes;\n        // Unicode characters.\n        Char[] chars = new Char[] {\n            &#39;\\u0023&#39;, // #\n            &#39;\\u0025&#39;, // %\n            &#39;\\u03a0&#39;, // Pi\n            &#39;\\u03a3&#39;  // Sigma\n        };\n        \n        UTF8Encoding utf8 = new UTF8Encoding();\n        \n        int byteCount = utf8.GetByteCount(chars, 1, 2);\n        bytes = new Byte[byteCount];\n        int bytesEncodedCount = utf8.GetBytes(chars, 1, 2, bytes, 0);\n        \n        Console.WriteLine(\n            &quot;{0} bytes used to encode characters.&quot;, bytesEncodedCount\n        );\n\n        Console.Write(&quot;Encoded bytes: &quot;);\n        foreach (Byte b in bytes) {\n            Console.Write(&quot;[{0}]&quot;, b);\n        }\n        Console.WriteLine();\n    }\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetBytes1 Example#1\">Imports System\nImports System.Text\nImports Microsoft.VisualBasic.Strings\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim bytes() As Byte\n        &#39; Unicode characters.\n        &#39; ChrW(35)  = #\n        &#39; ChrW(37)  = %\n        &#39; ChrW(928) = Pi\n        &#39; ChrW(931) = Sigma\n        Dim chars() As Char = {ChrW(35), ChrW(37), ChrW(928), ChrW(931)}\n        \n        Dim utf8 As New UTF8Encoding()\n        \n        Dim byteCount As Integer = utf8.GetByteCount(chars, 1, 2)\n        bytes = New Byte(byteCount - 1) {}\n        Dim bytesEncodedCount As Integer = utf8.GetBytes(chars, 1, 2, bytes, 0)\n        \n        Console.WriteLine(&quot;{0} bytes used to encode characters.&quot;, bytesEncodedCount)\n        \n        Console.Write(&quot;Encoded bytes: &quot;)\n        Dim b As Byte\n        For Each b In  bytes\n            Console.Write(&quot;[{0}]&quot;, b)\n        Next b\n        Console.WriteLine()\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre><pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.GetBytes1 Example#1\">using namespace System;\nusing namespace System::Text;\nusing namespace System::Collections;\nint main()\n{\n   array&lt;Byte&gt;^bytes;\n   \n   // Unicode characters.\n   \n   // Pi\n   // Sigma\n   array&lt;Char&gt;^chars = {L&#39;\\u03a0&#39;,L&#39;\\u03a3&#39;,L&#39;\\u03a6&#39;,L&#39;\\u03a9&#39;};\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   int byteCount = utf8-&gt;GetByteCount( chars, 1, 2 );\n   bytes = gcnew array&lt;Byte&gt;(byteCount);\n   int bytesEncodedCount = utf8-&gt;GetBytes( chars, 1, 2, bytes, 0 );\n   Console::WriteLine( &quot;{0} bytes used to encode characters.&quot;, bytesEncodedCount );\n   Console::Write( &quot;Encoded bytes: &quot; );\n   IEnumerator^ myEnum = bytes-&gt;GetEnumerator();\n   while ( myEnum-&gt;MoveNext() )\n   {\n      Byte b = safe_cast&lt;Byte&gt;(myEnum-&gt;Current);\n      Console::Write( &quot;[{0}]&quot;, b );\n   }\n\n   Console::WriteLine();\n}\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetCharCount_System_Byte__System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetCharCount_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetCharCount(Byte*,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Calculates the number of characters produced by decoding a sequence of bytes starting at the specified byte pointer.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetCharCount (byte* bytes, int count);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>bytes</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>*</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A pointer to the first byte to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>count</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of bytes to decode.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The number of characters produced by decoding the specified sequence of bytes.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>bytes</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>count</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> The resulting number of bytes is greater than the maximum number that can be returned as an integer.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>bytes</code> contains an invalid sequence of bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.decoderfallbackexception\" data-linktype=\"relative-path\">DecoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.DecoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.decoderexceptionfallback\" data-linktype=\"relative-path\">DecoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetChars_\" data-linktype=\"relative-path\">GetChars</a> to store the resulting characters, call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> method. To calculate the maximum array size, call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxCharCount_\" data-linktype=\"relative-path\">GetMaxCharCount</a> method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxCharCount_\" data-linktype=\"relative-path\">GetMaxCharCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetCharCount_System_Byte___System_Int32_System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetCharCount_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetCharCount(Byte[],Int32,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Calculates the number of characters produced by decoding a sequence of bytes from the specified byte array.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetCharCount (byte[] bytes, int index, int count);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>bytes</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The byte array containing the sequence of bytes to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>index</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The index of the first byte to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>count</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of bytes to decode.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The number of characters produced by decoding the specified sequence of bytes.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>bytes</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>index</code> or <code>count</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> <code>index</code> and <code>count</code> do not denote a valid range in <code>bytes</code>.  </p>\n<p> -or-  </p>\n<p> The resulting number of bytes is greater than the maximum number that can be returned as an integer.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>bytes</code> contains an invalid sequence of bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.decoderfallbackexception\" data-linktype=\"relative-path\">DecoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.DecoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.decoderexceptionfallback\" data-linktype=\"relative-path\">DecoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetChars_\" data-linktype=\"relative-path\">GetChars</a> to store the resulting characters, call the GetCharCount method. To calculate the maximum array size, call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxCharCount_\" data-linktype=\"relative-path\">GetMaxCharCount</a> method. The GetCharCount method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxCharCount_\" data-linktype=\"relative-path\">GetMaxCharCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the GetCharCount method to return the number of characters produced by decoding a range of elements in a byte array.  </p>\n<pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.GetCharCount Example#1\">using namespace System;\nusing namespace System::Text;\nint main()\n{\n   array&lt;Byte&gt;^bytes = {85,84,70,56,32,69,110,99,111,100,105,110,103,32,69,120,97,109,112,108,101};\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   int charCount = utf8-&gt;GetCharCount( bytes, 2, 8 );\n   Console::WriteLine( &quot;{0} characters needed to decode bytes.&quot;, charCount );\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetCharCount Example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim bytes() As Byte = { _\n            85,  84,  70,  56,  32,  69, 110, _\n            99, 111, 100, 105, 110, 103,  32, _\n            69, 120,  97, 109, 112, 108, 101 _\n        }\n        \n        Dim utf8 As New UTF8Encoding()\n        Dim charCount As Integer = utf8.GetCharCount(bytes, 2, 8)\n        Console.WriteLine(&quot;{0} characters needed to decode bytes.&quot;, charCount)\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetCharCount Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        Byte[] bytes = new Byte[] {\n             85,  84,  70,  56,  32,  69, 110,\n             99, 111, 100, 105, 110, 103,  32,\n             69, 120,  97, 109, 112, 108, 101\n        };\n\n        UTF8Encoding utf8 = new UTF8Encoding();\n        int charCount = utf8.GetCharCount(bytes, 2, 8);\n        Console.WriteLine(\n            &quot;{0} characters needed to decode bytes.&quot;, charCount\n        );\n    }\n}\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetChars_System_Byte__System_Int32_System_Char__System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetChars_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetChars(Byte*,Int32,Char*,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Decodes a sequence of bytes starting at the specified byte pointer into a set of characters that are stored starting at the specified character pointer.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetChars (byte* bytes, int byteCount, char* chars, int charCount);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>bytes</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>*</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A pointer to the first byte to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>byteCount</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of bytes to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>chars</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.char\" data-linktype=\"relative-path\">Char</a>*</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A pointer to the location at which to start writing the resulting set of characters.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>charCount</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The maximum number of characters to write.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The actual number of characters written at the location indicated by <code>chars</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>bytes</code> is <code>null</code>.  </p>\n<p> -or-  </p>\n<p> <code>chars</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>byteCount</code> or <code>charCount</code> is less than zero.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>bytes</code> contains an invalid sequence of bytes.  </p>\n<p> -or-  </p>\n<p> <code>charCount</code> is less than the resulting number of characters.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.decoderfallbackexception\" data-linktype=\"relative-path\">DecoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.DecoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.decoderexceptionfallback\" data-linktype=\"relative-path\">DecoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetChars_\" data-linktype=\"relative-path\">GetChars</a> to store the resulting characters, call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> method. To calculate the maximum array size, call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxCharCount_\" data-linktype=\"relative-path\">GetMaxCharCount</a> method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxCharCount_\" data-linktype=\"relative-path\">GetMaxCharCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.  </p>\n<p> If the range of bytes to be decoded includes the byte order mark (BOM) and the byte array was returned by a method of a non-BOM aware type, the character U+FFFE is included in the character array returned by this method. You can remove it by calling the <a class=\"xref\" href=\"system.string#System_String_TrimStart_\" data-linktype=\"relative-path\">TrimStart</a> method.  </p>\n<p> Data to be converted, such as data read from a stream, might be available only in sequential blocks. In this case, or if the amount of data is so large that it needs to be divided into smaller blocks, use the <a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a> or the <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> object provided by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetDecoder_\" data-linktype=\"relative-path\">GetDecoder</a> method or the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetEncoder_\" data-linktype=\"relative-path\">GetEncoder</a> method, respectively.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetChars_System_Byte___System_Int32_System_Int32_System_Char___System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetChars_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetChars(Byte[],Int32,Int32,Char[],Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Decodes a sequence of bytes from the specified byte array into the specified character array.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetChars (byte[] bytes, int byteIndex, int byteCount, char[] chars, int charIndex);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>bytes</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The byte array containing the sequence of bytes to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>byteIndex</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The index of the first byte to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>byteCount</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of bytes to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>chars</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.char\" data-linktype=\"relative-path\">Char</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The character array to contain the resulting set of characters.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>charIndex</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The index at which to start writing the resulting set of characters.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The actual number of characters written into <code>chars</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>bytes</code> is <code>null</code>.  </p>\n<p> -or-  </p>\n<p> <code>chars</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>byteIndex</code> or <code>byteCount</code> or <code>charIndex</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> <code>byteindex</code> and <code>byteCount</code> do not denote a valid range in <code>bytes</code>.  </p>\n<p> -or-  </p>\n<p> <code>charIndex</code> is not a valid index in <code>chars</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>bytes</code> contains an invalid sequence of bytes.  </p>\n<p> -or-  </p>\n<p> <code>chars</code> does not have enough capacity from <code>charIndex</code> to the end of the array to accommodate the resulting characters.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.decoderfallbackexception\" data-linktype=\"relative-path\">DecoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.DecoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.decoderexceptionfallback\" data-linktype=\"relative-path\">DecoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by GetChars to store the resulting characters, call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> method. To calculate the maximum array size, call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxCharCount_\" data-linktype=\"relative-path\">GetMaxCharCount</a> method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> method generally allocates less memory, while the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxCharCount_\" data-linktype=\"relative-path\">GetMaxCharCount</a> method generally executes faster.  </p>\n<p> With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.  </p>\n<p> If the range of bytes to be decoded includes the byte order mark (BOM) and the byte array was returned by a method of a non-BOM aware type, the character U+FFFE is included in the character array returned by this method. You can remove it by calling the <a class=\"xref\" href=\"system.string#System_String_TrimStart_\" data-linktype=\"relative-path\">TrimStart</a> method.  </p>\n<p> Data to be converted, such as data read from a stream, might be available only in sequential blocks. In this case, or if the amount of data is so large that it needs to be divided into smaller blocks, use the <a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a> or the <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> provided by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetDecoder_\" data-linktype=\"relative-path\">GetDecoder</a> method or the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetEncoder_\" data-linktype=\"relative-path\">GetEncoder</a> method, respectively.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the GetChars method to decode a range of elements in a byte array and store the result in a character array.  </p>\n<pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.GetChars Example#1\">using namespace System;\nusing namespace System::Text;\nusing namespace System::Collections;\nint main()\n{\n   array&lt;Char&gt;^chars;\n   array&lt;Byte&gt;^bytes = {85,84,70,56,32,69,110,99,111,100,105,110,103,32,69,120,97,109,112,108,101};\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   int charCount = utf8-&gt;GetCharCount( bytes, 2, 13 );\n   chars = gcnew array&lt;Char&gt;(charCount);\n   int charsDecodedCount = utf8-&gt;GetChars( bytes, 2, 13, chars, 0 );\n   Console::WriteLine( &quot;{0} characters used to decode bytes.&quot;, charsDecodedCount );\n   Console::Write( &quot;Decoded chars: &quot; );\n   IEnumerator^ myEnum = chars-&gt;GetEnumerator();\n   while ( myEnum-&gt;MoveNext() )\n   {\n      Char c = safe_cast&lt;Char&gt;(myEnum-&gt;Current);\n      Console::Write( &quot;[{0}]&quot;, c.ToString() );\n   }\n\n   Console::WriteLine();\n}\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetChars Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        Char[] chars;\n        Byte[] bytes = new Byte[] {\n             85,  84,  70,  56,  32,  69, 110,\n             99, 111, 100, 105, 110, 103,  32,\n             69, 120,  97, 109, 112, 108, 101\n        };\n\n        UTF8Encoding utf8 = new UTF8Encoding();\n\n        int charCount = utf8.GetCharCount(bytes, 2, 13);\n        chars = new Char[charCount];\n        int charsDecodedCount = utf8.GetChars(bytes, 2, 13, chars, 0);\n\n        Console.WriteLine(\n            &quot;{0} characters used to decode bytes.&quot;, charsDecodedCount\n        );\n\n        Console.Write(&quot;Decoded chars: &quot;);\n        foreach (Char c in chars) {\n            Console.Write(&quot;[{0}]&quot;, c);\n        }\n        Console.WriteLine();\n    }\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetChars Example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim chars() As Char\n        Dim bytes() As Byte = { _\n            85,  84,  70,  56,  32,  69, 110, _\n            99, 111, 100, 105, 110, 103,  32, _\n            69, 120,  97, 109, 112, 108, 101 _\n        }\n        \n        Dim utf8 As New UTF8Encoding()\n        \n        Dim charCount As Integer = utf8.GetCharCount(bytes, 2, 13)\n        chars = New Char(charCount - 1) {}\n        Dim charsDecodedCount As Integer = utf8.GetChars(bytes, 2, 13, chars, 0)\n        \n        Console.WriteLine(&quot;{0} characters used to decode bytes.&quot;, charsDecodedCount)\n        \n        Console.Write(&quot;Decoded chars: &quot;)\n        Dim c As Char\n        For Each c In  chars\n            Console.Write(&quot;[{0}]&quot;, c)\n        Next c\n        Console.WriteLine()\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetDecoder\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetDecoder_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetDecoder()</div>        \r\n          </div>\r\n    \r\n            <p>Obtains a decoder that converts a UTF-8 encoded sequence of bytes into a sequence of Unicode characters.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override System.Text.Decoder GetDecoder ();</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a></div>\r\n                  </div>\r\n                  <p>A decoder that converts a UTF-8 encoded sequence of bytes into a sequence of Unicode characters.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The <a class=\"xref\" href=\"system.text.decoder#System_Text_Decoder_GetChars_\" data-linktype=\"relative-path\">GetChars</a> method converts sequential blocks of bytes into sequential blocks of characters, in a manner similar to the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetChars_\" data-linktype=\"relative-path\">GetChars</a> method of this class. However, a <a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a> maintains state information between calls so it can correctly decode byte sequences that span blocks. The <a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a> also preserves trailing bytes at the end of data blocks and uses the trailing bytes in the next decoding operation. Therefore, GetDecoder and <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetEncoder_\" data-linktype=\"relative-path\">GetEncoder</a> are useful for network transmission and file operations, because those operations often deal with blocks of data instead of a complete data stream.  </p>\n<p> If error detection is enabled, that is, the <code>throwOnInvalidCharacters</code> parameter of the constructor is set to <code>true</code>, error detection is also enabled in the <a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a> returned by this method. If error detection is enabled and an invalid sequence is encountered, the state of the decoder is undefined and processing must stop.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the GetDecoder method to obtain a UTF-8 decoder. The decoder converts a sequence of bytes into a sequence of characters.  </p>\n<pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.GetDecoder Example#1\">using namespace System;\nusing namespace System::Text;\nusing namespace System::Collections;\nint main()\n{\n   array&lt;Char&gt;^chars;\n   array&lt;Byte&gt;^bytes = {99,204,128,234,130,160};\n   Decoder^ utf8Decoder = Encoding::UTF8-&gt;GetDecoder();\n   int charCount = utf8Decoder-&gt;GetCharCount( bytes, 0, bytes-&gt;Length );\n   chars = gcnew array&lt;Char&gt;(charCount);\n   int charsDecodedCount = utf8Decoder-&gt;GetChars( bytes, 0, bytes-&gt;Length, chars, 0 );\n   Console::WriteLine( &quot;{0} characters used to decode bytes.&quot;, charsDecodedCount );\n   Console::Write( &quot;Decoded chars: &quot; );\n   IEnumerator^ myEnum = chars-&gt;GetEnumerator();\n   while ( myEnum-&gt;MoveNext() )\n   {\n      Char c = safe_cast&lt;Char&gt;(myEnum-&gt;Current);\n      Console::Write( &quot;[{0}]&quot;, c.ToString() );\n   }\n\n   Console::WriteLine();\n}\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetDecoder Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        Char[] chars;\n        Byte[] bytes = new Byte[] {\n            99, 204, 128, 234, 130, 160\n        };\n\n        Decoder utf8Decoder = Encoding.UTF8.GetDecoder();\n\n        int charCount = utf8Decoder.GetCharCount(bytes, 0, bytes.Length);\n        chars = new Char[charCount];\n        int charsDecodedCount = utf8Decoder.GetChars(bytes, 0, bytes.Length, chars, 0);\n\n        Console.WriteLine(\n            &quot;{0} characters used to decode bytes.&quot;, charsDecodedCount\n        );\n\n        Console.Write(&quot;Decoded chars: &quot;);\n        foreach (Char c in chars) {\n            Console.Write(&quot;[{0}]&quot;, c);\n        }\n        Console.WriteLine();\n    }\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetDecoder Example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim chars() As Char\n        Dim bytes() As Byte = {99, 204, 128, 234, 130, 160}\n        \n        Dim utf8Decoder As Decoder = Encoding.UTF8.GetDecoder()\n        \n        Dim charCount As Integer = utf8Decoder.GetCharCount(bytes, 0, bytes.Length)\n        chars = New Char(charCount - 1) {}\n        Dim charsDecodedCount As Integer = utf8Decoder.GetChars( _\n            bytes, 0, bytes.Length, chars, 0 _\n        )\n        \n        Console.WriteLine(&quot;{0} characters used to decode bytes.&quot;, charsDecodedCount)\n        \n        Console.Write(&quot;Decoded chars: &quot;)\n        Dim c As Char\n        For Each c In  chars\n            Console.Write(&quot;[{0}]&quot;, c)\n        Next c\n        Console.WriteLine()\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetEncoder\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetEncoder_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetEncoder()</div>        \r\n          </div>\r\n    \r\n            <p>Obtains an encoder that converts a sequence of Unicode characters into a UTF-8 encoded sequence of bytes.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override System.Text.Encoder GetEncoder ();</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a></div>\r\n                  </div>\r\n                  <p>A <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> that converts a sequence of Unicode characters into a UTF-8 encoded sequence of bytes.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The <a class=\"xref\" href=\"system.text.encoder#System_Text_Encoder_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method converts sequential blocks of characters into sequential blocks of bytes, in a manner similar to the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method. However, a <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> maintains state information between calls so it can correctly encode character sequences that span blocks. The <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> also preserves trailing characters at the end of data blocks and uses the trailing characters in the next encoding operation. For example, a data block might end with an unmatched high surrogate, and the matching low surrogate might be in the next data block. Therefore, <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetDecoder_\" data-linktype=\"relative-path\">GetDecoder</a> and GetEncoder are useful for network transmission and file operations, because those operations often deal with blocks of data instead of a complete data stream.  </p>\n<p> If error detection is enabled, that is, the <code>throwOnInvalidCharacters</code> parameter of the constructor is set to <code>true</code>, error detection is also enabled in the <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> returned by this method. If error detection is enabled and an invalid sequence is encountered, the state of the encoder is undefined and processing must stop.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the GetEncoder method to obtain an encoder to convert a sequence of characters into a UTF-8 encoded sequence of bytes.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetEncoder Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        Char[] chars = new Char[] {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;\\u0300&#39;, &#39;\\ua0a0&#39;};\n        Byte[] bytes;\n\n        Encoder utf8Encoder = Encoding.UTF8.GetEncoder();\n\n        int byteCount = utf8Encoder.GetByteCount(chars, 2, 3, true);\n        bytes = new Byte[byteCount];\n        int bytesEncodedCount = utf8Encoder.GetBytes(chars, 2, 3, bytes, 0, true);\n\n        Console.WriteLine(\n            &quot;{0} bytes used to encode characters.&quot;, bytesEncodedCount\n        );\n\n        Console.Write(&quot;Encoded bytes: &quot;);\n        foreach (Byte b in bytes) {\n            Console.Write(&quot;[{0}]&quot;, b);\n        }\n        Console.WriteLine();\n    }\n}\n</code></pre><pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.GetEncoder Example#1\">using namespace System;\nusing namespace System::Text;\nusing namespace System::Collections;\nint main()\n{\n   array&lt;Char&gt;^chars = {&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,L&#39;\\u0300&#39;,L&#39;\\ua0a0&#39;};\n   array&lt;Byte&gt;^bytes;\n   Encoder^ utf8Encoder = Encoding::UTF8-&gt;GetEncoder();\n   int byteCount = utf8Encoder-&gt;GetByteCount( chars, 2, 3, true );\n   bytes = gcnew array&lt;Byte&gt;(byteCount);\n   int bytesEncodedCount = utf8Encoder-&gt;GetBytes( chars, 2, 3, bytes, 0, true );\n   Console::WriteLine( &quot;{0} bytes used to encode characters.&quot;, bytesEncodedCount );\n   Console::Write( &quot;Encoded bytes: &quot; );\n   IEnumerator^ myEnum = bytes-&gt;GetEnumerator();\n   while ( myEnum-&gt;MoveNext() )\n   {\n      Byte b = safe_cast&lt;Byte&gt;(myEnum-&gt;Current);\n      Console::Write( &quot;[{0}]&quot;, b );\n   }\n\n   Console::WriteLine();\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetEncoder Example#1\">Imports System\nImports System.Text\nImports Microsoft.VisualBasic.Strings\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        &#39;Characters:\n        &#39; ChrW(97) = a\n        &#39; ChrW(98) = b\n        &#39; ChrW(99) = c\n        &#39; ChrW(768) = `\n        &#39; ChrW(41120) = valid unicode code point, but not a character\n        Dim chars() As Char = {ChrW(97), ChrW(98), ChrW(99), ChrW(768), ChrW(41120)}\n        Dim bytes() As Byte\n        \n        Dim utf8Encoder As Encoder = Encoding.UTF8.GetEncoder()\n        \n        Dim byteCount As Integer = utf8Encoder.GetByteCount(chars, 2, 3, True)\n        bytes = New Byte(byteCount - 1) {}\n        Dim bytesEncodedCount As Integer = utf8Encoder.GetBytes( _\n            chars, 2, 3, bytes, 0, True _\n        )\n        \n        Console.WriteLine(&quot;{0} bytes used to encode characters.&quot;, bytesEncodedCount)\n        \n        Console.Write(&quot;Encoded bytes: &quot;)\n        Dim b As Byte\n        For Each b In  bytes\n            Console.Write(&quot;[{0}]&quot;, b)\n        Next b\n        Console.WriteLine()\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetHashCode\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetHashCode_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetHashCode()</div>        \r\n          </div>\r\n    \r\n            <p>Returns the hash code for the current instance.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetHashCode ();</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The hash code for the current instance.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the GetHashCode method to return a hash code for <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> instances. Notice that the hash code returned by this method depends on the constructor used to create the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> object.  </p>\n<pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.GetHashCode Example#1\">using namespace System;\nusing namespace System::Text;\nint main()\n{\n   \n   // Many ways to instantiate a UTF8 encoding.\n   UTF8Encoding^ UTF8a = gcnew UTF8Encoding;\n   Encoding^ UTF8b = Encoding::UTF8;\n   Encoding^ UTF8c = gcnew UTF8Encoding( true,true );\n   Encoding^ UTF8d = gcnew UTF8Encoding( false,false );\n   \n   // But not all are the same.\n   Console::WriteLine( UTF8a-&gt;GetHashCode() );\n   Console::WriteLine( UTF8b-&gt;GetHashCode() );\n   Console::WriteLine( UTF8c-&gt;GetHashCode() );\n   Console::WriteLine( UTF8d-&gt;GetHashCode() );\n}\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetHashCode Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        // Many ways to instantiate a UTF8 encoding.\n        UTF8Encoding UTF8a = new UTF8Encoding();\n        Encoding UTF8b = Encoding.UTF8;\n        Encoding UTF8c = new UTF8Encoding(true, true);\n        Encoding UTF8d = new UTF8Encoding(false, false);\n\n        // But not all are the same.\n        Console.WriteLine(UTF8a.GetHashCode());\n        Console.WriteLine(UTF8b.GetHashCode());\n        Console.WriteLine(UTF8c.GetHashCode());\n        Console.WriteLine(UTF8d.GetHashCode());\n    }\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetHashCode Example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        &#39; Many ways to instantiate a UTF8 encoding.\n        Dim UTF8a As New UTF8Encoding()\n        Dim UTF8b As Encoding = Encoding.UTF8\n        Dim UTF8c = New UTF8Encoding(True, True)\n        Dim UTF8d = New UTF8Encoding(False, False)\n        \n        &#39; But not all are the same.\n        Console.WriteLine(UTF8a.GetHashCode())\n        Console.WriteLine(UTF8b.GetHashCode())\n        Console.WriteLine(UTF8c.GetHashCode())\n        Console.WriteLine(UTF8d.GetHashCode())\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetMaxByteCount_System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetMaxByteCount_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetMaxByteCount(Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Calculates the maximum number of bytes produced by encoding the specified number of characters.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetMaxByteCount (int charCount);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>charCount</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of characters to encode.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The maximum number of bytes produced by encoding the specified number of characters.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>charCount</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> The resulting number of bytes is greater than the maximum number that can be returned as an integer.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.encoderfallbackexception\" data-linktype=\"relative-path\">EncoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.EncoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.encoderexceptionfallback\" data-linktype=\"relative-path\">EncoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> to store the resulting bytes, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method. To calculate the maximum array size, you call the GetMaxByteCount method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method generally allocates less memory, while the GetMaxByteCount method generally executes faster.  </p>\n<p> GetMaxByteCount is a worst-case number, including the worst case for the currently selected <a class=\"xref\" href=\"system.text.encoderfallback\" data-linktype=\"relative-path\">EncoderFallback</a>. If a fallback is chosen with a potentially large string, GetMaxByteCount can return large values.  </p>\n<p> In most cases, this method returns reasonable numbers for small strings. For large strings, you might have to choose between using very large buffers and catching errors in the rare case that a more reasonable buffer is exceeded. You might also want to consider a different approach using <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> or <a class=\"xref\" href=\"system.text.encoder#System_Text_Encoder_Convert_\" data-linktype=\"relative-path\">Convert</a>. For example, text in English and many other languages often needs only one UTF-8 byte to represent a character, but the number returned by GetMaxByteCount has to allow for the possibility that the string to be converted will consist entirely of characters that each require four bytes.  </p>\n<p> GetMaxByteCount has no relation to <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetChars_\" data-linktype=\"relative-path\">GetChars</a>. If your application needs a similar function to use with <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetChars_\" data-linktype=\"relative-path\">GetChars</a>, it should use <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxCharCount_\" data-linktype=\"relative-path\">GetMaxCharCount</a>.  </p>\n<div class=\"NOTE\"><h5>Note</h5><p> <code>GetMaxByteCount(N)</code> is not necessarily the same value as <code>N* GetMaxByteCount(1)</code>.</p>\n</div>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the GetMaxByteCount method to return the maximum number of bytes required to encode a specified number of characters.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Text.utf8encoding.getmaxbytecount example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        UTF8Encoding utf8 = new UTF8Encoding();\n        int charCount = 2;\n        int maxByteCount = utf8.GetMaxByteCount(charCount);\n        Console.WriteLine(\n            &quot;Maximum of {0} bytes needed to encode {1} characters.&quot;,\n            maxByteCount,\n            charCount\n        );\n    }\n}\n</code></pre><pre><code class=\"lang-cpp\" name=\"System.Text.utf8encoding.getmaxbytecount example#1\">using namespace System;\nusing namespace System::Text;\nint main()\n{\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   int charCount = 2;\n   int maxByteCount = utf8-&gt;GetMaxByteCount( charCount );\n   Console::WriteLine( &quot;Maximum of {0} bytes needed to encode {1} characters.&quot;, maxByteCount, charCount );\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.utf8encoding.getmaxbytecount example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim utf8 As New UTF8Encoding()\n        Dim charCount As Integer = 2\n        Dim maxByteCount As Integer = utf8.GetMaxByteCount(charCount)\n        Console.WriteLine( _\n            &quot;Maximum of {0} bytes needed to encode {1} characters.&quot;, _\n            maxByteCount, _\n            charCount _\n        )\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetMaxCharCount_System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetMaxCharCount_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetMaxCharCount(Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Calculates the maximum number of characters produced by decoding the specified number of bytes.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetMaxCharCount (int byteCount);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>byteCount</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of bytes to decode.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The maximum number of characters produced by decoding the specified number of bytes.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>byteCount</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> The resulting number of bytes is greater than the maximum number that can be returned as an integer.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.decoderfallbackexception\" data-linktype=\"relative-path\">DecoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.DecoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.decoderexceptionfallback\" data-linktype=\"relative-path\">DecoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>To calculate the exact array size required by <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetChars_\" data-linktype=\"relative-path\">GetChars</a> to store the resulting characters, you call the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> method. To calculate the maximum array size, you call the GetMaxCharCount method. The <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> method generally allocates less memory, while the GetMaxCharCount method generally executes faster.  </p>\n<p> GetMaxCharCount is a worst-case number, including the worst case for the currently selected <a class=\"xref\" href=\"system.text.decoderfallback\" data-linktype=\"relative-path\">DecoderFallback</a>. If a fallback is chosen with a potentially large string, GetMaxCharCount can return large values.  </p>\n<p> In most cases, this method returns reasonable numbers for small strings. For large strings, you might have to choose between using very large buffers and catching errors in the rare case that a more reasonable buffer is exceeded.  You might also want to consider a different approach using <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetCharCount_\" data-linktype=\"relative-path\">GetCharCount</a> or <a class=\"xref\" href=\"system.text.encoder#System_Text_Encoder_Convert_\" data-linktype=\"relative-path\">Convert</a>.  </p>\n<p> GetMaxCharCount has no relation to <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a>. If your application needs a similar function to use with <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a>, it should use <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetMaxByteCount_\" data-linktype=\"relative-path\">GetMaxByteCount</a>.  </p>\n<div class=\"NOTE\"><h5>Note</h5><p> <code>GetMaxCharCount(N)</code> is not necessarily the same value as <code>N* GetMaxCharCount(1)</code>.</p>\n</div>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the GetMaxCharCount method to return the maximum number of characters produced by decoding a specified number of bytes.  </p>\n<pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetMaxCharCount Example#1\">Imports System\nImports System.Text\n\nClass UTF8EncodingExample\n    \n    Public Shared Sub Main()\n        Dim utf8 As New UTF8Encoding()\n        Dim byteCount As Integer = 8\n        Dim maxCharCount As Integer = utf8.GetMaxCharCount(byteCount)\n        Console.WriteLine( _\n            &quot;Maximum of {0} characters needed to decode {1} bytes.&quot;, _\n            maxCharCount, _\n            byteCount _\n        )\n    End Sub &#39;Main\nEnd Class &#39;UTF8EncodingExample\n</code></pre><pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.GetMaxCharCount Example#1\">using namespace System;\nusing namespace System::Text;\nint main()\n{\n   UTF8Encoding^ utf8 = gcnew UTF8Encoding;\n   int byteCount = 8;\n   int maxCharCount = utf8-&gt;GetMaxCharCount( byteCount );\n   Console::WriteLine( &quot;Maximum of {0} characters needed to decode {1} bytes.&quot;, maxCharCount, byteCount );\n}\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetMaxCharCount Example#1\">using System;\nusing System.Text;\n\nclass UTF8EncodingExample {\n    public static void Main() {\n        UTF8Encoding utf8 = new UTF8Encoding();\n        int byteCount = 8;\n        int maxCharCount = utf8.GetMaxCharCount(byteCount);\n        Console.WriteLine(\n            &quot;Maximum of {0} characters needed to decode {1} bytes.&quot;,\n            maxCharCount,\n            byteCount\n        );\n    }\n}\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetPreamble\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetPreamble_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetPreamble()</div>        \r\n          </div>\r\n    \r\n            <p>Returns a Unicode byte order mark encoded in UTF-8 format, if the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> encoding object is configured to supply one.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override byte[] GetPreamble ();</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </div>\r\n                  <p>A byte array containing the Unicode byte order mark, if the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> encoding object is configured to supply one. Otherwise, this method returns a zero-length byte array.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> object can provide a preamble, which is a byte array that can be prefixed to the sequence of bytes that result from the encoding process. Prefacing a sequence of encoded bytes with a byte order mark (code point U+FEFF) helps the decoder determine the byte order and the transformation format, or UTF. The Unicode byte order mark (BOM) is serialized as 0xEF 0xBB 0xBF. Note that the Unicode Standard neither requires nor recommends the use of a BOM for UTF-8 encoded streams.  </p>\n<p> You can instantiate a <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> object whose GetPreamble method returns a valid BOM in the following ways:  </p>\n<ul>\n<li><p>By retrieving the <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> object returned by the <a class=\"xref\" href=\"system.text.encoding#System_Text_Encoding_UTF8_\" data-linktype=\"relative-path\">UTF8</a> property.  </p>\n</li>\n<li><p>By calling a <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> constructor with a <code>encoderShouldEmitUTF8Identifier</code> parameter and setting its value set to <code>true</code>.  </p>\n<p>All other <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> objects are configured to return an empty array rather than a valid BOM.  </p>\n<p>The BOM provide nearly certain identification of an encoding for files that otherwise have lost a reference to their encoding, such as untagged or improperly tagged web data or random text files stored when a business did not have international concerns. Often user problems might be avoided if data is consistently and properly tagged.  </p>\n<p>For standards that provide an encoding type, a BOM is somewhat redundant. However, it can be used to help a server send the correct encoding header. Alternatively, it can be used as a fallback in case the encoding is otherwise lost.  </p>\n<p>There are some disadvantages to using a BOM. For example, knowing how to limit the database fields that use a BOM can be difficult. Concatenation of files can be a problem also, for example, when files are merged in such a way that an unnecessary character can end up in the middle of data. In spite of the few disadvantages, however, the use of a BOM is highly recommended.  </p>\n<p>For more information on byte order and the byte order mark, see The Unicode Standard at the <a href=\"http://go.microsoft.com/fwlink/?LinkId=37123\" data-linktype=\"external\">Unicode home page</a>.  </p>\n</li>\n</ul>\n<div class=\"CAUTION\"><h5>Caution</h5><p> To ensure that the encoded bytes are decoded properly when they are saved as a file or as a stream, you can prefix the beginning of a stream of encoded bytes with a preamble. Note that the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method does not prepend a BOM to a sequence of encoded bytes; supplying a BOM at the beginning of an appropriate byte stream is the developer&#39;s responsibility.</p>\n</div>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example uses the GetPreamble method to return the Unicode byte order mark encoded in UTF-8 format. Notice that the default constructor for <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> does not provide a preamble.  </p>\n<pre><code class=\"lang-cpp\" name=\"System.Text.UTF8Encoding.GetPreamble Example#1\">using namespace System;\nusing namespace System::Text;\nusing namespace System::Collections;\n\nvoid ShowArray(array&lt;Byte&gt;^ bytes)\n{\n   for each (Byte b in bytes)\n      Console::Write( &quot;{0:X2} &quot;, b);\n\n   Console::WriteLine();\n}\n\nint main()\n{\n   // The default constructor does not provide a preamble.\n   UTF8Encoding^ UTF8NoPreamble = gcnew UTF8Encoding;\n   UTF8Encoding^ UTF8WithPreamble = gcnew UTF8Encoding( true );\n   array&lt;Byte&gt;^preamble;\n   preamble = UTF8NoPreamble-&gt;GetPreamble();\n   Console::WriteLine( &quot;UTF8NoPreamble&quot; );\n   Console::WriteLine( &quot; preamble length: {0}&quot;, preamble-&gt;Length );\n   Console::Write( &quot; preamble: &quot; );\n   ShowArray( preamble );\n   Console::WriteLine();\n   \n   preamble = UTF8WithPreamble-&gt;GetPreamble();\n   Console::WriteLine( &quot;UTF8WithPreamble&quot; );\n   Console::WriteLine( &quot; preamble length: {0}&quot;, preamble-&gt;Length );\n   Console::Write( &quot; preamble: &quot; );\n   ShowArray( preamble );\n}\n// The example displays the following output:\n//       UTF8NoPreamble\n//        preamble length: 0\n//        preamble:\n//\n//       UTF8WithPreamble\n//        preamble length: 3\n//        preamble: EF BB BF\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetPreamble Example#1\">using System;\nusing System.Text;\n\nclass Example\n{\n    public static void Main()\n    {\n        // The default constructor does not provide a preamble.\n        UTF8Encoding UTF8NoPreamble = new UTF8Encoding();\n        UTF8Encoding UTF8WithPreamble = new UTF8Encoding(true);\n\n        Byte[] preamble;\n\n        preamble = UTF8NoPreamble.GetPreamble();\n        Console.WriteLine(&quot;UTF8NoPreamble&quot;);\n        Console.WriteLine(&quot; preamble length: {0}&quot;, preamble.Length);\n        Console.Write(&quot; preamble: &quot;);\n        ShowArray(preamble);\n        Console.WriteLine();\n        \n        preamble = UTF8WithPreamble.GetPreamble();\n        Console.WriteLine(&quot;UTF8WithPreamble&quot;);\n        Console.WriteLine(&quot; preamble length: {0}&quot;, preamble.Length);\n        Console.Write(&quot; preamble: &quot;);\n        ShowArray(preamble);\n    }\n\n    public static void ShowArray(Byte[] bytes)\n    {\n        foreach (var b in bytes)\n            Console.Write(&quot;{0:X2} &quot;, b);\n\n        Console.WriteLine();\n    }\n}\n// The example displays the following output:\n//    UTF8NoPreamble\n//     preamble length: 0\n//     preamble:\n//\n//    UTF8WithPreamble\n//     preamble length: 3\n//     preamble: EF BB BF\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetPreamble Example#1\">Imports System.Text\n\nModule Example\n    Public Sub Main()\n        &#39; The default constructor does not provide a preamble.\n        Dim UTF8NoPreamble As New UTF8Encoding()\n        Dim UTF8WithPreamble As New UTF8Encoding(True)\n        \n        Dim preamble() As Byte\n        \n        preamble = UTF8NoPreamble.GetPreamble()\n        Console.WriteLine(&quot;UTF8NoPreamble&quot;)\n        Console.WriteLine(&quot; preamble length: {0}&quot;, preamble.Length)\n        Console.Write(&quot; preamble: &quot;)\n        ShowArray(preamble)\n        Console.WriteLine()\n        \n        preamble = UTF8WithPreamble.GetPreamble()\n        Console.WriteLine(&quot;UTF8WithPreamble&quot;)\n        Console.WriteLine(&quot; preamble length: {0}&quot;, preamble.Length)\n        Console.Write(&quot; preamble: &quot;)\n        ShowArray(preamble)\n    End Sub\n\n    Public Sub ShowArray(bytes As Byte())\n        For Each b In  bytes\n            Console.Write(&quot;{0:X2} &quot;, b)\n        Next\n        Console.WriteLine()\n    End Sub\nEnd Module\n&#39; The example displays the following output:\n&#39;    UTF8NoPreamble\n&#39;     preamble length: 0\n&#39;     preamble:\n&#39;\n&#39;    UTF8WithPreamble\n&#39;     preamble length: 3\n&#39;     preamble: EF BB BF\n</code></pre><p> The following example instantiates two <a class=\"xref\" href=\"system.text.utf8encoding\" data-linktype=\"relative-path\">UTF8Encoding</a> objects, the first by calling the parameterless <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding__ctor\" data-linktype=\"relative-path\">UTF8Encoding()</a> constructor, which does not provide a BOM, and the second by calling the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding__ctor_System_Boolean_\" data-linktype=\"relative-path\">UTF8Encoding(Boolean)</a> constructor with its <code>encoderShouldEmitUTF8Identifier</code> argument set to <code>true</code>. It then calls the GetPreamble method to write the BOM to a file before writing a UF8-encoded string. As the console output from the example shows, the file that saves the bytes from the second encoder has three more bytes than the first.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetPreamble#1\">using System;\nusing System.IO;\nusing System.Text;\n\npublic class Example\n{\n   public static void Main()\n   {\n      String s = &quot;This is a string to write to a file using UTF-8 encoding.&quot;;\n\n      // Write a file using the default constructor without a BOM.\n      var enc = new UTF8Encoding();\n      Byte[] bytes = enc.GetBytes(s);\n      WriteToFile(@&quot;.<br>oPreamble.txt&quot;, enc, bytes);\n\n      // Use BOM.\n      enc = new UTF8Encoding(true);\n      WriteToFile(@&quot;.\\Preamble.txt&quot;, enc, bytes);\n   }\n\n   private static void WriteToFile(String fn, Encoding enc, Byte[] bytes)\n   {\n      var fs = new FileStream(fn, FileMode.Create);\n      Byte[] preamble = enc.GetPreamble();\n      fs.Write(preamble, 0, preamble.Length);\n      Console.WriteLine(&quot;Preamble has {0} bytes&quot;, preamble.Length);\n      fs.Write(bytes, 0, bytes.Length);\n      Console.WriteLine(&quot;Wrote {0} bytes to {1}.&quot;, fs.Length, fn);\n      fs.Close();\n      Console.WriteLine();\n   }\n}\n// The example displays the following output:\n//       Preamble has 0 bytes\n//       Wrote 57 bytes to NoPreamble.txt.\n//\n//       Preamble has 3 bytes\n//       Wrote 60 bytes to Preamble.txt.\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetPreamble#1\">Imports System.IO\nImports System.Text\n\nModule Example\n   Public Sub Main()\n      Dim s As String = &quot;This is a string to write to a file using UTF-8 encoding.&quot;\n      \n      &#39; Write a file using the default constructor without a BOM.\n      Dim enc As New UTF8Encoding()\n      Dim bytes() As Byte = enc.GetBytes(s)\n      WriteToFile(&quot;NoPreamble.txt&quot;, enc, bytes)\n\n      &#39; Use BOM.\n      enc = New UTF8Encoding(True)\n      WriteToFile(&quot;Preamble.txt&quot;, enc, bytes)\n   End Sub\n\n   Private Sub WriteToFile(fn As String, enc As Encoding, bytes As Byte())\n      Dim fs As New FileStream(fn, FileMode.Create)\n      Dim preamble() As Byte = enc.GetPreamble()\n      fs.Write(preamble, 0, preamble.Length)\n      Console.WriteLine(&quot;Preamble has {0} bytes&quot;, preamble.Length)\n      fs.Write(bytes, 0, bytes.Length)\n      Console.WriteLine(&quot;Wrote {0} bytes to {1}.&quot;, fs.Length, fn)\n      fs.Close()\n      Console.WriteLine()\n   End Sub\nEnd Module\n&#39; The example displays the following output:\n&#39;       Preamble has 0 bytes\n&#39;       Wrote 57 bytes to NoPreamble.txt.\n&#39;\n&#39;       Preamble has 3 bytes\n&#39;       Wrote 60 bytes to Preamble.txt.\n</code></pre><p> You can also compare the files by using the <code>fc</code> command in a console window, or you can inspect the files in a text editor that includes a Hex View mode. Note that when the file is opened in an editor that supports UTF-8, the BOM is not displayed.</p>\n\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Text_UTF8Encoding_GetString_System_Byte___System_Int32_System_Int32_\">\r\n    \r\n            <a id=\"System_Text_UTF8Encoding_GetString_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetString(Byte[],Int32,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Decodes a range of bytes from a byte array into a string.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override string GetString (byte[] bytes, int index, int count);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>bytes</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The byte array containing the sequence of bytes to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>index</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The index of the first byte to decode.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>count</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of bytes to decode.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </div>\r\n                  <p>A <a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a> containing the results of decoding the specified sequence of bytes.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>bytes</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>index</code> or <code>count</code> is less than zero.  </p>\n<p> -or-  </p>\n<p> <code>index</code> and <code>count</code> do not denote a valid range in <code>bytes</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>Error detection is enabled, and <code>bytes</code> contains an invalid sequence of bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.text.decoderfallbackexception\" data-linktype=\"relative-path\">DecoderFallbackException</a></div>\r\n                  </div>\r\n                  <p>A fallback occurred (see <a href=\"../Topic/Character%20Encoding%20in%20the%20.NET%20Framework.md\" data-linktype=\"relative-path\">Character Encoding in the .NET Framework</a> for complete explanation)  </p>\n<p> -and-  </p>\n<p> <span class=\"xref\">stem.Text.Encoding.DecoderFallback*</span> is set to <a class=\"xref\" href=\"system.text.decoderexceptionfallback\" data-linktype=\"relative-path\">DecoderExceptionFallback</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>With error detection, an invalid sequence causes this method to throw an <a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a> exception. Without error detection, invalid sequences are ignored, and no exception is thrown.  </p>\n<p> If the range of bytes to be decoded includes the byte order mark (BOM) and the byte array was returned by a method of a non-BOM aware type, the character U+FFFE is included in the character array returned by this method. You can remove it by calling the <a class=\"xref\" href=\"system.string#System_String_TrimStart_\" data-linktype=\"relative-path\">TrimStart</a> method.  </p>\n<p> Data to be converted, such as data read from a stream, might be available only in sequential blocks. In this case, or if the amount of data is so large that it needs to be divided into smaller blocks, use the <a class=\"xref\" href=\"system.text.decoder\" data-linktype=\"relative-path\">Decoder</a> or the <a class=\"xref\" href=\"system.text.encoder\" data-linktype=\"relative-path\">Encoder</a> provided by the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetDecoder_\" data-linktype=\"relative-path\">GetDecoder</a> method or the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetEncoder_\" data-linktype=\"relative-path\">GetEncoder</a> method, respectively.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example initializes an array by calling the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetByteCount_\" data-linktype=\"relative-path\">GetByteCount</a> method to determine exactly how many bytes are required for an encoded string and then adding the size of the byte order mark (BOM). The example then calls the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetPreamble_\" data-linktype=\"relative-path\">GetPreamble</a> method to store the BOM to the array before calling the <a class=\"xref\" href=\"system.text.utf8encoding#System_Text_UTF8Encoding_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method to store the encoded bytes to the array. The example then calls the GetString method to decode the string.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Text.UTF8Encoding.GetString#1\">using System;\nusing System.Text;\n\npublic class Example\n{\n   public static void Main()\n   {\n      UTF8Encoding utf8 = new UTF8Encoding(true, true);\n\n      String s = &quot;It was the best of times, it was the worst of times...&quot;;\n\n      // We need to dimension the array, since we&#39;ll populate it with 2 method calls.\n      Byte[] bytes = new Byte[utf8.GetByteCount(s) + utf8.GetPreamble().Length];\n      // Encode the string.\n      Array.Copy(utf8.GetPreamble(), bytes, utf8.GetPreamble().Length);\n      utf8.GetBytes(s, 0, s.Length, bytes, utf8.GetPreamble().Length);\n\n      // Decode the byte array.\n      String s2 = utf8.GetString(bytes, 0, bytes.Length);\n      Console.WriteLine(s2);\n   }\n}\n// The example displays the following output:\n//        ?It was the best of times, it was the worst of times...\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Text.UTF8Encoding.GetString#1\">Imports System.Text\n\nModule Example\n   Public Sub Main()\n      Dim utf8 As New UTF8Encoding(True, True)\n\n      Dim s As String = &quot;It was the best of times, it was the worst of times...&quot;\n\n      &#39; We need to dimension the array, since we&#39;ll populate it with 2 method calls.\n      Dim bytes(utf8.GetByteCount(s) + utf8.GetPreamble().Length - 1) As Byte\n      &#39; Encode the string.\n      Array.Copy(utf8.GetPreamble(), bytes, utf8.GetPreamble().Length)\n      utf8.GetBytes(s, 0, s.Length, bytes, utf8.GetPreamble().Length)\n\n      &#39; Decode the byte array.\n      Dim s2 As String = utf8.GetString(bytes, 0, bytes.Length)\n      Console.WriteLine(s2)\n   End Sub\nEnd Module\n&#39; The example displays the following output:\n&#39;       ?It was the best of times, it was the worst of times...\n</code></pre><p> Note that in this case the decoded string differs from the original string, since it begins with a 16-bit byte order mark U+FFFD. This means that the two strings will compare as unequal, and that if the string is output, the BOM will be displayed as the replacement character &quot;?&quot;. To remove the BOM at the beginning of the string, you can call the <a class=\"xref\" href=\"system.string#System_String_TrimStart_\" data-linktype=\"relative-path\">TrimStart</a> method.</p>\n\r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n","outputRootRelativePath":"./","pageMetadata":"<meta name=\"breadcrumb_path\" content=\"breadcrumb/toc.json\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"fulldocset\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.fulldocset\">\r\n<meta name=\"ref_skeleton_gitcommit\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.Text.UTF8Encoding.yml\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.Text.UTF8Encoding.yml\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding..ctor\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.Equals\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetByteCount\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetBytes\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetCharCount\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetChars\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetDecoder\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetEncoder\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetHashCode\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetMaxByteCount\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetMaxCharCount\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetPreamble\">\r\n<meta name=\"APIName\" content=\"System.Text.UTF8Encoding.GetString\">\r\n<meta name=\"APILocation\" content=\"mscorlib.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-03-01 01:37 AM\">\r\n<meta name=\"document_id\" content=\"53f1f22a-16df-a4f9-dc35-c19eacfbafac\">\r\n<meta name=\"original_ecmaxml_local_path\" content=\"W:\\o2y0\\s\\fulldocset\\xml\\System.Text\\UTF8Encoding.xml\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"Represents a UTF-8 encoding of Unicode characters.\n\">\r\n<meta name=\"toc_rel\" content=\"_splitted/System.Text/toc1.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"System.Text.UTF8Encoding\">\r\n","rawMetadata":{"breadcrumb_path":"breadcrumb/toc.json","search.ms_sitename":"Docs","search.ms_docsetname":"fulldocset","version":null,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/fulldotnet/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":true,"depot_name":"MSDN.fulldocset","_op_gitRefSkeletonCommitHistory":[{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"use plugin in master","commit_sha":"501959ac03e19ac52a27aa4c6bbeb980f8b11c8c","commit_date":"2017-03-01 09:31:20 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"fix pointer ref","commit_sha":"76befb0e7f7b41839ec719047e5b39a5981298f3","commit_date":"2017-02-28 15:47:23 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"switch from platform to version","commit_sha":"78cdacb5ca782478af490a6b30c3a2cb2b6b873e","commit_date":"2017-02-28 15:09:51 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"update platforms","commit_sha":"39ad5a8919a59afc93a79ac4bd8e07c3b471b37a","commit_date":"2017-02-28 10:38:59 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"checkin yml","commit_sha":"da161b792852497df7140d7768cee2eccd9cb43f","commit_date":"2017-02-28 09:36:15 +0800"}],"ref_skeleton_gitcommit":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.Text.UTF8Encoding.yml","original_ref_skeleton_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.Text.UTF8Encoding.yml","open_to_public_contributors":true,"api_name":["System.Text.UTF8Encoding","System.Text.UTF8Encoding..ctor","System.Text.UTF8Encoding.Equals","System.Text.UTF8Encoding.GetByteCount","System.Text.UTF8Encoding.GetBytes","System.Text.UTF8Encoding.GetCharCount","System.Text.UTF8Encoding.GetChars","System.Text.UTF8Encoding.GetDecoder","System.Text.UTF8Encoding.GetEncoder","System.Text.UTF8Encoding.GetHashCode","System.Text.UTF8Encoding.GetMaxByteCount","System.Text.UTF8Encoding.GetMaxCharCount","System.Text.UTF8Encoding.GetPreamble","System.Text.UTF8Encoding.GetString"],"api_location":["mscorlib.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["System.Text.UTF8Encoding","System::Text::UTF8Encoding","System.Text.UTF8Encoding.#ctor","System::Text::UTF8Encoding::#ctor","System.Text.UTF8Encoding.Equals","System::Text::UTF8Encoding::Equals","System.Text.UTF8Encoding.GetByteCount","System::Text::UTF8Encoding::GetByteCount","System.Text.UTF8Encoding.GetBytes","System::Text::UTF8Encoding::GetBytes","System.Text.UTF8Encoding.GetCharCount","System::Text::UTF8Encoding::GetCharCount","System.Text.UTF8Encoding.GetChars","System::Text::UTF8Encoding::GetChars","System.Text.UTF8Encoding.GetDecoder","System::Text::UTF8Encoding::GetDecoder","System.Text.UTF8Encoding.GetEncoder","System::Text::UTF8Encoding::GetEncoder","System.Text.UTF8Encoding.GetHashCode","System::Text::UTF8Encoding::GetHashCode","System.Text.UTF8Encoding.GetMaxByteCount","System::Text::UTF8Encoding::GetMaxByteCount","System.Text.UTF8Encoding.GetMaxCharCount","System::Text::UTF8Encoding::GetMaxCharCount","System.Text.UTF8Encoding.GetPreamble","System::Text::UTF8Encoding::GetPreamble","System.Text.UTF8Encoding.GetString","System::Text::UTF8Encoding::GetString"],"dev_langs":["csharp"],"updated_at":"2017-03-01 01:37 AM","document_id":"53f1f22a-16df-a4f9-dc35-c19eacfbafac","original_ecmaxml_local_path":"W:\\o2y0\\s\\fulldocset\\xml\\System.Text\\UTF8Encoding.xml","content_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/xml/System.Text/UTF8Encoding.xml","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"UTF8Encoding class | Microsoft Docs","_op_ogTitle":"UTF8Encoding class","description":"Represents a UTF-8 encoding of Unicode characters.\n","toc_asset_id":"_splitted/System.Text/toc.json","toc_rel":"_splitted/System.Text/toc.json","source_url":"","ms.assetid":"System.Text.UTF8Encoding","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.text.utf8encoding","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.text.utf8encoding","fileRelativePath":"System.Text.UTF8Encoding.html"},"themesRelativePathToOutputRoot":"_themes/"}