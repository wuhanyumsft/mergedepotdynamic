{"content":"    \r\n    <h1 id=\"System_ServiceModel_EndpointIdentity\">\r\n      <span class=\"lang-csharp\">EndpointIdentity</span>\r\n        Class\r\n    </h1>\r\n    \r\n    \r\n    <nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n      <h3>In this Article</h3>\r\n    </nav><div class=\"summary\">\r\n    \t<p>An abstract class that when implemented provides an identity that enables the authentication of an endpoint by clients that exchange messages with it.</p>\n\r\n    </div><h2>Syntax</h2>\r\n    \r\n    \t<h3>Declaration</h3>\r\n    \t<pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract class EndpointIdentity</code></pre>\r\n    \r\n    \r\n    \r\n    <h3>Inheritance Hierarchy</h3>\r\n    <ul class=\"inheritance\">\r\n        <li class=\"l0\">\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">System.Object</a>\r\n          </div>\r\n        </li>\r\n      <li class=\"l1\">\r\n        <div class=\"xref\">\r\n          <div class=\"lang-csharp\">EndpointIdentity</div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    \r\n      <div class=\"referencebox inheritedMembers\">\r\n        <h3>Inherited Members</h3>\r\n        <h4></h4>\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_System_Object_\" data-linktype=\"relative-path\">Equals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_GetType\" data-linktype=\"relative-path\">GetType()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_MemberwiseClone\" data-linktype=\"relative-path\">MemberwiseClone()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ReferenceEquals_System_Object_System_Object_\" data-linktype=\"relative-path\">ReferenceEquals(Object,Object)</a>\r\n          </div>\r\n          \r\n      </div>\r\n    \r\n    \r\n      <h2>Remarks</h2>\r\n      <p>The value of the identity for an endpoint can be set with constructors of <a class=\"xref\" href=\"system.servicemodel.endpointaddress\" data-linktype=\"relative-path\">EndpointAddress</a>, where its value can also be accessed as a read-only <a class=\"xref\" href=\"system.servicemodel.endpointaddress#System_ServiceModel_EndpointAddress_Identity_\" data-linktype=\"relative-path\">Identity</a> property.</p>\n\r\n    \r\n    \r\n    <h2>Constructors\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity__ctor\" data-linktype=\"self-bookmark\">EndpointIdentity()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates an empty <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> instance.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Properties\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_IdentityClaim\" data-linktype=\"self-bookmark\">IdentityClaim</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Gets the identity claim that corresponds to the identity.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Methods\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_CreateDnsIdentity_System_String_\" data-linktype=\"self-bookmark\">CreateDnsIdentity(String)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates a DNS identity with a specified DNS name.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_CreateIdentity_System_IdentityModel_Claims_Claim_\" data-linktype=\"self-bookmark\">CreateIdentity(Claim)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates an identity with the specified claim.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_CreateRsaIdentity_System_Security_Cryptography_X509Certificates_X509Certificate2_\" data-linktype=\"self-bookmark\">CreateRsaIdentity(X509Certificate2)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates an RSA identity with the specified X.509 certificate.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_CreateRsaIdentity_System_String_\" data-linktype=\"self-bookmark\">CreateRsaIdentity(String)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates an RSA identity with the specified public key.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_CreateSpnIdentity_System_String_\" data-linktype=\"self-bookmark\">CreateSpnIdentity(String)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates a server principal name (SPN) identity with a specified name.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_CreateUpnIdentity_System_String_\" data-linktype=\"self-bookmark\">CreateUpnIdentity(String)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates a user principal name (UPN) identity with a specified name.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_CreateX509CertificateIdentity_System_Security_Cryptography_X509Certificates_X509Certificate2_\" data-linktype=\"self-bookmark\">CreateX509CertificateIdentity(X509Certificate2)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates an X509Certificate identity with the specified certificate.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_CreateX509CertificateIdentity_System_Security_Cryptography_X509Certificates_X509Certificate2_System_Security_Cryptography_X509Certificates_X509Certificate2Collection_\" data-linktype=\"self-bookmark\">CreateX509CertificateIdentity(X509Certificate2,X509Certificate2Collection)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates an X509Certificate identity with the specified primary and supporting certificates.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_Equals_System_Object_\" data-linktype=\"self-bookmark\">Equals(Object)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Returns a value that determines whether a specified object is equal to the current identity object or if they have equal security properties.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_GetHashCode\" data-linktype=\"self-bookmark\">GetHashCode()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Provides a hash code for the current instance of the identity.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_Initialize_System_IdentityModel_Claims_Claim_\" data-linktype=\"self-bookmark\">Initialize(Claim)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes an <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> with the specified claim.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_Initialize_System_IdentityModel_Claims_Claim_System_Collections_Generic_IEqualityComparer_System_IdentityModel_Claims_Claim__\" data-linktype=\"self-bookmark\">Initialize(Claim,IEqualityComparer&lt;Claim&gt;)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes an <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> with the specified claim and an interface and compares equality.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_EndpointIdentity_ToString\" data-linktype=\"self-bookmark\">ToString()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Returns the identity.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"constructors\">\r\n        <h2>Constructors\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity__ctor\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">EndpointIdentity()</div>        \r\n          </div>\r\n    \r\n            <p>Creates an empty <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> instance.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">protected EndpointIdentity ();</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"properties\">\r\n        <h2>Properties\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_IdentityClaim\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_IdentityClaim_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">IdentityClaim</div>        \r\n          </div>\r\n    \r\n            <p>Gets the identity claim that corresponds to the identity.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public System.IdentityModel.Claims.Claim IdentityClaim { get; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.identitymodel.claims.claim\" data-linktype=\"relative-path\">Claim</a></div>\r\n                  </div>\r\n                  <p>The <a class=\"xref\" href=\"system.identitymodel.claims.claim\" data-linktype=\"relative-path\">Claim</a> that represents the identity claim.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Clients that authenticate the server should verify that the claims that represent the server contain the identity claim provided by the <code>EndpointIdentity</code>.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"methods\">\r\n        <h2>Methods\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_CreateDnsIdentity_System_String_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_CreateDnsIdentity_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateDnsIdentity(String)</div>        \r\n          </div>\r\n    \r\n            <p>Creates a DNS identity with a specified DNS name.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public static System.ServiceModel.EndpointIdentity CreateDnsIdentity (string dnsName);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>dnsName</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The name for the DNS identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a></div>\r\n                  </div>\r\n                  <p>A DNS <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> associated with the specified <code>dnsName</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>dnsName</code> is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>A secure WCF client that connects to an endpoint with this identity verifies that the claims presented by the server contain a DNS claim that represents this identity.  </p>\n<p> This static method creates an instance of <a class=\"xref\" href=\"system.servicemodel.dnsendpointidentity\" data-linktype=\"relative-path\">DnsEndpointIdentity</a> by calling its constructor <a class=\"xref\" href=\"system.servicemodel.dnsendpointidentity#System_ServiceModel_DnsEndpointIdentity__ctor_\" data-linktype=\"relative-path\">DnsEndpointIdentity</a>.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to call this method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UEEndpointIdentity#41\">        public static void CreateRSAIdentity()\n        {\n            // Create a ServiceHost for the CalculatorService type. Base Address is supplied in app.config.\n            using (ServiceHost serviceHost = new ServiceHost(typeof(CalculatorService)))\n            {\n                // The base address is read from the app.config.\n                Uri dnsrelativeAddress = new Uri(serviceHost.BaseAddresses[0], &quot;dnsidentity&quot;);\n                Uri certificaterelativeAddress = new Uri(serviceHost.BaseAddresses[0], &quot;certificateidentity&quot;);\n                Uri rsarelativeAddress = new Uri(serviceHost.BaseAddresses[0], &quot;rsaidentity&quot;);\n\n                // Set the service&#39;s X509Certificate to protect the messages.\n                serviceHost.Credentials.ServiceCertificate.SetCertificate(StoreLocation.LocalMachine,\n                                                                          StoreName.My,\n                                                                          X509FindType.FindBySubjectDistinguishedName,\n                                                                          &quot;CN=identity.com, O=Contoso&quot;);\n                //Cache a reference to the server&#39;s certificate.\n                X509Certificate2 servercert = serviceHost.Credentials.ServiceCertificate.Certificate;\n\n                //Create endpoints for the service using a WSHttpBinding set for anonymous clients.\n                WSHttpBinding wsAnonbinding = new WSHttpBinding(SecurityMode.Message);\n                //Clients are anonymous to the service.\n                wsAnonbinding.Security.Message.ClientCredentialType = MessageCredentialType.None;\n                //Secure conversation (session) is turned off.\n                wsAnonbinding.Security.Message.EstablishSecurityContext = false;\n\n                //Create a service endpoint and change its identity to the DNS for an X509 Certificate.\n                ServiceEndpoint ep = serviceHost.AddServiceEndpoint(typeof(ICalculator),\n                                                                    wsAnonbinding,\n                                                                    String.Empty);\n                EndpointAddress epa = new EndpointAddress(dnsrelativeAddress, EndpointIdentity.CreateDnsIdentity(&quot;identity.com&quot;));\n                ep.Address = epa;\n\n                //Create a service endpoint and change its identity to the X509 certificate&#39;s RSA key value.\n                ServiceEndpoint ep3 = serviceHost.AddServiceEndpoint(typeof(ICalculator), wsAnonbinding, String.Empty);\n                EndpointAddress epa3 = new EndpointAddress(rsarelativeAddress, EndpointIdentity.CreateRsaIdentity(servercert));\n                ep3.Address = epa3;\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_CreateIdentity_System_IdentityModel_Claims_Claim_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_CreateIdentity_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateIdentity(Claim)</div>        \r\n          </div>\r\n    \r\n            <p>Creates an identity with the specified claim.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public static System.ServiceModel.EndpointIdentity CreateIdentity (System.IdentityModel.Claims.Claim identity);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>identity</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.identitymodel.claims.claim\" data-linktype=\"relative-path\">Claim</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A <a class=\"xref\" href=\"system.identitymodel.claims.claim\" data-linktype=\"relative-path\">Claim</a> used to create the new identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a></div>\r\n                  </div>\r\n                  <p>An <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> associated with the specified <code>identity</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>identity</code> is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>A secure WCF client that connects to an endpoint with this identity verifies that the claims presented by the server contain the identity claim used to construct this identity.  </p>\n<p> This method can create an identity of type <a class=\"xref\" href=\"system.servicemodel.dnsendpointidentity\" data-linktype=\"relative-path\">DnsEndpointIdentity</a>, <a class=\"xref\" href=\"system.servicemodel.spnendpointidentity\" data-linktype=\"relative-path\">SpnEndpointIdentity</a>, <a class=\"xref\" href=\"system.servicemodel.upnendpointidentity\" data-linktype=\"relative-path\">UpnEndpointIdentity</a>, or <a class=\"xref\" href=\"system.servicemodel.rsaendpointidentity\" data-linktype=\"relative-path\">RsaEndpointIdentity</a>.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to call this method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UEEndpointIdentity#42\">        // Utility function to create an EndpointIdentity from a ClaimSet.\n        private EndpointIdentity CreateIdentityFromClaimSet(ClaimSet claims)\n        {\n            foreach (Claim claim in claims.FindClaims(null, Rights.Identity))\n            {\n                return EndpointIdentity.CreateIdentity(claim);\n            }\n            return null;\n        }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_CreateRsaIdentity_System_Security_Cryptography_X509Certificates_X509Certificate2_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_CreateRsaIdentity_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateRsaIdentity(X509Certificate2)</div>        \r\n          </div>\r\n    \r\n            <p>Creates an RSA identity with the specified X.509 certificate.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public static System.ServiceModel.EndpointIdentity CreateRsaIdentity (System.Security.Cryptography.X509Certificates.X509Certificate2 certificate);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>certificate</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.security.cryptography.x509certificates.x509certificate2\" data-linktype=\"relative-path\">X509Certificate2</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>An <a class=\"xref\" href=\"system.security.cryptography.x509certificates.x509certificate2\" data-linktype=\"relative-path\">X509Certificate2</a> that contains the certificate for the RSA identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a></div>\r\n                  </div>\r\n                  <p>An RSA <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> associated with the specified <code>certificate</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>certificate</code> is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.notsupportedexception\" data-linktype=\"relative-path\">NotSupportedException</a></div>\r\n                  </div>\r\n                  <p><code>certificate</code> is not an RSA certificate.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>A secure WCF client that connects to an endpoint with this identity verifies that the claims presented by the server contain a claim that contains the RSA public key obtained from the certificate used to construct this identity.  </p>\n<p> This static method creates an instance of <a class=\"xref\" href=\"system.servicemodel.rsaendpointidentity\" data-linktype=\"relative-path\">RsaEndpointIdentity</a> by calling its constructor, <a class=\"xref\" href=\"system.servicemodel.rsaendpointidentity#System_ServiceModel_RsaEndpointIdentity__ctor_\" data-linktype=\"relative-path\">RsaEndpointIdentity</a>.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to call this method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UEEndpointIdentity#41\">        public static void CreateRSAIdentity()\n        {\n            // Create a ServiceHost for the CalculatorService type. Base Address is supplied in app.config.\n            using (ServiceHost serviceHost = new ServiceHost(typeof(CalculatorService)))\n            {\n                // The base address is read from the app.config.\n                Uri dnsrelativeAddress = new Uri(serviceHost.BaseAddresses[0], &quot;dnsidentity&quot;);\n                Uri certificaterelativeAddress = new Uri(serviceHost.BaseAddresses[0], &quot;certificateidentity&quot;);\n                Uri rsarelativeAddress = new Uri(serviceHost.BaseAddresses[0], &quot;rsaidentity&quot;);\n\n                // Set the service&#39;s X509Certificate to protect the messages.\n                serviceHost.Credentials.ServiceCertificate.SetCertificate(StoreLocation.LocalMachine,\n                                                                          StoreName.My,\n                                                                          X509FindType.FindBySubjectDistinguishedName,\n                                                                          &quot;CN=identity.com, O=Contoso&quot;);\n                //Cache a reference to the server&#39;s certificate.\n                X509Certificate2 servercert = serviceHost.Credentials.ServiceCertificate.Certificate;\n\n                //Create endpoints for the service using a WSHttpBinding set for anonymous clients.\n                WSHttpBinding wsAnonbinding = new WSHttpBinding(SecurityMode.Message);\n                //Clients are anonymous to the service.\n                wsAnonbinding.Security.Message.ClientCredentialType = MessageCredentialType.None;\n                //Secure conversation (session) is turned off.\n                wsAnonbinding.Security.Message.EstablishSecurityContext = false;\n\n                //Create a service endpoint and change its identity to the DNS for an X509 Certificate.\n                ServiceEndpoint ep = serviceHost.AddServiceEndpoint(typeof(ICalculator),\n                                                                    wsAnonbinding,\n                                                                    String.Empty);\n                EndpointAddress epa = new EndpointAddress(dnsrelativeAddress, EndpointIdentity.CreateDnsIdentity(&quot;identity.com&quot;));\n                ep.Address = epa;\n\n                //Create a service endpoint and change its identity to the X509 certificate&#39;s RSA key value.\n                ServiceEndpoint ep3 = serviceHost.AddServiceEndpoint(typeof(ICalculator), wsAnonbinding, String.Empty);\n                EndpointAddress epa3 = new EndpointAddress(rsarelativeAddress, EndpointIdentity.CreateRsaIdentity(servercert));\n                ep3.Address = epa3;\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_CreateRsaIdentity_System_String_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_CreateRsaIdentity_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateRsaIdentity(String)</div>        \r\n          </div>\r\n    \r\n            <p>Creates an RSA identity with the specified public key.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public static System.ServiceModel.EndpointIdentity CreateRsaIdentity (string publicKey);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>publicKey</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The public key for the RSA identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a></div>\r\n                  </div>\r\n                  <p>An RSA <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> associated with the specified <code>publicKey</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>publicKey</code> is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>A secure WCF client that connects to an endpoint with this identity verifies that the claims presented by the server contain a claim that contains the RSA public key used to construct this identity.  </p>\n<p> This static method creates an instance of <a class=\"xref\" href=\"system.servicemodel.rsaendpointidentity\" data-linktype=\"relative-path\">RsaEndpointIdentity</a> by calling its constructor, <a class=\"xref\" href=\"system.servicemodel.rsaendpointidentity#System_ServiceModel_RsaEndpointIdentity__ctor_\" data-linktype=\"relative-path\">RsaEndpointIdentity</a>.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_CreateSpnIdentity_System_String_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_CreateSpnIdentity_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateSpnIdentity(String)</div>        \r\n          </div>\r\n    \r\n            <p>Creates a server principal name (SPN) identity with a specified name.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public static System.ServiceModel.EndpointIdentity CreateSpnIdentity (string spnName);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>spnName</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The name for the SPN identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a></div>\r\n                  </div>\r\n                  <p>An SPN <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> associated with the specified <code>spnName</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>spnName</code> is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>A secure WCF client that connects to an endpoint with this identity uses the SPN when performing SSPI authentication with the endpoint.  </p>\n<p> This static method creates an instance of <a class=\"xref\" href=\"system.servicemodel.spnendpointidentity\" data-linktype=\"relative-path\">SpnEndpointIdentity</a> by calling its constructor, <a class=\"xref\" href=\"system.servicemodel.spnendpointidentity#System_ServiceModel_SpnEndpointIdentity__ctor_\" data-linktype=\"relative-path\">SpnEndpointIdentity</a>, using <code>spnName</code> as the input parameter.  </p>\n<p> If <code>spnName</code> is specified with an empty string, authentication falls back from Kerberos to NTLM if possible. If <a class=\"xref\" href=\"system.servicemodel.security.windowsclientcredential#System_ServiceModel_Security_WindowsClientCredential_AllowNtlm_\" data-linktype=\"relative-path\">AllowNtlm</a> is <code>false</code>, authentication fails.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to call this method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UEEndpointIdentity#12\">            // Create the service host.\n            ServiceHost myServiceHost = new ServiceHost(typeof(Calculator));\n\n            // Create the binding.\n            WSHttpBinding binding = new WSHttpBinding();\n            binding.Security.Mode = SecurityMode.Message;\n            binding.Security.Message.ClientCredentialType =\n                 MessageCredentialType.Windows;\n\n            // Disable credential negotiation and establishment of the\n            // security context.\n            binding.Security.Message.NegotiateServiceCredential = false;\n            binding.Security.Message.EstablishSecurityContext = false;\n\n            // Create a URI for the endpoint address.\n            Uri httpUri = new Uri(&quot;http://localhost/Calculator&quot;);\n\n            // Create the EndpointAddress with the SPN for the Identity.\n            EndpointAddress ea = new EndpointAddress(httpUri,\n                EndpointIdentity.CreateSpnIdentity(&quot;service_spn_name&quot;));\n\n            // Get the contract from the ICalculator interface (not shown here).\n            // See the sample applications for an example of the ICalculator.\n            ContractDescription contract = ContractDescription.GetContract(\n                typeof(ICalculator));\n\n            // Create a new ServiceEndpoint.\n            ServiceEndpoint se = new ServiceEndpoint(contract, binding, ea);\n\n            // Add the service endpoint to the service.\n            myServiceHost.Description.Endpoints.Add(se);\n\n            // Open the service.\n            myServiceHost.Open();\n            Console.WriteLine(&quot;Listening...&quot;);\n            Console.ReadLine();\n\n            // Close the service. \n            myServiceHost.Close();\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_CreateUpnIdentity_System_String_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_CreateUpnIdentity_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateUpnIdentity(String)</div>        \r\n          </div>\r\n    \r\n            <p>Creates a user principal name (UPN) identity with a specified name.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public static System.ServiceModel.EndpointIdentity CreateUpnIdentity (string upnName);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>upnName</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The name for the UPN identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a></div>\r\n                  </div>\r\n                  <p>A UPN <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> associated with the specified <code>upnName</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>upnName</code> is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>A secure WCF client that connects to an endpoint with this identity uses the UPN when performing SSPI authentication with the endpoint.  </p>\n<p> This static method creates an instance of <a class=\"xref\" href=\"system.servicemodel.upnendpointidentity\" data-linktype=\"relative-path\">UpnEndpointIdentity</a> by calling its constructor, <a class=\"xref\" href=\"system.servicemodel.upnendpointidentity#System_ServiceModel_UpnEndpointIdentity__ctor_\" data-linktype=\"relative-path\">UpnEndpointIdentity</a>, using <code>upnName</code> as the input parameter.  </p>\n<p> If <code>upnName</code> is specified with an empty string, authentication falls back from Kerberos to NTLM if possible. If <a class=\"xref\" href=\"system.servicemodel.security.windowsclientcredential#System_ServiceModel_Security_WindowsClientCredential_AllowNtlm_\" data-linktype=\"relative-path\">AllowNtlm</a> is <code>false</code>, WCF makes a best-effort to throw an exception if NTLM is used. Note that setting this property to <code>false</code> may not prevent NTLM credentials from being sent over the wire.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to call this method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UEEndpointIdentity#30\">namespace TestPrincipalPermission\n{\n    class PrincipalPermissionModeWindows\n    {\n\n        [ServiceContract]\n        interface ISecureService\n        {\n            [OperationContract]\n            string Method1();\n        }\n\n        class SecureService : ISecureService\n        {\n            [PrincipalPermission(SecurityAction.Demand, Role = &quot;everyone&quot;)]\n            public string Method1()\n            {\n                return String.Format(&quot;Hello, \\&quot;{0}\\&quot;&quot;, Thread.CurrentPrincipal.Identity.Name);\n            }\n        }\n\n        public void Run()\n        {\n            Uri serviceUri = new Uri(@&quot;http://localhost:8006/Service&quot;);\n            ServiceHost service = new ServiceHost(typeof(SecureService));\n            service.AddServiceEndpoint(typeof(ISecureService), GetBinding(), serviceUri);\n            service.Authorization.PrincipalPermissionMode = PrincipalPermissionMode.UseAspNetRoles;\n            service.Open();\n\n            EndpointAddress sr = new EndpointAddress(\n                serviceUri, EndpointIdentity.CreateUpnIdentity(WindowsIdentity.GetCurrent().Name));\n            ChannelFactory&lt;ISecureService&gt; cf = new ChannelFactory&lt;ISecureService&gt;(GetBinding(), sr);\n            ISecureService client = cf.CreateChannel();\n            Console.WriteLine(&quot;Client received response from Method1: {0}&quot;, client.Method1());\n            ((IChannel)client).Close();\n            Console.ReadLine();\n            service.Close();\n\n        }\n\n        public static Binding GetBinding()\n        {\n            WSHttpBinding binding = new WSHttpBinding(SecurityMode.Message);\n            binding.Security.Message.ClientCredentialType = MessageCredentialType.Windows;\n            return binding;\n        }\n    }\n}\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_CreateX509CertificateIdentity_System_Security_Cryptography_X509Certificates_X509Certificate2_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_CreateX509CertificateIdentity_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateX509CertificateIdentity(X509Certificate2)</div>        \r\n          </div>\r\n    \r\n            <p>Creates an X509Certificate identity with the specified certificate.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public static System.ServiceModel.EndpointIdentity CreateX509CertificateIdentity (System.Security.Cryptography.X509Certificates.X509Certificate2 certificate);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>certificate</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.security.cryptography.x509certificates.x509certificate2\" data-linktype=\"relative-path\">X509Certificate2</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>An <a class=\"xref\" href=\"system.security.cryptography.x509certificates.x509certificate2\" data-linktype=\"relative-path\">X509Certificate2</a> that contains the certificate for the identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a></div>\r\n                  </div>\r\n                  <p>An X509Certificate <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> associated with the specified <code>certificate</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>certificate</code> is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>A secure WCF client that connects to an endpoint with this identity verifies that the claims presented by the server contain the claim that contains the thumbprint of the certificate used to construct this identity.  </p>\n<p> This <code>static</code> method creates an instance of <a class=\"xref\" href=\"system.servicemodel.x509certificateendpointidentity\" data-linktype=\"relative-path\">X509CertificateEndpointIdentity</a> by calling its constructor, <a class=\"xref\" href=\"system.servicemodel.x509certificateendpointidentity#System_ServiceModel_X509CertificateEndpointIdentity__ctor_\" data-linktype=\"relative-path\">X509CertificateEndpointIdentity</a>, using <code>certificate</code> as the input parameter.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to call this method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UEEndpointIdentity#40\">        // This method creates a WSFederationHttpBinding.\n        public static WSFederationHttpBinding CreateWSFederationHttpBinding()\n        {\n            // Create an instance of the WSFederationHttpBinding.\n            WSFederationHttpBinding b = new WSFederationHttpBinding();\n\n            // Set the security mode to Message.\n            b.Security.Mode = WSFederationHttpSecurityMode.Message;\n\n            // Set the Algorithm Suite to Basic256Rsa15.\n            b.Security.Message.AlgorithmSuite = SecurityAlgorithmSuite.Basic256Rsa15;\n\n            // Set NegotiateServiceCredential to true.\n            b.Security.Message.NegotiateServiceCredential = true;\n\n            // Set IssuedKeyType to Symmetric.\n            b.Security.Message.IssuedKeyType = SecurityKeyType.SymmetricKey;\n\n            // Set IssuedTokenType to SAML 1.1.\n            b.Security.Message.IssuedTokenType = &quot;http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#samlv1.1&quot;;\n\n            // Extract the STS certificate from the certificate store.\n            X509Store store = new X509Store(StoreName.TrustedPeople, StoreLocation.CurrentUser);\n            store.Open(OpenFlags.ReadOnly);\n            X509Certificate2Collection certs = store.Certificates.Find(X509FindType.FindByThumbprint, &quot;cd 54 88 85 0d 63 db ac 92 59 05 af ce b8 b1 de c3 67 9e 3f&quot;, false);\n            store.Close();\n\n            // Create an EndpointIdentity from the STS certificate.\n            EndpointIdentity identity = EndpointIdentity.CreateX509CertificateIdentity(certs[0]);\n\n            // Set the IssuerAddress using the address of the STS and the previously created EndpointIdentity.\n            b.Security.Message.IssuerAddress = new EndpointAddress(new Uri(&quot;http://localhost:8000/sts/x509&quot;), identity);\n\n            // Set the IssuerBinding to a WSHttpBinding loaded from config\n            b.Security.Message.IssuerBinding = new WSHttpBinding(&quot;Issuer&quot;);\n\n            // Set the IssuerMetadataAddress using the metadata address of the STS and the previously created EndpointIdentity.\n            b.Security.Message.IssuerMetadataAddress = new EndpointAddress(new Uri(&quot;http://localhost:8001/sts/mex&quot;), identity);\n\n            // Create a ClaimTypeRequirement.\n            ClaimTypeRequirement ctr = new ClaimTypeRequirement(&quot;http://example.org/claim/c1&quot;, false);\n\n            // Add the ClaimTypeRequirement to ClaimTypeRequirements.\n            b.Security.Message.ClaimTypeRequirements.Add(ctr);\n\n            // Return the created binding.\n            return b;\n        }\n    }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_CreateX509CertificateIdentity_System_Security_Cryptography_X509Certificates_X509Certificate2_System_Security_Cryptography_X509Certificates_X509Certificate2Collection_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_CreateX509CertificateIdentity_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateX509CertificateIdentity(X509Certificate2,X509Certificate2Collection)</div>        \r\n          </div>\r\n    \r\n            <p>Creates an X509Certificate identity with the specified primary and supporting certificates.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public static System.ServiceModel.EndpointIdentity CreateX509CertificateIdentity (System.Security.Cryptography.X509Certificates.X509Certificate2 primaryCertificate, System.Security.Cryptography.X509Certificates.X509Certificate2Collection supportingCertificates);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>primaryCertificate</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.security.cryptography.x509certificates.x509certificate2\" data-linktype=\"relative-path\">X509Certificate2</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>An <a class=\"xref\" href=\"system.security.cryptography.x509certificates.x509certificate2\" data-linktype=\"relative-path\">X509Certificate2</a> that contains the primary certificate for the identity.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>supportingCertificates</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.security.cryptography.x509certificates.x509certificate2collection\" data-linktype=\"relative-path\">X509Certificate2Collection</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>An <a class=\"xref\" href=\"system.security.cryptography.x509certificates.x509certificate2collection\" data-linktype=\"relative-path\">X509Certificate2Collection</a> that contains the supporting certificates for the identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a></div>\r\n                  </div>\r\n                  <p>A secure WCF client that connects to an endpoint with this identity verifies that the claims presented by the server contain the claim that contains the thumbprint of the certificate used to construct this identity.  </p>\n<p> An X509Certificate <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> associated with the specified <code>primaryCertificate</code> and<code> supportingCertificates.</code></p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p><code>primaryCertificate</code> or <code>supportingCertificates</code> is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This static method creates an instance of <a class=\"xref\" href=\"system.servicemodel.x509certificateendpointidentity\" data-linktype=\"relative-path\">X509CertificateEndpointIdentity</a> by calling its constructor, <a class=\"xref\" href=\"system.servicemodel.x509certificateendpointidentity#System_ServiceModel_X509CertificateEndpointIdentity__ctor_\" data-linktype=\"relative-path\">X509CertificateEndpointIdentity</a>, using <code>primaryCertificate</code> and <code>supportingCertificates</code> as input parameters.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_Equals_System_Object_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_Equals_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Equals(Object)</div>        \r\n          </div>\r\n    \r\n            <p>Returns a value that determines whether a specified object is equal to the current identity object or if they have equal security properties.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override bool Equals (object obj);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>obj</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">System.Object</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">Object</a> compared for equality with the current identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.boolean\" data-linktype=\"relative-path\">Boolean</a></div>\r\n                  </div>\r\n                  <p><code>true</code> if the specified object <code>obj</code> is equivalent to the current identity or contains the same security properties; otherwise, <code>false</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_GetHashCode\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_GetHashCode_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetHashCode()</div>        \r\n          </div>\r\n    \r\n            <p>Provides a hash code for the current instance of the identity.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override int GetHashCode ();</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The hash code for the current identity.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_Initialize_System_IdentityModel_Claims_Claim_\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_Initialize_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Initialize(Claim)</div>        \r\n          </div>\r\n    \r\n            <p>Initializes an <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> with the specified claim.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">protected void Initialize (System.IdentityModel.Claims.Claim identityClaim);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>identityClaim</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.identitymodel.claims.claim\" data-linktype=\"relative-path\">Claim</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.identitymodel.claims.claim\" data-linktype=\"relative-path\">Claim</a> used to initialize the <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This method is called by the constructors of all the classes derived from Initialize).</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_Initialize_System_IdentityModel_Claims_Claim_System_Collections_Generic_IEqualityComparer_System_IdentityModel_Claims_Claim__\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_Initialize_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Initialize(Claim,IEqualityComparer&lt;Claim&gt;)</div>        \r\n          </div>\r\n    \r\n            <p>Initializes an <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a> with the specified claim and an interface and compares equality.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">protected void Initialize (System.IdentityModel.Claims.Claim identityClaim, System.Collections.Generic.IEqualityComparer&lt;System.IdentityModel.Claims.Claim&gt; claimComparer);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>identityClaim</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.identitymodel.claims.claim\" data-linktype=\"relative-path\">Claim</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.identitymodel.claims.claim\" data-linktype=\"relative-path\">Claim</a> used to initialize the <a class=\"xref\" href=\"system.servicemodel.endpointidentity\" data-linktype=\"relative-path\">EndpointIdentity</a>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>claimComparer</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.collections.generic.iequalitycomparer-1\" data-linktype=\"relative-path\">IEqualityComparer</a>&lt;<a class=\"xref\" href=\"system.identitymodel.claims.claim\" data-linktype=\"relative-path\">Claim</a>&gt;</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.collections.iequalitycomparer\" data-linktype=\"relative-path\">IEqualityComparer</a> used to compare claims.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_EndpointIdentity_ToString\">\r\n    \r\n            <a id=\"System_ServiceModel_EndpointIdentity_ToString_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">ToString()</div>        \r\n          </div>\r\n    \r\n            <p>Returns the identity.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override string ToString ();</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </div>\r\n                  <p>A <a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a> of the form &quot;identity(string)&quot; where string = <span class=\"xref\">stem.ServiceModel.EndpointIdentity.IdentityClaim*</span>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n","outputRootRelativePath":"./","pageMetadata":"<meta name=\"breadcrumb_path\" content=\"breadcrumb/toc.json\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"fulldocset\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.fulldocset\">\r\n<meta name=\"ref_skeleton_gitcommit\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.ServiceModel.EndpointIdentity.yml\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.ServiceModel.EndpointIdentity.yml\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity..ctor\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.CreateDnsIdentity\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.CreateIdentity\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.CreateRsaIdentity\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.CreateSpnIdentity\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.CreateUpnIdentity\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.CreateX509CertificateIdentity\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.Equals\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.GetHashCode\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.IdentityClaim\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.Initialize\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.EndpointIdentity.ToString\">\r\n<meta name=\"APILocation\" content=\"System.ServiceModel.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-03-01 01:37 AM\">\r\n<meta name=\"document_id\" content=\"e2df4ec1-0ae7-a1e8-d241-7ac2e7c69db8\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"An abstract class that when implemented provides an identity that enables the authentication of an endpoint by clients that exchange messages with it.\n\">\r\n<meta name=\"toc_rel\" content=\"_splitted/System.ServiceModel/toc.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"System.ServiceModel.EndpointIdentity\">\r\n","rawMetadata":{"breadcrumb_path":"breadcrumb/toc.json","search.ms_sitename":"Docs","search.ms_docsetname":"fulldocset","version":null,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/fulldotnet/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":true,"depot_name":"MSDN.fulldocset","_op_gitRefSkeletonCommitHistory":[{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"use plugin in master","commit_sha":"501959ac03e19ac52a27aa4c6bbeb980f8b11c8c","commit_date":"2017-03-01 09:31:20 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"switch from platform to version","commit_sha":"78cdacb5ca782478af490a6b30c3a2cb2b6b873e","commit_date":"2017-02-28 15:09:51 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"update platforms","commit_sha":"39ad5a8919a59afc93a79ac4bd8e07c3b471b37a","commit_date":"2017-02-28 10:38:59 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"checkin yml","commit_sha":"da161b792852497df7140d7768cee2eccd9cb43f","commit_date":"2017-02-28 09:36:15 +0800"}],"ref_skeleton_gitcommit":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.ServiceModel.EndpointIdentity.yml","original_ref_skeleton_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.ServiceModel.EndpointIdentity.yml","open_to_public_contributors":true,"api_name":["System.ServiceModel.EndpointIdentity","System.ServiceModel.EndpointIdentity..ctor","System.ServiceModel.EndpointIdentity.CreateDnsIdentity","System.ServiceModel.EndpointIdentity.CreateIdentity","System.ServiceModel.EndpointIdentity.CreateRsaIdentity","System.ServiceModel.EndpointIdentity.CreateSpnIdentity","System.ServiceModel.EndpointIdentity.CreateUpnIdentity","System.ServiceModel.EndpointIdentity.CreateX509CertificateIdentity","System.ServiceModel.EndpointIdentity.Equals","System.ServiceModel.EndpointIdentity.GetHashCode","System.ServiceModel.EndpointIdentity.IdentityClaim","System.ServiceModel.EndpointIdentity.Initialize","System.ServiceModel.EndpointIdentity.ToString"],"api_location":["System.ServiceModel.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["System.ServiceModel.EndpointIdentity","System::ServiceModel::EndpointIdentity","System.ServiceModel.EndpointIdentity.#ctor","System::ServiceModel::EndpointIdentity::#ctor","System.ServiceModel.EndpointIdentity.CreateDnsIdentity","System::ServiceModel::EndpointIdentity::CreateDnsIdentity","System.ServiceModel.EndpointIdentity.CreateIdentity","System::ServiceModel::EndpointIdentity::CreateIdentity","System.ServiceModel.EndpointIdentity.CreateRsaIdentity","System::ServiceModel::EndpointIdentity::CreateRsaIdentity","System.ServiceModel.EndpointIdentity.CreateSpnIdentity","System::ServiceModel::EndpointIdentity::CreateSpnIdentity","System.ServiceModel.EndpointIdentity.CreateUpnIdentity","System::ServiceModel::EndpointIdentity::CreateUpnIdentity","System.ServiceModel.EndpointIdentity.CreateX509CertificateIdentity","System::ServiceModel::EndpointIdentity::CreateX509CertificateIdentity","System.ServiceModel.EndpointIdentity.Equals","System::ServiceModel::EndpointIdentity::Equals","System.ServiceModel.EndpointIdentity.GetHashCode","System::ServiceModel::EndpointIdentity::GetHashCode","System.ServiceModel.EndpointIdentity.IdentityClaim","System::ServiceModel::EndpointIdentity::IdentityClaim","System.ServiceModel.EndpointIdentity.Initialize","System::ServiceModel::EndpointIdentity::Initialize","System.ServiceModel.EndpointIdentity.ToString","System::ServiceModel::EndpointIdentity::ToString"],"dev_langs":["csharp"],"updated_at":"2017-03-01 01:37 AM","document_id":"e2df4ec1-0ae7-a1e8-d241-7ac2e7c69db8","content_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/xml/System.ServiceModel/EndpointIdentity.xml","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"EndpointIdentity class | Microsoft Docs","_op_ogTitle":"EndpointIdentity class","description":"An abstract class that when implemented provides an identity that enables the authentication of an endpoint by clients that exchange messages with it.\n","toc_asset_id":"_splitted/System.ServiceModel/toc.json","toc_rel":"_splitted/System.ServiceModel/toc.json","source_url":"","ms.assetid":"System.ServiceModel.EndpointIdentity","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.servicemodel.endpointidentity","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.servicemodel.endpointidentity","fileRelativePath":"System.ServiceModel.EndpointIdentity.html"},"themesRelativePathToOutputRoot":"_themes/"}