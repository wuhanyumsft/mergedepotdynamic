{"content":"\r\n<h1 id=\"azrmps_3_6_0_AzureRM_Compute_Set_AzureRmVMDiskEncryptionExtension_md\">Set-AzureRmVMDiskEncryptionExtension</h1>\r\n\r\n\r\n\t<div class=\"summary\">Enables encryption on a running IaaS virtual machine in Azure.</div>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"syntax\">Syntax</h2>\r\n\t\t<pre class=\"syntax\"><code class=\"lang-powershell\" dir=\"ltr\">Set-AzureRmVMDiskEncryptionExtension [-ResourceGroupName] &lt;String&gt; [[-VolumeType] &lt;String&gt;]\r\n [[-SequenceVersion] &lt;String&gt;] [[-TypeHandlerVersion] &lt;String&gt;] [[-Name] &lt;String&gt;] [[-Passphrase] &lt;String&gt;]\r\n [-DisableAutoUpgradeMinorVersion] [-VMName] &lt;String&gt; [-AadClientID] &lt;String&gt;\r\n [-AadClientCertThumbprint] &lt;String&gt; [-DiskEncryptionKeyVaultUrl] &lt;String&gt; [-DiskEncryptionKeyVaultId] &lt;String&gt;\r\n [[-KeyEncryptionKeyUrl] &lt;String&gt;] [[-KeyEncryptionKeyVaultId] &lt;String&gt;] [[-KeyEncryptionAlgorithm] &lt;String&gt;]\r\n [-Force] [-Confirm] [-WhatIf] [&lt;CommonParameters&gt;]</code></pre>\r\n\t\t<pre class=\"syntax\"><code class=\"lang-powershell\" dir=\"ltr\">Set-AzureRmVMDiskEncryptionExtension [-ResourceGroupName] &lt;String&gt; [[-VolumeType] &lt;String&gt;]\r\n [[-SequenceVersion] &lt;String&gt;] [[-TypeHandlerVersion] &lt;String&gt;] [[-Name] &lt;String&gt;] [[-Passphrase] &lt;String&gt;]\r\n [-DisableAutoUpgradeMinorVersion] [-VMName] &lt;String&gt; [-AadClientID] &lt;String&gt; [-AadClientSecret] &lt;String&gt;\r\n [-DiskEncryptionKeyVaultUrl] &lt;String&gt; [-DiskEncryptionKeyVaultId] &lt;String&gt; [[-KeyEncryptionKeyUrl] &lt;String&gt;]\r\n [[-KeyEncryptionKeyVaultId] &lt;String&gt;] [[-KeyEncryptionAlgorithm] &lt;String&gt;] [-Force] [-Confirm] [-WhatIf]\r\n [&lt;CommonParameters&gt;]</code></pre>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"description\">Description</h2>\r\n\t<p>The <strong>Set-AzureRmVMDiskEncryptionExtension</strong> cmdlet enables encryption on a running infrastructure as a service (IaaS) virtual machine in Azure.\nThis cmdlet enables encryption by installing the disk encryption extension on the virtual machine.\nIf no <em>Name</em> parameter is specified, an extension with the default name AzureDiskEncryption for virtual machines that run the Windows operating system or AzureDiskEncryptionForLinux for Linux virtual machines are installed.\nThis cmdlet requires confirmation from the users as one of the steps to enable encryption requires a restart of the virtual machine.\nIt is advised that you save your work on the virtual machine before you run this cmdlet.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"examples\">Examples</h2>\r\n\t<p><strong>Example 1: Enable encryption using Azure AD Client ID and Client Secret</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>$RGName = \"MyResourceGroup\";\r\nPS C:\\> $VMName = \"MyTestVM\";\r\nPS C:\\> $AADClientID = \"<clientid of=\"\" your=\"\" azure=\"\" ad=\"\" app=\"\">\";\r\nPS C:\\> $AADClientSecret = \"<clientsecret of=\"\" your=\"\" azure=\"\" ad=\"\" app=\"\">\";\r\nPS C:\\> $VaultName= \"MyKeyVault\";\r\nPS C:\\> $KeyVault = Get-AzureRmKeyVault -VaultName $VaultName -ResourceGroupName $RGName;\r\nPS C:\\> $DiskEncryptionKeyVaultUrl = $KeyVault.VaultUri;\r\nPS C:\\> $KeyVaultResourceId = $KeyVault.ResourceId;\r\nPS C:\\> Set-AzureRmVMDiskEncryptionExtension -ResourceGroupName $RGName -VMName $VMName -AadClientID $AADClientID -AadClientSecret $AADClientSecret -DiskEncryptionKeyVaultUrl $DiskEncryptionKeyVaultUrl -DiskEncryptionKeyVaultId $KeyVaultResourceId ;</clientsecret></clientid></code></pre>\r\n\t<p>This example enables encryption using Azure AD client ID, and client secret.</p>\n\r\n\t<p><strong>Example 2: Enable encryption using Azure AD client ID and client certification thumbprint</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>$RGName = \"MyResourceGroup\";\r\nPS C:\\> $VMName = \"MyTestVM\";\r\n#The KeyVault must have enabledForDiskEncryption property set on it\r\nPS C:\\> $VaultName= \"MyKeyVault\";\r\nPS C:\\> $KeyVault = Get-AzureRmKeyVault -VaultName $VaultName -ResourceGroupName $RGName;\r\nPS C:\\> $DiskEncryptionKeyVaultUrl = $KeyVault.VaultUri;\r\nPS C:\\> $KeyVaultResourceId = $KeyVault.ResourceId;\r\n\r\n# create Azure AD application and associate the certificate\r\nPS C:\\> $CertPath = \"C:\\certificates\\examplecert.pfx\";\r\nPS C:\\> $CertPassword = \"Password\";\r\nPS C:\\> $Cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2($CertPath, $CertPassword);\r\nPS C:\\> $KeyValue = [System.Convert]::ToBase64String($cert.GetRawCertData());\r\nPS C:\\> $AzureAdApplication = New-AzureRmADApplication -DisplayName \"<your application=\"\" display=\"\" name=\"\">\" -HomePage \"<https: yourapplicationhomepage=\"\">\" -IdentifierUris \"<https: youapplicationuri=\"\">\" -KeyValue $KeyValue -KeyType AsymmetricX509Cert ;\r\nPS C:\\> $ServicePrincipal = New-AzureRmADServicePrincipal -ApplicationId $AzureAdApplication.ApplicationId;\r\n\r\nPS C:\\> $AADClientID = $AzureAdApplication.ApplicationId;\r\nPS C:\\> $aadClientCertThumbprint= $cert.Thumbprint;\r\n\r\n#Upload pfx to KeyVault \r\nPS C:\\> $KeyVaultSecretName = \"MyAADCert';\r\nPS C:\\> $FileContentBytes = get-content $CertPath -Encoding Byte;\r\nPS C:\\> $FileContentEncoded = [System.Convert]::ToBase64String($fileContentBytes);\r\nPS C:\\> $JSONObject = @\" { \"data\": \"$filecontentencoded\", \"dataType\" :\"pfx\", \"password\": \"$CertPassword\" } \"@ ;\r\nPS C:\\> $JSONObjectBytes = [System.Text.Encoding]::UTF8.GetBytes($jsonObject);\r\nPS C:\\> $JSONEncoded = [System.Convert]::ToBase64String($jsonObjectBytes);\r\n\r\nPS C:\\> $Secret = ConvertTo-SecureString -String $JSONEncoded -AsPlainText -Force;\r\nPS C:\\> Set-AzureKeyVaultSecret -VaultName $VaultName -Name $KeyVaultSecretName -SecretValue $Secret;\r\nPS C:\\> Set-AzureRmKeyVaultAccessPolicy -VaultName $VaultName -ResourceGroupName $RGName -EnabledForDeployment;\r\n\r\n#deploy cert to VM\r\nPS C:\\> $CertUrl = (Get-AzureKeyVaultSecret -VaultName $VaultName -Name $KeyVaultSecretName).Id\r\n$SourceVaultId = (Get-AzureRmKeyVault -VaultName $VaultName -ResourceGroupName $RGName).ResourceId\r\nPS C:\\> $VM = Get-AzureRmVM -ResourceGroupName $RGName -Name $VMName \r\nPS C:\\> $VM = Add-AzureRmVMSecret -VM $VM -SourceVaultId $SourceVaultId -CertificateStore \"My\" -CertificateUrl $CertUrl\r\nPS C:\\> Update-AzureRmVM -VM $VM -ResourceGroupName $RGName \r\n\r\n#Enable encryption on the virtual machine using Azure AD client ID and client cert thumbprint\r\nPS C:\\> Set-AzureRmVMDiskEncryptionExtension -ResourceGroupName $RGName -VMName $VMName -AadClientID $AADClientID -AadClientCertThumbprint $AADClientCertThumbprint -DiskEncryptionKeyVaultUrl $DiskEncryptionKeyVaultUrl -DiskEncryptionKeyVaultId $KeyVaultResourceId ;</https:></https:></your></code></pre>\r\n\t<p>This example enables encryption using Azure AD client ID and client certification thumbprints.</p>\n\r\n\t<p><strong>Example 3: Enable encryption using Azure AD client ID, client secret, and wrap disk encryption key by using key encryption key</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>$RGName = \"MyResourceGroup\";\r\nPS C:\\> $VMName = \"MyTestVM\";\r\n\r\nPS C:\\> $AADClientID = \"<clientid of=\"\" your=\"\" azure=\"\" ad=\"\" app=\"\">\";\r\nPS C:\\> $AADClientSecret = \"<clientsecret of=\"\" your=\"\" azure=\"\" ad=\"\" app=\"\">\";\r\n\r\nPS C:\\> $VaultName= \"MyKeyVault\";\r\nPS C:\\> $KeyVault = Get-AzureRmKeyVault -VaultName $VaultName -ResourceGroupName $RGName;\r\nPS C:\\> $DiskEncryptionKeyVaultUrl = $KeyVault.VaultUri;\r\nPS C:\\> $KeyVaultResourceId = $KeyVault.ResourceId;\r\n\r\nPS C:\\> $KEK = Add-AzureKeyVaultKey -VaultName $VaultName -Name $KEKName -Destination \"Software\"\r\nPS C:\\> $KeyEncryptionKeyUrl = $KEK.Key.kid;\r\n\r\nPS C:\\> Set-AzureRmVMDiskEncryptionExtension -ResourceGroupName $RGName -VMName $VMName -AadClientID $AADClientID -AadClientSecret $AADClientSecret -DiskEncryptionKeyVaultUrl $DiskEncryptionKeyVaultUrl -DiskEncryptionKeyVaultId $KeyVaultResourceId -KeyEncryptionKeyUrl $KeyEncryptionKeyUrl -KeyEncryptionKeyVaultId $KeyVaultResourceId;</clientsecret></clientid></code></pre>\r\n\t<p>This example enables encryption using Azure AD client ID, client secret, and wrap disk encryption key by using the key encryption key.</p>\n\r\n\t<p><strong>Example 4: Enable encryption using Azure AD client ID, client cert thumbprint, and wrap disk encryptionkey by using key encryption key</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>$RGName = \"MyResourceGroup\";\r\nPS C:\\> $VMName = \"MyTestVM\";\r\n#The KeyVault must have enabledForDiskEncryption property set on it\r\nPS C:\\> $VaultName= \"MyKeyVault\";\r\nPS C:\\> $KeyVault = Get-AzureRmKeyVault -VaultName $VaultName -ResourceGroupName $RGName;\r\nPS C:\\> $DiskEncryptionKeyVaultUrl = $KeyVault.VaultUri;\r\nPS C:\\> $KeyVaultResourceId = $KeyVault.ResourceId;\r\nPS C:\\> $KEK = Add-AzureKeyVaultKey -VaultName $VaultName -Name $KEKName -Destination \"Software\"\r\nPS C:\\> $KeyEncryptionKeyUrl = $KEK.Key.kid;\r\n\r\nPS C:\\> # create Azure AD application and associate the certificate\r\nPS C:\\> $CertPath = \"C:\\certificates\\examplecert.pfx\";\r\nPS C:\\> $CertPassword = \"Password\";\r\nPS C:\\> $Cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2($CertPath, $CertPassword);\r\nPS C:\\> $KeyValue = [System.Convert]::ToBase64String($cert.GetRawCertData());\r\nPS C:\\> $AzureAdApplication = New-AzureRmADApplication -DisplayName \"<your application=\"\" display=\"\" name=\"\">\" -HomePage \"<https: yourapplicationhomepage=\"\">\" -IdentifierUris \"<https: youapplicationuri=\"\">\" -KeyValue $KeyValue -KeyType AsymmetricX509Cert ;\r\nPS C:\\> $ServicePrincipal = New-AzureRmADServicePrincipal -ApplicationId $AzureAdApplication.ApplicationId;\r\n\r\nPS C:\\> $AADClientID = $AzureAdApplication.ApplicationId;\r\nPS C:\\> $AADClientCertThumbprint= $Cert.Thumbprint;\r\n\r\n#Upload pfx to KeyVault \r\nPS C:\\> $KeyVaultSecretName = \"MyAADCert\";\r\nPS C:\\> $FileContentBytes = get-content $CertPath -Encoding Byte;\r\nPS C:\\> $FileContentEncoded = [System.Convert]::ToBase64String($FileContentBytes);\r\n$JSONObject = @\" { \"data\": \"$filecontentencoded\", \"dataType\" :\"pfx\", \"password\": \"$CertPassword\" } \"@ ;\r\nPS C:\\> $JSONObjectBytes = \r\n[System.Text.Encoding]::UTF8.GetBytes($JSONObject);$jsonEncoded = [System.Convert]::ToBase64String($JSONObjectBytes);\r\nPS C:\\> $Secret = ConvertTo-SecureString -String $JSONEncoded -AsPlainText -Force;\r\nPS C:\\> Set-AzureKeyVaultSecret -VaultName $VaultName-Name $KeyVaultSecretName -SecretValue $Secret;\r\nPS C:\\> Set-AzureRmKeyVaultAccessPolicy -VaultName $VaultName -ResourceGroupName $RGName -EnabledForDeployment;\r\n\r\n#deploy cert to VM\r\nPS C:\\> $CertUrl = (Get-AzureKeyVaultSecret -VaultName $VaultName -Name $KeyVaultSecretName).Id\r\nPS C:\\> $SourceVaultId = (Get-AzureRmKeyVault -VaultName $VaultName -ResourceGroupName $RGName).ResourceId\r\nPS C:\\> $VM = Get-AzureRmVM -ResourceGroupName $RGName -Name $VMName \r\nPS C:\\> $VM = Add-AzureRmVMSecret -VM $VM -SourceVaultId $SourceVaultId -CertificateStore \"My\" -CertificateUrl $CertUrl \r\nPS C:\\> Update-AzureRmVM -VM $VM -ResourceGroupName $RGName \r\n\r\n#Enable encryption on the virtual machine using Azure AD client ID and client cert thumbprint\r\nPS C:\\> Set-AzureRmVMDiskEncryptionExtension -ResourceGroupName $RGname -VMName $VMName -AadClientID $AADClientID -AadClientCertThumbprint $AADClientCertThumbprint -DiskEncryptionKeyVaultUrl $DiskEncryptionKeyVaultUrl -DiskEncryptionKeyVaultId $KeyVaultResourceId ;</https:></https:></your></code></pre>\r\n\t<p>This example enables encryption using Azure AD client ID, client cert thumbprint, and wrap disk encryption key by using key encryption key.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"parameters\">Parameters</h2>\r\n  <div class=\"parameterName\">-AadClientCertThumbprint</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the thumbprint of the AzureActive Directory (Azure AD) application client certificate that has permissions to write secrets to <strong>KeyVault</strong>.\nAs a prerequisite, the Azure AD client certificate must be previously deployed to the virtual machine&#39;s local computer <code>my</code> certificate store.\nThe Add-AzureRmVMSecret cmdlet can be used to deploy a certificate to a virtual machine in Azure.\nFor more details, see the <strong>Add-AzureRmVMSecret</strong> cmdlet help.\nThe certificate must be previously deployed to the virtual machine local computer my certificate store.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>4</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-AadClientID</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the client ID of the Azure AD application that has permissions to write secrets to <strong>KeyVault</strong>.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>3</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-AadClientSecret</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the client secret of the Azure AD application that has permissions to write secrets to <strong>KeyVault</strong>.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>4</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-DisableAutoUpgradeMinorVersion</div>\r\n\t<div class=\"parameterSummary\"><p>Indicates that this cmdlet disables auto-upgrade of the minor version of the extension.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>15</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-DiskEncryptionKeyVaultId</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the resource ID of the <strong>KeyVault</strong> to which the virtual machine encryption keys should be uploaded.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>6</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-DiskEncryptionKeyVaultUrl</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the <strong>KeyVault</strong> URL to which the virtual machine encryption keys should be uploaded.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>5</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Force</div>\r\n\t<div class=\"parameterSummary\"><p>Forces the command to run without asking for user confirmation.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-KeyEncryptionAlgorithm</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the algorithm that is used to wrap and unwrap the key encryption key of the virtual machine.\nThe default value is RSA-OAEP.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Parameter Sets:</td><td>RSA-OAEP, RSA1_5</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>9</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-KeyEncryptionKeyUrl</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the URL of the key encryption key that is used to wrap and unwrap the virtual machine encryption key.\nThis must be the full versioned URL.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>7</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-KeyEncryptionKeyVaultId</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the resource ID of the <strong>KeyVault</strong> that contains key encryption key that is used to wrap and unwrap the virtual machine encryption key.\nThis must be a full versioned URL.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>8</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Name</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the name of the Azure Resource Manager resource that represents the extension.\nThe default value is AzureDiskEncryption for virtual machines that run the Windows operating system or AzureDiskEncryptionForLinux for Linux virtual machines.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>ExtensionName</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>13</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Passphrase</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the passphrase used for encrypting Linux virtual machines only.\nThis parameter is not used for virtual machines that run the Windows operating system.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>14</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-ResourceGroupName</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the name of the resource group of the virtual machine.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>1</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-SequenceVersion</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the sequence number of the encryption operations for a virtual machine.\nThis is unique per each encryption operation performed on the same virtual machine.\nThe Get-AzureRmVMExtension cmdlet can be used to retrieve the previous sequence number that was used.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>11</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-TypeHandlerVersion</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the version of the encryption extension.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>HandlerVersion, Version</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>12</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-VMName</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the name of the virtual machine.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>ResourceName</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>2</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-VolumeType</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the type of virtual machine volumes to perform the encryption operation.\nAllowed values for virtual machines that run the Windows operating system are as follows: All, OS, and Data.\nThe allowed values for Linux virtual machines are as follows: Data only.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Parameter Sets:</td><td>OS, Data, All</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>10</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Confirm</div>\r\n\t<div class=\"parameterSummary\"><p>Prompts you for confirmation before running the cmdlet.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>cf</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-WhatIf</div>\r\n\t<div class=\"parameterSummary\"><p>Shows what would happen if the cmdlet runs.<br><br>The cmdlet is not run.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>wi</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n\r\n\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"related-links\">Related Links</h2>\r\n\t<ul class=\"list-clean\">\r\n\t<li><a href=\"./add-azurermvmsecret\" data-linktype=\"relative-path\">Add-AzureRmVMSecret</a></li>\r\n\t<li><a href=\"./get-azurermvmdiskencryptionstatus\" data-linktype=\"relative-path\">Get-AzureRmVMDiskEncryptionStatus</a></li>\r\n\t<li><a href=\"./remove-azurermvmdiskencryptionextension\" data-linktype=\"relative-path\">Remove-AzureRmVMDiskEncryptionExtension</a></li>\r\n\t</ul>\r\n","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"description\" content=\"Enables encryption on a running IaaS virtual machine in Azure.\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"PowerShell\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"PowerShell\">\r\n<meta name=\"depot_name\" content=\"PowerShell.PowerShell\">\r\n<meta name=\"ms.gitsourceurl\" content=\"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Compute/Set-AzureRmVMDiskEncryptionExtension.md\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"external_help_file\" content=\"Microsoft.Azure.Commands.Compute.dll-Help.xml\">\r\n<meta name=\"ms.assetid\" content=\"6BCB36BC-F5E6-4EDD-983C-8BDE7A9B004D\">\r\n<meta name=\"online_version\" content=\"\">\r\n<meta name=\"schema\" content=\"2.0.0\">\r\n<meta name=\"updated_at\" content=\"03/11/2017 23:03 PM\">\r\n<meta name=\"ms.date\" content=\"03/11/2017\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/Set-AzureRmVMDiskEncryptionExtension.md\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"PowerShellHelpPub\">\r\n<meta name=\"keywords\" content=\"powershell, cmdlet\">\r\n<meta name=\"toc_rel\" content=\"../toc.json\">\r\n","rawMetadata":{"commandList":[],"description":"Enables encryption on a running IaaS virtual machine in Azure.","search.ms_sitename":"Docs","search.ms_docsetname":"PowerShell","version":0,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/powershell/","locale":"en-us","site_name":"Docs","search.ms_product":"PowerShell","_op_openToPublicContributors":true,"depot_name":"PowerShell.PowerShell","open_to_public_contributors":true,"ms.gitsourceurl":"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Compute/Set-AzureRmVMDiskEncryptionExtension.md","layout":"Conceptual","_op_layout":"Conceptual","pagetype":"Reference","title":"Set-AzureRmVMDiskEncryptionExtension | Microsoft Docs","_op_ogTitle":"Set-AzureRmVMDiskEncryptionExtension","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.compute/set-azurermvmdiskencryptionextension","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.compute/set-azurermvmdiskencryptionextension","external_help_file":"Microsoft.Azure.Commands.Compute.dll-Help.xml","ms.assetid":"6BCB36BC-F5E6-4EDD-983C-8BDE7A9B004D","online_version":"","schema":"2.0.0","updated_at":"03/11/2017 23:03 PM","ms.date":"03/11/2017","content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/Set-AzureRmVMDiskEncryptionExtension.md","original_content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/Set-AzureRmVMDiskEncryptionExtension.md","gitcommit":"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c","ms.topic":"reference","author":"erickson-doug","ms.author":"PowerShellHelpPub","keywords":"powershell, cmdlet","toc_asset_id":"azrmps-3.6.0/module/toc.json","toc_rel":"../toc.json","fileRelativePath":"azrmps-3.6.0/module/AzureRM.Compute/Set-AzureRmVMDiskEncryptionExtension.html"},"themesRelativePathToOutputRoot":"_themes/"}