{"content":"\r\n<h1 id=\"azrmps_3_6_0_AzureRM_Compute_New_AzureVMSqlServerAutoBackupConfig_md\">New-AzureVMSqlServerAutoBackupConfig</h1>\r\n\r\n\r\n\t<div class=\"summary\">Creates a configuration object for SQL Server automatic backup.</div>\r\n\r\n<nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n  <h3>In this Article</h3>\r\n</nav>\r\n\t<h2 class=\"cli\" id=\"syntax\">Syntax</h2>\r\n\t\t<pre class=\"syntax loading\"><code class=\"lang-powershell\" dir=\"ltr\">New-AzureVMSqlServerAutoBackupConfig [-ResourceGroupName] &lt;String&gt; [-Enable] [[-RetentionPeriodInDays] &lt;Int32&gt;]\r\n [-EnableEncryption] [[-CertificatePassword] &lt;SecureString&gt;] [[-StorageUri] &lt;Uri&gt;]\r\n [[-StorageContext] &lt;AzureStorageContext&gt;] [[-StorageKey] &lt;SecureString&gt;] [-BackupScheduleType &lt;String&gt;]\r\n [-BackupSystemDbs] [-FullBackupFrequency &lt;String&gt;] [-FullBackupStartHour &lt;Int32&gt;]\r\n [-FullBackupWindowInHours &lt;Int32&gt;] [-LogBackupFrequencyInMinutes &lt;Int32&gt;] [&lt;CommonParameters&gt;]</code></pre>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"description\">Description</h2>\r\n\t<p>The <strong>New-AzureVMSqlServerAutoBackupConfig</strong> cmdlet creates a configuration object for SQL Server automatic backup.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"examples\">Examples</h2>\r\n\t<p><strong>Example 1: Create an automatic backup configuration using storage URI and account key</strong></p>\r\n\t\r\n\t<pre class=\"loading\"><code class=\"lang-powershell\">PS C:\\>$AutoBackupConfig = New-AzureVMSqlServerAutoBackupConfig -Enable -RetentionPeriod 10 -StorageUri \"\\\\contoso\\StorageGeneral\" -StorageKey \"< storage=\"\" key=\"\" for=\"\" contosogeneral=\"\">\"\r\nEnable                : True\r\nEnableEncryption      : False\r\nRetentionPeriodInDays : 10</code></pre>\r\n\t<p>This command creates an automatic backup configuration object by specifying storage URI and account key.\nAutomatic backup is enabled and automatic backups are kept for 10 days.\nThe command stores the result in the $AutoBackupConfig variable.\nYou can specify this configuration item for other cmdlets, such as the Set-AzureRmVMSqlServerExtension cmdlet.</p>\n\r\n\t<p><strong>Example 2: Create an automatic backup configuration using storage context</strong></p>\r\n\t\r\n\t<pre class=\"loading\"><code class=\"lang-powershell\">PS C:\\>$StorageContext = New-AzureStorageContext -StorageAccountName \"ContosoGeneral\" -StorageAccountKey \"< storage=\"\" key=\"\" for=\"\" contosogeneral=\"\">\"\r\nPS C:\\> $AutoBackupConfig = New-AzureVMSqlServerAutoBackupConfig -StorageContext $StorageContext -Enable -RetentionPeriod 10\r\nEnable                : True\r\nEnableEncryption      : False\r\nRetentionPeriodInDays : 10</code></pre>\r\n\t<p>The first command creates a storage context, and then stores it in the $StorageContext variable.\nFor more information, see New-AzureStorageContext.<br><br>The second command creates an automatic backup configuration object by specifying the storage context in $StorageContext.\nAutomatic backup is enabled and automatic backups are kept for 10 days.</p>\n\r\n\t<p><strong>Example 3: Create an automatic backup configuration using storage context with encryption and password</strong></p>\r\n\t\r\n\t<pre class=\"loading\"><code class=\"lang-powershell\">PS C:\\>$StorageContext = New-AzureVMSqlServerAutoBackupConfig -StorageContext $StorageContext -Enable -RetentionPeriod 10 -EnableEncryption -CertificatePassword $CertificatePassword\r\nEnable                : True\r\nEnableEncryption      : True\r\nRetentionPeriodInDays : 10</code></pre>\r\n\t<p>This command creates and stores an automatic backup configuration object.\nThe command specifies the storage context created in a previous example.\nThe command enables encryption with password.\nThe password was previously stored as a secure string in the $CertificatePassword variable.\nTo create a secure string, use the ConvertTo-SecureString cmdlet.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"parameters\">Parameters</h2>\r\n  <div class=\"parameterName\">-BackupScheduleType</div>\r\n\t<div class=\"parameterSummary\"><p>Backup schedule type, manual or automated</p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-BackupSystemDbs</div>\r\n\t<div class=\"parameterSummary\"><p>Backup system databases</p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-CertificatePassword</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies a password to encrypt the certificate that is used to perform SQL Server encrypted backups.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SecureString</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>5</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Enable</div>\r\n\t<div class=\"parameterSummary\"><p>Indicates that automated backup for the SQL Server virtual machine is enabled.\nIf you specify this parameter, automated backup sets a backup schedule for all current and new databases.\nThis updates your Managed Backup settings to follow this schedule.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>2</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-EnableEncryption</div>\r\n\t<div class=\"parameterSummary\"><p>Indicates that this cmdlet enables encryption.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>4</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-FullBackupFrequency</div>\r\n\t<div class=\"parameterSummary\"><p>Sql Server Full Backup frequency, daily or weekly</p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-FullBackupStartHour</div>\r\n\t<div class=\"parameterSummary\"><p>Hour of the day (0-23) when the Sql Server Full Backup should start</p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>Int32</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-FullBackupWindowInHours</div>\r\n\t<div class=\"parameterSummary\"><p>Sql Server Full Backup window in hours</p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>Int32</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-LogBackupFrequencyInMinutes</div>\r\n\t<div class=\"parameterSummary\"><p>Sql Server Log Backup frequency, once every 1-60 minutes</p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>Int32</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-ResourceGroupName</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the name of the resource group of the virtual machine.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>1</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-RetentionPeriodInDays</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the number of days to retain a backup.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>Int32</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>3</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-StorageContext</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the storage account that will be used to store backups.\nTo obtain an <strong>AzureStorageContext</strong> object, use the New-AzureStorageContext cmdlet.\nThe default is the storage account that is associated with the SQL Server virtual machine.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>AzureStorageContext</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>6</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-StorageKey</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the storage key of the blob storage account.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SecureString</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>6</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-StorageUri</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the Uniform Resource Identifier (URI) of the blob storage account.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>Uri</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>5</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n\r\n\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"related-links\">Related Links</h2>\r\n\t<ul class=\"list-clean\">\r\n\t<li><a href=\"./new-azurevmsqlserverautopatchingconfig\">New-AzureVMSqlServerAutoPatchingConfig</a></li>\r\n\t<li><a href=\"./set-azurermvmsqlserverextension\">Set-AzureRmVMSqlServerExtension</a></li>\r\n\t</ul>\r\n","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"description\" content=\"Creates a configuration object for SQL Server automatic backup.\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"PowerShell\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"PowerShell\">\r\n<meta name=\"depot_name\" content=\"PowerShell.PowerShell\">\r\n<meta name=\"ms.gitsourceurl\" content=\"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Compute/New-AzureVMSqlServerAutoBackupConfig.md\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"external_help_file\" content=\"Microsoft.Azure.Commands.Compute.dll-Help.xml\">\r\n<meta name=\"ms.assetid\" content=\"0AC17275-17A9-47DE-BF04-C1A51DF057DC\">\r\n<meta name=\"online_version\" content=\"\">\r\n<meta name=\"schema\" content=\"2.0.0\">\r\n<meta name=\"updated_at\" content=\"03/11/2017 23:03 PM\">\r\n<meta name=\"ms.date\" content=\"03/11/2017\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/New-AzureVMSqlServerAutoBackupConfig.md\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"PowerShellHelpPub\">\r\n<meta name=\"keywords\" content=\"powershell, cmdlet\">\r\n<meta name=\"toc_rel\" content=\"../toc2.json\">\r\n","rawMetadata":{"commandList":[],"description":"Creates a configuration object for SQL Server automatic backup.","search.ms_sitename":"Docs","search.ms_docsetname":"PowerShell","version":0,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/powershell/","locale":"en-us","site_name":"Docs","search.ms_product":"PowerShell","_op_openToPublicContributors":true,"depot_name":"PowerShell.PowerShell","open_to_public_contributors":true,"ms.gitsourceurl":"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Compute/New-AzureVMSqlServerAutoBackupConfig.md","layout":"Conceptual","_op_layout":"Conceptual","pagetype":"Reference","title":"New-AzureVMSqlServerAutoBackupConfig | Microsoft Docs","_op_ogTitle":"New-AzureVMSqlServerAutoBackupConfig","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.compute/new-azurevmsqlserverautobackupconfig","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.compute/new-azurevmsqlserverautobackupconfig","external_help_file":"Microsoft.Azure.Commands.Compute.dll-Help.xml","ms.assetid":"0AC17275-17A9-47DE-BF04-C1A51DF057DC","online_version":"","schema":"2.0.0","updated_at":"03/11/2017 23:03 PM","ms.date":"03/11/2017","content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/New-AzureVMSqlServerAutoBackupConfig.md","original_content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/New-AzureVMSqlServerAutoBackupConfig.md","gitcommit":"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c","ms.topic":"reference","author":"erickson-doug","ms.author":"PowerShellHelpPub","keywords":"powershell, cmdlet","toc_asset_id":"azrmps-3.6.0/module/toc.json","toc_rel":"../toc.json","_op_displayDate":"2017-3-11","_op_displayDate_source":"2017-03-11T00:00:00Z","fileRelativePath":"azrmps-3.6.0/module/AzureRM.Compute/New-AzureVMSqlServerAutoBackupConfig.html"},"themesRelativePathToOutputRoot":"_themes/"}