{"content":"\r\n<h1 id=\"azrmps_3_6_0_AzureRM_Compute_Add_AzureRmVmssSecret_md\">Add-AzureRmVmssSecret</h1>\r\n\r\n\r\n\t<div class=\"summary\">Adds a secret to a VMSS.</div>\r\n\r\n<nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n  <h3>In this Article</h3>\r\n</nav>\r\n\t<h2 class=\"cli\" id=\"syntax\">Syntax</h2>\r\n\t\t<pre class=\"syntax loading\"><code class=\"lang-powershell\" dir=\"ltr\">Add-AzureRmVmssSecret [-VirtualMachineScaleSet] &lt;VirtualMachineScaleSet&gt; [[-SourceVaultId] &lt;String&gt;]\r\n [[-VaultCertificate] &lt;VaultCertificate[]&gt;] [-Confirm] [-WhatIf] [&lt;CommonParameters&gt;]</code></pre>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"description\">Description</h2>\r\n\t<p>The <strong>Add-AzureRmVmssSecret</strong> cmdlet adds a secret to the Virtual Machine Scale Set (VMSS).\nThe secret must be stored in an Azure Key Vault.\nFor more information relating to Key Vault, see What is Azure Key Vault?<a href=\"https://azure.microsoft.com/en-us/documentation/articles/key-vault-whatis/\">https://azure.microsoft.com/en-us/documentation/articles/key-vault-whatis/</a> (<a href=\"https://azure.microsoft.com/en-us/documentation/articles/key-vault-whatis/\">https://azure.microsoft.com/en-us/documentation/articles/key-vault-whatis/</a>).\nFor more information about the cmdlets, see Azure Key Vault Cmdletshttps://msdn.microsoft.com/library/azure/dn868052.aspx(<a href=\"https://msdn.microsoft.com/library/azure/dn868052.aspx\">https://msdn.microsoft.com/library/azure/dn868052.aspx</a>) in the Microsoft Developer Network library or the Set-AzureKeyVaultSecret cmdlet.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"examples\">Examples</h2>\r\n\t<p><strong>Example 1: Add a secret to the VMSS</strong></p>\r\n\t\r\n\t<pre class=\"loading\"><code class=\"lang-powershell\">PS C:\\>$Vault = Get-AzureRmKeyVault -VaultName \"ContosoVault\"\r\nPS C:\\> $CertConfig = New-AzureRmVmssVaultCertificateConfig -CertificateUrl \"http://keyVaultName.vault.contoso.net/secrets/secretName/secretVersion\" -CertificateStore \"Certificates\"\r\nPS C:\\> $VMSS = New-AzureRmVmssConfig\r\nPS C:\\> Add-AzureRmVmssSecret -VirtualMachineScaleSet $VMSS -SourceVaultId $Vault.ResourceId -VaultCertificate $CertConfig</code></pre>\r\n\t<p>This example adds a secret to the VMSS.\nThe first command uses the Get-AzureRmKeyVault cmdlet to get a vault secret from the vault named ContosoVault and stores the result in the variable named $Vault.\nThe second command uses the <strong>New-AzureRmVmssVaultCertificateConfig</strong> cmdlet to create a Key Vault certificate configuration using the specified certificate URL from the certificate store named Certificates and stores the results in the variable named $CertConfig.\nThe third command uses the <strong>New-AzureRmVmssConfig</strong> cmdlet to create a VMSS configuration object and stores the result in the variable named $VMSS.\nThe fourth command adds a secret to the VMSS using the vault secret using the key resource ID and the vault certificate stored in the $Vault and $CertConfig variables.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"parameters\">Parameters</h2>\r\n  <div class=\"parameterName\">-SourceVaultId</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the resource ID of the Key Vault that contains the certificates that you can add to the virtual machine.\nThis value also acts as the key for adding multiple certificates.\nThis means that you can use the same value for the <em>SourceVaultId</em> parameter when you add multiple certificates from the same Key Vault.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>2</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-VaultCertificate</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the Vault <strong>Certificate</strong> object that contains the certificate URL and certificate name.\nYou can use the New-AzureRmVmssVaultCertificateConfig cmdlet to create this object.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>VaultCertificate[]</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>3</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-VirtualMachineScaleSet</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the VMSS object.\nYou can use the New-AzureRmVmssConfig cmdlet to create this object.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>VirtualMachineScaleSet</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>1</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName, ByValue)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Confirm</div>\r\n\t<div class=\"parameterSummary\"><p>Prompts you for confirmation before running the cmdlet.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>cf</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-WhatIf</div>\r\n\t<div class=\"parameterSummary\"><p>Shows what would happen if the cmdlet runs. The cmdlet is not run.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>wi</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"outputs\">Outputs</h2>\r\n\t\t<p><strong> </strong></p>\r\n\tThis cmdlet does not generate any output.\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"related-links\">Related Links</h2>\r\n\t<ul class=\"list-clean\">\r\n\t<li><a href=\"./new-azurermvmssvaultcertificateconfig\">New-AzureRmVmssVaultCertificateConfig</a></li>\r\n\t<li><a href=\"./new-azurermvmssconfig\">New-AzureRmVmssConfig</a></li>\r\n\t</ul>\r\n","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"description\" content=\"Adds a secret to a VMSS.\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"PowerShell\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"PowerShell\">\r\n<meta name=\"depot_name\" content=\"PowerShell.PowerShell\">\r\n<meta name=\"ms.gitsourceurl\" content=\"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Compute/Add-AzureRmVmssSecret.md\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"external_help_file\" content=\"Microsoft.Azure.Commands.Compute.dll-Help.xml\">\r\n<meta name=\"ms.assetid\" content=\"656BE930-E778-40B0-8A75-BFE52DE386CE\">\r\n<meta name=\"online_version\" content=\"\">\r\n<meta name=\"schema\" content=\"2.0.0\">\r\n<meta name=\"updated_at\" content=\"03/11/2017 23:03 PM\">\r\n<meta name=\"ms.date\" content=\"03/11/2017\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/Add-AzureRmVmssSecret.md\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"PowerShellHelpPub\">\r\n<meta name=\"keywords\" content=\"powershell, cmdlet\">\r\n<meta name=\"toc_rel\" content=\"../toc2.json\">\r\n","rawMetadata":{"commandList":[],"description":"Adds a secret to a VMSS.","search.ms_sitename":"Docs","search.ms_docsetname":"PowerShell","version":0,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/powershell/","locale":"en-us","site_name":"Docs","search.ms_product":"PowerShell","_op_openToPublicContributors":true,"depot_name":"PowerShell.PowerShell","open_to_public_contributors":true,"ms.gitsourceurl":"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Compute/Add-AzureRmVmssSecret.md","layout":"Conceptual","_op_layout":"Conceptual","pagetype":"Reference","title":"Add-AzureRmVmssSecret | Microsoft Docs","_op_ogTitle":"Add-AzureRmVmssSecret","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.compute/add-azurermvmsssecret","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.compute/add-azurermvmsssecret","external_help_file":"Microsoft.Azure.Commands.Compute.dll-Help.xml","ms.assetid":"656BE930-E778-40B0-8A75-BFE52DE386CE","online_version":"","schema":"2.0.0","updated_at":"03/11/2017 23:03 PM","ms.date":"03/11/2017","content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/Add-AzureRmVmssSecret.md","original_content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/Add-AzureRmVmssSecret.md","gitcommit":"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c","ms.topic":"reference","author":"erickson-doug","ms.author":"PowerShellHelpPub","keywords":"powershell, cmdlet","toc_asset_id":"azrmps-3.6.0/module/toc.json","toc_rel":"../toc.json","_op_displayDate":"2017-3-11","_op_displayDate_source":"2017-03-11T00:00:00Z","fileRelativePath":"azrmps-3.6.0/module/AzureRM.Compute/Add-AzureRmVmssSecret.html"},"themesRelativePathToOutputRoot":"_themes/"}