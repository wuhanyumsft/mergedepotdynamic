{"content":"\r\n<h1 id=\"azrmps_3_6_0_AzureRM_Compute_Add_AzureRmVMSecret_md\">Add-AzureRmVMSecret</h1>\r\n\r\n\r\n\t<div class=\"summary\">Adds a secret to a virtual machine.</div>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"syntax\">Syntax</h2>\r\n\t\t<pre class=\"syntax\"><code class=\"lang-powershell\" dir=\"ltr\">Add-AzureRmVMSecret [-VM] &lt;PSVirtualMachine&gt; [[-SourceVaultId] &lt;String&gt;] [[-CertificateStore] &lt;String&gt;]\r\n [[-CertificateUrl] &lt;String&gt;] [&lt;CommonParameters&gt;]</code></pre>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"description\">Description</h2>\r\n\t<p>The <strong>Add-AzureRmVMSecret</strong> cmdlet adds a secret to a virtual machine.\nThis value lets you add a certificate to the virtual machine.\nThe secret must be stored in a Key Vault.\nFor more information about Key Vault, see <a href=\"https://azure.microsoft.com/en-us/documentation/articles/key-vault-whatis/\" data-linktype=\"external\">What is Azure Key Vault?</a>.\nFor more information about the cmdlets, see <a href=\"https://msdn.microsoft.com/library/azure/dn868052.aspx\" data-linktype=\"external\">Azure Key Vault Cmdlets</a> in the Microsoft Developer Network library or the Set-AzureKeyVaultSecret cmdlet.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"examples\">Examples</h2>\r\n\t<p><strong>Example 1: Add a secret to a virtual machine</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>$VirtualMachine = New-AzureRmVMConfig -VMName \"VirtualMachine07\" -VMSize \"Standard_A1\" -AvailabilitySetID $AvailabilitySet.Id\r\nPS C:\\> $Credential = Get-Credential\r\nPS C:\\> $VirtualMachine = Set-AzureRmVMOperatingSystem -VM $VirtualMachine  -Windows -ComputerName \"Contoso26\" -Credential $Credential\r\nPS C:\\> $SourceVaultId = \"/subscriptions/46f8cea4-2de6-4179-8ab1-365da4211af4/resourceGroups/vault/providers/Microsoft.KeyVault/vaults/keyvault\"\r\nPS C:\\> $CertificateStore01 = \"My\"\r\nPS C:\\> $CertificateUrl01 = \"https://contosovault.vault.azure.net/secrets/514ceb769c984379a7e0230bdd703272\"\r\nPS C:\\> $VirtualMachine = Add-AzureRmVMSecret -VM $VirtualMachine -SourceVaultId $SourceVaultId -CertificateStore $CertificateStore01 -CertificateUrl $CertificateUrl01</code></pre>\r\n\t<p>The first command creates a virtual machine object, and then stores it in the $VirtualMachine variable.\nThe command assigns a name and size to the virtual machine.<br><br>The second command creates a credential object by using the Get-Credential cmdlet, and then stores the result in the $Credential variable.\nThe command prompts you for a user name and password.\nFor more information, type <code>Get-Help Get-Credential</code>.<br><br>The third command uses the Set-AzureRmVMOperatingSystem cmdlet to configure the virtual machine stored in $VirtualMachine.<br><br>The fourth command assigns a source vault ID to the $SourceVaultId variable for later use.\nThe command assumes that the $SubscriptionId variable has an appropriate value.<br><br>The fifth command assigns a value to the $CertificateStore01 variable for later use.<br><br>The sixth command assigns a URL for a certificate store.<br><br>The seventh command adds a secret to the virtual machine stored in $VirtualMachine.\nThe SourceVaultId parameter specifies the Key Vault.\nThe command specifies the name of the certificate store and the URL of the certificate.\nYou can run the <strong>Add-AzureRmVMSecret</strong> repeatedly to add secrets for other certificates.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"parameters\">Parameters</h2>\r\n  <div class=\"parameterName\">-CertificateStore</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the name of a certificate store on the virtual machine that runs the Windows operating system.\nThis cmdlet adds the certificate to the store that this parameter specifies.\nYou can only specify this parameter for virtual machines that run the Windows operating system.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>3</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-CertificateUrl</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the URL that points to a Key Vault secret which contains a certificate.<br><br>The certificate is the Base64 encoding of the following JavaScript Object Notation (JSON) object, which is encoded in UTF-8:<br><br>{\n&quot;data&quot;: &quot;&lt;Base64-encoded-file>&quot;,\n&quot;dataType&quot;: &quot;&lt;file-format>&quot;,\n&quot;password&quot;: &quot;&lt;pfx-file-password>&quot;\n}<br><br>\nCurrently, dataType accepts only .pfx files.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>4</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-SourceVaultId</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the resource ID of the Key Vault that contains the certificates that you can add to the virtual machine.\nThis value also acts as the key for adding multiple certificates.\nThis means that you can use the same value for <em>SourceVaultId</em> when you add multiple certificates from the same Key Vault.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>Id</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>2</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-VM</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the virtual machine object that this cmdlet modifies.\nTo obtain a virtual machine object, use the Get-AzureRmVM cmdlet.\nYou can use the New-AzureRmVMConfig cmdlet to create a virtual machine object.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>PSVirtualMachine</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>VMProfile</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>1</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName, ByValue)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n\r\n\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"related-links\">Related Links</h2>\r\n\t<ul class=\"list-clean\">\r\n\t<li><a href=\"./get-azurermvm\" data-linktype=\"relative-path\">Get-AzureRmVM</a></li>\r\n\t<li><a href=\"./new-azurermvmconfig\" data-linktype=\"relative-path\">New-AzureRmVMConfig</a></li>\r\n\t<li><a href=\"./set-azurermvmoperatingsystem\" data-linktype=\"relative-path\">Set-AzureRmVMOperatingSystem</a></li>\r\n\t</ul>\r\n","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"description\" content=\"Adds a secret to a virtual machine.\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"PowerShell\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"PowerShell\">\r\n<meta name=\"depot_name\" content=\"PowerShell.PowerShell\">\r\n<meta name=\"ms.gitsourceurl\" content=\"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Compute/Add-AzureRmVMSecret.md\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"external_help_file\" content=\"Microsoft.Azure.Commands.Compute.dll-Help.xml\">\r\n<meta name=\"ms.assetid\" content=\"5008F83F-AF3E-47CF-99A3-55129E654128\">\r\n<meta name=\"online_version\" content=\"\">\r\n<meta name=\"schema\" content=\"2.0.0\">\r\n<meta name=\"updated_at\" content=\"03/11/2017 23:03 PM\">\r\n<meta name=\"ms.date\" content=\"03/11/2017\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/Add-AzureRmVMSecret.md\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"PowerShellHelpPub\">\r\n<meta name=\"keywords\" content=\"powershell, cmdlet\">\r\n<meta name=\"toc_rel\" content=\"../toc.json\">\r\n","rawMetadata":{"commandList":[],"description":"Adds a secret to a virtual machine.","search.ms_sitename":"Docs","search.ms_docsetname":"PowerShell","version":0,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/powershell/","locale":"en-us","site_name":"Docs","search.ms_product":"PowerShell","_op_openToPublicContributors":true,"depot_name":"PowerShell.PowerShell","open_to_public_contributors":true,"ms.gitsourceurl":"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Compute/Add-AzureRmVMSecret.md","layout":"Conceptual","_op_layout":"Conceptual","pagetype":"Reference","title":"Add-AzureRmVMSecret | Microsoft Docs","_op_ogTitle":"Add-AzureRmVMSecret","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.compute/add-azurermvmsecret","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.compute/add-azurermvmsecret","external_help_file":"Microsoft.Azure.Commands.Compute.dll-Help.xml","ms.assetid":"5008F83F-AF3E-47CF-99A3-55129E654128","online_version":"","schema":"2.0.0","updated_at":"03/11/2017 23:03 PM","ms.date":"03/11/2017","content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/Add-AzureRmVMSecret.md","original_content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Compute/v2.7.0/Add-AzureRmVMSecret.md","gitcommit":"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c","ms.topic":"reference","author":"erickson-doug","ms.author":"PowerShellHelpPub","keywords":"powershell, cmdlet","toc_asset_id":"azrmps-3.6.0/module/toc.json","toc_rel":"../toc.json","fileRelativePath":"azrmps-3.6.0/module/AzureRM.Compute/Add-AzureRmVMSecret.html"},"themesRelativePathToOutputRoot":"_themes/"}