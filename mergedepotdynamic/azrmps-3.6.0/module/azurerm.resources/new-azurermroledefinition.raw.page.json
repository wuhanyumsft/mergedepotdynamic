{"content":"\r\n<h1 id=\"azrmps_3_6_0_AzureRM_Resources_New_AzureRmRoleDefinition_md\">New-AzureRmRoleDefinition</h1>\r\n\r\n\r\n\t<div class=\"summary\">Creates a custom role in Azure RBAC. Provide either a JSON role definition file or a PSRoleDefinition object as input. First, use the Get-AzureRmRoleDefinition command to generate a baseline role definition object. Then, modify its properties as required. Finally, use this command to create a custom role using role definition.</div>\r\n\r\n<nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n  <h3>In this Article</h3>\r\n</nav>\r\n\t<h2 class=\"cli\" id=\"syntax\">Syntax</h2>\r\n\t\t<pre class=\"syntax loading\"><code class=\"lang-powershell\" dir=\"ltr\">New-AzureRmRoleDefinition [-InputFile] &lt;String&gt; [-InformationAction &lt;ActionPreference&gt;]\r\n [-InformationVariable &lt;String&gt;]</code></pre>\r\n\t\t<pre class=\"syntax loading\"><code class=\"lang-powershell\" dir=\"ltr\">New-AzureRmRoleDefinition [-Role] &lt;PSRoleDefinition&gt; [-InformationAction &lt;ActionPreference&gt;]\r\n [-InformationVariable &lt;String&gt;]</code></pre>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"description\">Description</h2>\r\n\t<p>The New-AzureRmRoleDefinition cmdlet creates a custom role in Azure Role-Based Access Control.\nProvide a role definition as an input to the command as a JSON file or a PSRoleDefinition object.<br><br>The input role definition MUST contain the following properties:<br><br>1) DisplayName: the name of the custom role<br><br>2) Description: a short description of the role that summarizes the access that the role grants.<br><br>3) Actions: the set of operations to which the custom role grants access.\nUse Get-AzureRmProviderOperations to get the operation for Azure resource providers that can be secured using Azure RBAC.\nFollowing are some valid operation strings:</p>\n<ul>\n<li>&quot;*/read&quot; grants access to read operations of all Azure resource providers.</li>\n<li>&quot;Microsoft.Network/*/read&quot; grants access to read operations for all resource types in the Microsoft.Network resource provider of Azure.</li>\n<li>&quot;Microsoft.Compute/virtualMachines/*&quot; grants access to all operations of virtual machines and its child resource types.<br><br>4) AssignableScopes: the set of scopes (Azure subscriptions or resource groups) in which the custom role will be available for assignment.\nUsing AssignableScopes you can make the custom role available for assignment in only the subscriptions or resource groups that need it, and not clutter the user experience for the rest of the subscriptions or resource groups.\nFollowing are some valid assignable scopes:</li>\n<li>&quot;/subscriptions/c276fc76-9cd4-44c9-99a7-4fd71546436e&quot;, &quot;/subscriptions/e91d47c4-76f3-4271-a796-21b4ecfe3624&quot;: makes the role available for assignment in two subscriptions.</li>\n<li>&quot;/subscriptions/c276fc76-9cd4-44c9-99a7-4fd71546436e&quot;: makes the role available for assignment in a single subscription.</li>\n<li>&quot;/subscriptions/c276fc76-9cd4-44c9-99a7-4fd71546436e/resourceGroups/Network&quot;: makes the role available for assignment only in the Network resource group.<br><br>The input role definition MAY contain the following properties:<br><br>1) NotActions: the set of operations that must be excluded from the Actions to determine the effective actions for the custom role.\nIf there is a specific operation that you do not wish to grant access to in a custom role, it is convenient to use NotActions to exclude it, rather than specifying all operations other than that specific operation in Actions.<br><br>NOTE: If a user is assigned a role that specifies an operation in NotActions and also assigned another role grants access to the same operation - the user will be able to perform that operation.\nNotActions is not a deny rule - it is simply a convenient way to create a set of allowed operations when specific operations need to be excluded.<br><br>Following is a sample json role definition that can be provided as input\n     {\n     &quot;Name&quot;: &quot;Contoso On-call&quot;,\n     &quot;Description&quot;: &quot;Can monitor compute, network and storage, and restart virtual machines&quot;,\n     &quot;Actions&quot;: [\n     &quot;Microsoft.Compute/<em>/read&quot;,\n     &quot;Microsoft.Compute/virtualMachines/start/action&quot;,\n     &quot;Microsoft.Compute/virtualMachines/restart/action&quot;,\n     &quot;Microsoft.Compute/virtualMachines/downloadRemoteDesktopConnectionFile/action&quot;,\n     &quot;Microsoft.Network/</em>/read&quot;,\n     &quot;Microsoft.Storage/<em>/read&quot;,\n     &quot;Microsoft.Authorization/</em>/read&quot;,\n     &quot;Microsoft.Resources/subscriptions/resourceGroups/read&quot;,\n     &quot;Microsoft.Resources/subscriptions/resourceGroups/resources/read&quot;,\n     &quot;Microsoft.Insights/alertRules/<em>&quot;,\n     &quot;Microsoft.Support/</em>&quot;\n     ],\n     &quot;AssignableScopes&quot;: [&quot;/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;,&quot;/subscriptions/yyyyyyyy-yyyy-yyyy-yyyy-yyyyyyyyyyyy&quot;]\n     }</li>\n</ul>\n\r\n\r\n\t<h2 class=\"cli\" id=\"examples\">Examples</h2>\r\n\t<p><strong>--------------------------  Create using PSRoleDefinitionObject  --------------------------</strong></p>\r\n\t<p>@{paragraph=PS C:\\>}<br><br></p>\n\r\n\t<pre class=\"loading\"><code class=\"lang-powershell\">PS C:\\> $role = Get-AzureRmRoleDefinition -Name \"Virtual Machine Contributor\"\r\n          PS C:\\> $role.Id = $null\r\n          PS C:\\> $role.Name = \"Virtual Machine Operator\"\r\n          PS C:\\> $role.Description = \"Can monitor, start, and restart virtual machines.\"\r\n          PS C:\\> $role.Actions.RemoveRange(0,$role.Actions.Count)\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Compute/*/read\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Compute/virtualMachines/start/action\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Compute/virtualMachines/restart/action\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Compute/virtualMachines/downloadRemoteDesktopConnectionFile/action\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Network/*/read\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Storage/*/read\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Authorization/*/read\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Resources/subscriptions/resourceGroups/read\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Resources/subscriptions/resourceGroups/resources/read\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Insights/alertRules/*\")\r\n          PS C:\\> $role.Actions.Add(\"Microsoft.Support/*\")\r\n          PS C:\\> $role.AssignableScopes.Remove(\"/\") | Out-Null\r\n          PS C:\\> $role.AssignableScopes.Add(\"/subscriptions/c276fc76-9cd4-44c9-99a7-4fd71546436e\")\r\n\r\n          PS C:\\> New-AzureRmRoleDefinition -Role $role</code></pre>\r\n\t\r\n\t<p><strong>--------------------------  Create using JSON file  --------------------------</strong></p>\r\n\t<p>@{paragraph=PS C:\\>}<br><br></p>\n\r\n\t<pre class=\"loading\"><code class=\"lang-powershell\">PS C:\\> New-AzureRmRoleDefinition -InputFile C:\\Temp\\roleDefinition.json</code></pre>\r\n\t\r\n\r\n\t<h2 class=\"cli\" id=\"parameters\">Parameters</h2>\r\n  <div class=\"parameterName\">-InputFile</div>\r\n\t<div class=\"parameterSummary\"><p>File name containing a single json role definition.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>0</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-InformationAction</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies how this cmdlet responds to an information event.<br><br>The acceptable values for this parameter are:<br><br>- Continue</p>\n<ul>\n<li>Ignore</li>\n<li>Inquire</li>\n<li>SilentlyContinue</li>\n<li>Stop</li>\n<li>Suspend<br><br></li>\n</ul>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>ActionPreference</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>infa</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-InformationVariable</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies an information variable.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>iv</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Role</div>\r\n\t<div class=\"parameterSummary\"><p>Role definition object.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>PSRoleDefinition</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>0</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"notes\">Notes</h2>\r\n\tKeywords: azure, azurerm, arm, resource, management, manager, resource, group, template, deployment\r\n\r\n\t<h2 class=\"cli\" id=\"related-links\">Related Links</h2>\r\n\t<ul class=\"list-clean\">\r\n\t<li><a href=\"\">Get-AzureRmProviderOperation</a></li>\r\n\t<li><a href=\"\">Get-AzureRmRoleDefinition</a></li>\r\n\t<li><a href=\"\">Set-AzureRmRoleDefinition</a></li>\r\n\t<li><a href=\"\">Remove-AzureRmRoleDefinition</a></li>\r\n\t</ul>\r\n","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"description\" content=\"Creates a custom role in Azure RBAC. Provide either a JSON role definition file or a PSRoleDefinition object as input. First, use the Get-AzureRmRoleDefinition command to generate a baseline role definition object. Then, modify its properties as required. Finally, use this command to create a custom role using role definition.\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"PowerShell\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"PowerShell\">\r\n<meta name=\"depot_name\" content=\"PowerShell.PowerShell\">\r\n<meta name=\"ms.gitsourceurl\" content=\"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Resources/New-AzureRmRoleDefinition.md\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"external_help_file\" content=\"Microsoft.Azure.Commands.Resources.dll-Help.xml\">\r\n<meta name=\"ms.assetid\" content=\"8300B143-E322-419E-BC98-DBA56DD90A59\">\r\n<meta name=\"online_version\" content=\"\">\r\n<meta name=\"schema\" content=\"2.0.0\">\r\n<meta name=\"updated_at\" content=\"03/11/2017 23:03 PM\">\r\n<meta name=\"ms.date\" content=\"03/11/2017\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Resources/v3.6.0/New-AzureRmRoleDefinition.md\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"PowerShellHelpPub\">\r\n<meta name=\"keywords\" content=\"powershell, cmdlet\">\r\n<meta name=\"toc_rel\" content=\"../toc2.json\">\r\n","rawMetadata":{"commandList":[],"description":"Creates a custom role in Azure RBAC. Provide either a JSON role definition file or a PSRoleDefinition object as input. First, use the Get-AzureRmRoleDefinition command to generate a baseline role definition object. Then, modify its properties as required. Finally, use this command to create a custom role using role definition.","search.ms_sitename":"Docs","search.ms_docsetname":"PowerShell","version":0,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/powershell/","locale":"en-us","site_name":"Docs","search.ms_product":"PowerShell","_op_openToPublicContributors":true,"depot_name":"PowerShell.PowerShell","open_to_public_contributors":true,"ms.gitsourceurl":"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Resources/New-AzureRmRoleDefinition.md","layout":"Conceptual","_op_layout":"Conceptual","pagetype":"Reference","title":"New-AzureRmRoleDefinition | Microsoft Docs","_op_ogTitle":"New-AzureRmRoleDefinition","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.resources/new-azurermroledefinition","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.resources/new-azurermroledefinition","external_help_file":"Microsoft.Azure.Commands.Resources.dll-Help.xml","ms.assetid":"8300B143-E322-419E-BC98-DBA56DD90A59","online_version":"","schema":"2.0.0","updated_at":"03/11/2017 23:03 PM","ms.date":"03/11/2017","content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Resources/v3.6.0/New-AzureRmRoleDefinition.md","original_content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Resources/v3.6.0/New-AzureRmRoleDefinition.md","gitcommit":"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c","ms.topic":"reference","author":"erickson-doug","ms.author":"PowerShellHelpPub","keywords":"powershell, cmdlet","toc_asset_id":"azrmps-3.6.0/module/toc.json","toc_rel":"../toc.json","_op_displayDate":"2017-3-11","_op_displayDate_source":"2017-03-11T00:00:00Z","fileRelativePath":"azrmps-3.6.0/module/AzureRM.Resources/New-AzureRmRoleDefinition.html"},"themesRelativePathToOutputRoot":"_themes/"}