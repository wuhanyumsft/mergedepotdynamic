{"content":"\r\n<h1 id=\"azrmps_3_6_0_AzureRM_Sql_Set_AzureRmSqlServerAuditingPolicy_md\">Set-AzureRmSqlServerAuditingPolicy</h1>\r\n\r\n\r\n\t<div class=\"summary\">Changes the auditing policy of a SQL Database server.</div>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"syntax\">Syntax</h2>\r\n\t\t<pre class=\"syntax\"><code class=\"lang-powershell\" dir=\"ltr\">Set-AzureRmSqlServerAuditingPolicy [-ResourceGroupName] &lt;String&gt; [-AuditActionGroup &lt;AuditActionGroups[]&gt;]\r\n [-AuditType &lt;AuditType&gt;] [-EventType &lt;String[]&gt;] [-InformationAction &lt;ActionPreference&gt;]\r\n [-InformationVariable &lt;String&gt;] [-PassThru] [-RetentionInDays &lt;UInt32&gt;] -ServerName &lt;String&gt;\r\n [-StorageAccountName &lt;String&gt;] [-StorageKeyType &lt;String&gt;] [-TableIdentifier &lt;String&gt;] [-Confirm] [-WhatIf]\r\n [&lt;CommonParameters&gt;]</code></pre>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"description\">Description</h2>\r\n\t<p>The <strong>Set-AzureRmSqlServerAuditingPolicy</strong> cmdlet changes the auditing policy of an Azure SQL Database server.\nSpecify the <em>ResourceGroupName</em> and <em>ServerName</em> parameters to identify the server, the <em>StorageAccountName</em> parameter to specify the storage account for the audit logs, and the <em>StorageKeyType</em> parameter to define the storage keys to use.<br><br>You can also define retention for the audit logs table by setting the value of the <em>RetentionInDays</em> and <em>TableIdentifier</em> parameters to define the period and the seed for the audit log table names.\nSpecify the <em>EventType</em> parameter to define which event types to audit.\nAfter you run this cmdlet, auditing of the databases that use the policy of this server is enabled.\nIf the cmdlet succeeds and you specify the <em>PassThru</em> parameter, the cmdlet returns an object that describes the current auditing policy, and the server identifiers.\nServer identifiers include <strong>ResourceGroupName</strong> and <strong>ServerName</strong>.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"examples\">Examples</h2>\r\n\t<p><strong>Example 1: Set the auditing policy of an Azure SQL server use Table auditing</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>Set-AzureRmSqlServerAuditingPolicy -ResourceGroupName \"ResourceGroup01\" -ServerName \"Server01\" -AuditType Table -StorageAccountName \"Storage22\"</code></pre>\r\n\t<p>This command sets the auditing policy of the server named Server01 to use a storage account named Storage22.</p>\n\r\n\t<p><strong>Example 2: Set the storage account key of an existing auditing policy of an Azure SQL server</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>Set-AzureRmSqlServerAuditingPolicy -ResourceGroupName \"ResourceGroup01\" -ServerName \"Server01\" -StorageAccountKey Secondary</code></pre>\r\n\t<p>This command sets the auditing policy of the server named Server01 to use the secondary key.\nThe command does not modify the storage account name.</p>\n\r\n\t<p><strong>Example 3: Set the auditing policy of an Azure SQL server to use a specific event type</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>Set-AzureRmSqlServerAuditingPolicy -ResourceGroupName \"ResourceGroup01\" -ServerName \"Server01\" -EventType Login_Failure</code></pre>\r\n\t\r\n\t<p><strong>Example 4: Set the auditing policy of a database to use Blob auditing</strong></p>\r\n\t\r\n\t<pre><code class=\"lang-powershell\">PS C:\\>Set-AzureRmSqlDatabaseAuditingPolicy -ResourceGroupName \"ResourceGroup01\" -ServerName \"Server01\" -AuditType Blob -StorageAccountName \"Storage31\" -AuditActionGroup \"SUCCESSFUL_DATABASE_AUTHENTICATION_GROUP\", \"FAILED_DATABASE_AUTHENTICATION_GROUP\" -RetentionInDays 8</code></pre>\r\n\t<p>This command sets the auditing policy of the server named Server01 to use the Login_Failure event type.\nThis command does not modify any other setting.</p>\n\r\n\r\n\t<h2 class=\"cli\" id=\"parameters\">Parameters</h2>\r\n  <div class=\"parameterName\">-AuditActionGroup</div>\r\n\t<div class=\"parameterSummary\"><p>You can specify several event types.\nYou can specify All to audit all of the event types or None to specify that no events will be audited.\nIf you specify All or None at the same time, the command fails.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>AuditActionGroups[]</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-AuditType</div>\r\n\t<div class=\"parameterSummary\"><p>You can specify several event types.\nYou can specify All to audit all of the event types or None to specify that no events will be audited.\nIf you specify All or None at the same time, the command fails.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>AuditType</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-EventType</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the event types to audit.\nThe acceptable values for this parameter are:<br><br>- PlainSQL_Success</p>\n<ul>\n<li>PlainSQL_Failure</li>\n<li>ParameterizedSQL_Success</li>\n<li>ParameterizedSQL_Failure</li>\n<li>StoredProcedure_Success</li>\n<li>StoredProcedure_Failure</li>\n<li>Login_Success</li>\n<li>Login_Failure </li>\n<li>TransactionManagement_Success</li>\n<li>TransactionManagement_Failure</li>\n<li>All</li>\n<li>None<br><br>You can specify several event types.\nYou can specify All to audit all of the event types or None to specify that no events will be audited.\nIf you specify All or None at the same time, the command fails.<br><br></li>\n</ul>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String[]</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-InformationAction</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies how this cmdlet responds to an information event.<br><br>The acceptable values for this parameter are:<br><br>- Continue</p>\n<ul>\n<li>Ignore</li>\n<li>Inquire</li>\n<li>SilentlyContinue</li>\n<li>Stop</li>\n<li>Suspend<br><br></li>\n</ul>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>ActionPreference</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>infa</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-InformationVariable</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies an information variable.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>iv</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-PassThru</div>\r\n\t<div class=\"parameterSummary\"><p>Returns an object representing the item with which you are working.\nBy default, this cmdlet does not generate any output.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-ResourceGroupName</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the name of the resource group that contains the database.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>0</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-RetentionInDays</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the number of retention days for the audit logs table.\nA value of zero (0) means that the table is not retained.\nthis is the default.\nIf you specify a value greater than zero, you must also specify a value for the <em>TableIdentifer</em> parameter.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>UInt32</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-ServerName</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the name of the server that contains the database.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>True</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-StorageAccountName</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the name of the storage account for auditing the database.\nWildcard characters are not permitted.\nIf you do not specify this parameter, the cmdlet uses the storage account that was defined previously as part of the auditing policy of the database.\nIf this is the first time a database auditing policy is defined and you do not specify this parameter, the command fails.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-StorageKeyType</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies which of the storage access keys to use.\nThe acceptable values for this parameter are:<br><br>- Primary</p>\n<ul>\n<li>Secondary<br><br>The default value is Primary.<br><br></li>\n</ul>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-TableIdentifier</div>\r\n\t<div class=\"parameterSummary\"><p>Specifies the name of the audit logs table.\nSpecify this value if you specify a value greater than zero for the <em>RetentionInDays</em> parameter.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>String</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>None</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>True (ByPropertyName)</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-Confirm</div>\r\n\t<div class=\"parameterSummary\"><p>Prompts you for confirmation before running the cmdlet.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>cf</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n  <div class=\"parameterName\">-WhatIf</div>\r\n\t<div class=\"parameterSummary\"><p>Shows what would happen if the cmdlet runs.\nThe cmdlet is not run.<br><br></p>\n</div>\r\n  <div class=\"parameterSummary\">\r\n\t<table class=\"nameValue\">\r\n\t\t<tr><td>Type:</td><td>SwitchParameter</td></tr>\r\n\t\t<tr><td>Aliases:</td><td>wi</td></tr>\r\n\t\t<tr><td>Required:</td><td>False</td></tr>\r\n\t\t<tr><td>Position:</td><td>Named</td></tr>\r\n\t\t<tr><td>Default value:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept pipeline input:</td><td>False</td></tr>\r\n\t\t<tr><td>Accept wildcard characters:</td><td>False</td></tr>\r\n\t</table>  \r\n  </div>\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"outputs\">Outputs</h2>\r\n\t\t<p><strong>Microsoft.Azure.Commands.Sql.Security.Model.ServerAuditingPolicyModel</strong></p>\r\n\t\r\n\r\n\r\n\t<h2 class=\"cli\" id=\"related-links\">Related Links</h2>\r\n\t<ul class=\"list-clean\">\r\n\t<li><a href=\"./get-azurermsqlserverauditingpolicy\" data-linktype=\"relative-path\">Get-AzureRmSqlServerAuditingPolicy</a></li>\r\n\t<li><a href=\"./use-azurermsqlserverauditingpolicy\" data-linktype=\"relative-path\">Use-AzureRmSqlServerAuditingPolicy</a></li>\r\n\t<li><a href=\"./azurerm.sql\" data-linktype=\"relative-path\">Azure SQL Database Cmdlets</a></li>\r\n\t</ul>\r\n","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"description\" content=\"Changes the auditing policy of a SQL Database server.\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"PowerShell\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"PowerShell\">\r\n<meta name=\"depot_name\" content=\"PowerShell.PowerShell\">\r\n<meta name=\"ms.gitsourceurl\" content=\"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Sql/Set-AzureRmSqlServerAuditingPolicy.md\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"external_help_file\" content=\"Microsoft.Azure.Commands.Sql.dll-Help.xml\">\r\n<meta name=\"ms.assetid\" content=\"4FCC7D8B-A46E-4E5B-8BE2-F62B3D3E715D\">\r\n<meta name=\"online_version\" content=\"\">\r\n<meta name=\"schema\" content=\"2.0.0\">\r\n<meta name=\"updated_at\" content=\"03/11/2017 23:03 PM\">\r\n<meta name=\"ms.date\" content=\"03/11/2017\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Sql/v2.6.0/Set-AzureRmSqlServerAuditingPolicy.md\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"PowerShellHelpPub\">\r\n<meta name=\"keywords\" content=\"powershell, cmdlet\">\r\n<meta name=\"toc_rel\" content=\"../toc2.json\">\r\n","rawMetadata":{"commandList":[],"description":"Changes the auditing policy of a SQL Database server.","search.ms_sitename":"Docs","search.ms_docsetname":"PowerShell","version":0,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/powershell/","locale":"en-us","site_name":"Docs","search.ms_product":"PowerShell","_op_openToPublicContributors":true,"depot_name":"PowerShell.PowerShell","open_to_public_contributors":true,"ms.gitsourceurl":"https://github.com/MicrosoftDocs/azure-powershell-docs/blob/master/azrmps/3.6.0/AzureRM.Sql/Set-AzureRmSqlServerAuditingPolicy.md","layout":"Conceptual","_op_layout":"Conceptual","pagetype":"Reference","title":"Set-AzureRmSqlServerAuditingPolicy | Microsoft Docs","_op_ogTitle":"Set-AzureRmSqlServerAuditingPolicy","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.sql/set-azurermsqlserverauditingpolicy","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/module/azurerm.sql/set-azurermsqlserverauditingpolicy","external_help_file":"Microsoft.Azure.Commands.Sql.dll-Help.xml","ms.assetid":"4FCC7D8B-A46E-4E5B-8BE2-F62B3D3E715D","online_version":"","schema":"2.0.0","updated_at":"03/11/2017 23:03 PM","ms.date":"03/11/2017","content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Sql/v2.6.0/Set-AzureRmSqlServerAuditingPolicy.md","original_content_git_url":"https://github.com/Azure/azure-docs-powershell/blob/master/azureps-cmdlets-docs/ResourceManager/AzureRM.Sql/v2.6.0/Set-AzureRmSqlServerAuditingPolicy.md","gitcommit":"https://github.com/Azure/azure-docs-powershell/blob/bc71000aa3c7f754b95442dcc415a7324626a15c","ms.topic":"reference","author":"erickson-doug","ms.author":"PowerShellHelpPub","keywords":"powershell, cmdlet","toc_asset_id":"azrmps-3.6.0/module/toc.json","toc_rel":"../toc.json","fileRelativePath":"azrmps-3.6.0/module/AzureRM.Sql/Set-AzureRmSqlServerAuditingPolicy.html"},"themesRelativePathToOutputRoot":"_themes/"}