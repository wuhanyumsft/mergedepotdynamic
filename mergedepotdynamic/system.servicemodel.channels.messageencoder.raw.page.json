{"content":"    \r\n    <h1 id=\"System_ServiceModel_Channels_MessageEncoder\">\r\n      <span class=\"lang-csharp\">MessageEncoder</span>\r\n        Class\r\n    </h1>\r\n    \r\n    \r\n    <nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n      <h3>In this Article</h3>\r\n    </nav><div class=\"summary\">\r\n    \t<p>The encoder is the component that is used to write messages to a stream and to read messages from a stream.</p>\n\r\n    </div><h2>Syntax</h2>\r\n    \r\n    \t<h3>Declaration</h3>\r\n    \t<pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract class MessageEncoder</code></pre>\r\n    \r\n    \r\n    \r\n    <h3>Inheritance Hierarchy</h3>\r\n    <ul class=\"inheritance\">\r\n        <li class=\"l0\">\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">System.Object</a>\r\n          </div>\r\n        </li>\r\n      <li class=\"l1\">\r\n        <div class=\"xref\">\r\n          <div class=\"lang-csharp\">MessageEncoder</div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    \r\n      <div class=\"referencebox inheritedMembers\">\r\n        <h3>Inherited Members</h3>\r\n        <h4></h4>\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_\" data-linktype=\"relative-path\">Equals(Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_System_Object_\" data-linktype=\"relative-path\">Equals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_GetHashCode\" data-linktype=\"relative-path\">GetHashCode()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_GetType\" data-linktype=\"relative-path\">GetType()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_MemberwiseClone\" data-linktype=\"relative-path\">MemberwiseClone()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ReferenceEquals_System_Object_System_Object_\" data-linktype=\"relative-path\">ReferenceEquals(Object,Object)</a>\r\n          </div>\r\n          \r\n      </div>\r\n    \r\n    \r\n      <h2>Remarks</h2>\r\n      <p>MessageEncoder is a base class that provides implementations that support a Multipurpose Internet Mail Extensions (MIME) content type and message version, and defines the interface for the serialization and deserialization of messages according to that content type. Use it as a base class for writing your own custom encoder.  </p>\n<p> Use this class if you want to implement a custom message encoder. To implement your own custom message encoder, you must provide custom implementations of the following abstract base classes:  </p>\n<ul>\n<li><a class=\"xref\" href=\"system.servicemodel.channels.messageencodingbindingelement\" data-linktype=\"relative-path\">MessageEncodingBindingElement</a>  \n</li>\n<li><a class=\"xref\" href=\"system.servicemodel.channels.messageencoderfactory\" data-linktype=\"relative-path\">MessageEncoderFactory</a>  \n</li>\n<li><p>MessageEncoder  </p>\n<p>Override the <a class=\"xref\" href=\"system.servicemodel.channels.messageencoderfactory#System_ServiceModel_Channels_MessageEncoderFactory_Encoder_\" data-linktype=\"relative-path\">Encoder</a> to return an instance of your custom MessageEncoder. Then wire up your custom <a class=\"xref\" href=\"system.servicemodel.channels.messageencoderfactory\" data-linktype=\"relative-path\">MessageEncoderFactory</a> to the binding element stack used to configure the service or client by overriding the <a class=\"xref\" href=\"system.servicemodel.channels.messageencodingbindingelement#System_ServiceModel_Channels_MessageEncodingBindingElement_CreateMessageEncoderFactory_\" data-linktype=\"relative-path\">CreateMessageEncoderFactory</a> method to return an instance of this factory.  </p>\n<p>The task of converting between the in-memory representation of a message and an XML Information Set (Infoset) representation that can be written to a stream is encapsulated within the MessageEncoder class, which most commonly serves as a factory for XML readers and XML writers that support specific types of XML encodings.  </p>\n<p>The key methods on MessageEncoder are <a class=\"xref\" href=\"system.servicemodel.channels.messageencoder#System_ServiceModel_Channels_MessageEncoder_WriteMessage_\" data-linktype=\"relative-path\">WriteMessage</a> and <a class=\"xref\" href=\"system.servicemodel.channels.messageencoder#System_ServiceModel_Channels_MessageEncoder_ReadMessage_\" data-linktype=\"relative-path\">ReadMessage</a>. <a class=\"xref\" href=\"system.servicemodel.channels.messageencoder#System_ServiceModel_Channels_MessageEncoder_WriteMessage_\" data-linktype=\"relative-path\">WriteMessage</a> takes a <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> object and writes it into a <a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a> object. <a class=\"xref\" href=\"system.servicemodel.channels.messageencoder#System_ServiceModel_Channels_MessageEncoder_ReadMessage_\" data-linktype=\"relative-path\">ReadMessage</a> takes a <a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a> object and a maximum header size and returns a <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> object.</p>\n</li>\n</ul>\n\r\n    \r\n    \r\n    <h2>Constructors\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder__ctor\" data-linktype=\"self-bookmark\">MessageEncoder()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.servicemodel.channels.messageencoder\" data-linktype=\"relative-path\">MessageEncoder</a> class.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Properties\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_ContentType\" data-linktype=\"self-bookmark\">ContentType</a></div>\r\n          </td>\r\n            <td>\r\n            <p>When overridden in a derived class, gets the MIME content type used by the encoder.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_MediaType\" data-linktype=\"self-bookmark\">MediaType</a></div>\r\n          </td>\r\n            <td>\r\n            <p>When overridden in a derived class, gets the media type value that is used by the encoder.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_MessageVersion\" data-linktype=\"self-bookmark\">MessageVersion</a></div>\r\n          </td>\r\n            <td>\r\n            <p>When overridden in a derived class, gets the message version value that is used by the encoder.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Methods\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_BeginWriteMessage_System_ServiceModel_Channels_Message_System_IO_Stream_System_AsyncCallback_System_Object_\" data-linktype=\"self-bookmark\">BeginWriteMessage(Message,Stream,AsyncCallback,Object)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Starts the writing of message for the message encoder with specified message, stream, callback and state.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_EndWriteMessage_System_IAsyncResult_\" data-linktype=\"self-bookmark\">EndWriteMessage(IAsyncResult)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Ends the writing of messages for the message encoder.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_GetProperty__1\" data-linktype=\"self-bookmark\">GetProperty&lt;T&gt;()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Returns a typed object requested, if present, from the appropriate layer in the channel stack.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_IsContentTypeSupported_System_String_\" data-linktype=\"self-bookmark\">IsContentTypeSupported(String)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Returns a value that indicates whether a specified message-level content-type value is supported by the message encoder.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_ReadMessage_System_ArraySegment_System_Byte__System_ServiceModel_Channels_BufferManager_\" data-linktype=\"self-bookmark\">ReadMessage(ArraySegment&lt;Byte&gt;,BufferManager)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>When overridden in a derived class, reads a message from a specified buffer.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_ReadMessage_System_IO_Stream_System_Int32_\" data-linktype=\"self-bookmark\">ReadMessage(Stream,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>When overridden in a derived class, reads a message from a specified stream.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_ReadMessage_System_ArraySegment_System_Byte__System_ServiceModel_Channels_BufferManager_System_String_\" data-linktype=\"self-bookmark\">ReadMessage(ArraySegment&lt;Byte&gt;,BufferManager,String)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>When overridden in a derived class, reads a message from a specified stream.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_ReadMessage_System_IO_Stream_System_Int32_System_String_\" data-linktype=\"self-bookmark\">ReadMessage(Stream,Int32,String)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>When overridden in a derived class, reads a message from a specified stream.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_ToString\" data-linktype=\"self-bookmark\">ToString()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Returns the content type that is used by the message encoder.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_WriteMessage_System_ServiceModel_Channels_Message_System_IO_Stream_\" data-linktype=\"self-bookmark\">WriteMessage(Message,Stream)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>When overridden in a derived class, writes a message to a specified stream.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_WriteMessage_System_ServiceModel_Channels_Message_System_Int32_System_ServiceModel_Channels_BufferManager_\" data-linktype=\"self-bookmark\">WriteMessage(Message,Int32,BufferManager)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Writes a message less than a specified size to a byte array buffer.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageEncoder_WriteMessage_System_ServiceModel_Channels_Message_System_Int32_System_ServiceModel_Channels_BufferManager_System_Int32_\" data-linktype=\"self-bookmark\">WriteMessage(Message,Int32,BufferManager,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>When overridden in a derived class, writes a message of less than a specified size to a byte array buffer at the specified offset.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"constructors\">\r\n        <h2>Constructors\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder__ctor\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">MessageEncoder()</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.servicemodel.channels.messageencoder\" data-linktype=\"relative-path\">MessageEncoder</a> class.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">protected MessageEncoder ();</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"properties\">\r\n        <h2>Properties\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_ContentType\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_ContentType_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">ContentType</div>        \r\n          </div>\r\n    \r\n            <p>When overridden in a derived class, gets the MIME content type used by the encoder.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract string ContentType { get; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </div>\r\n                  <p>The content type that is supported by the message encoder.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The content type is a Multipurpose Internet Mail Exchange (MIME) header that appears at the beginning of a MIME message as well as within the separate body parts. Content-type headers are used to specify the media type and subtype of data in the body of a message and to fully specify the media type and subtype of data in the body of a message and to specify the character encoding (optional) of the data. An example of a MIME content type that can be supported: â€œapplication/soap+xml; charset=â€™utf8â€™â€.  </p>\n<p> A grammar that details the syntax of the content-type header is described in <a href=\"http://go.microsoft.com/fwlink/?LinkId=95945\" data-linktype=\"external\">RFC 2045</a>, Section 5.1. <a href=\"http://go.microsoft.com/fwlink/?LinkId=95944\" data-linktype=\"external\">RFC 2046</a> provides detailed information on MIME media types and their parameters.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <pre><code class=\"lang-cs\" name=\"S_UE_CustomTextMessageEncoder#1\">        public override string ContentType\n        {\n            get\n            {\n                return this.contentType;\n            }\n        }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_MediaType\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_MediaType_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">MediaType</div>        \r\n          </div>\r\n    \r\n            <p>When overridden in a derived class, gets the media type value that is used by the encoder.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract string MediaType { get; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </div>\r\n                  <p>The media type that is supported by the message encoder.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The media type is part of the content-type header.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to implement the <code>MediaType</code> property.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UE_CustomTextMessageEncoder#2\">        public override string MediaType\n        {\n            get \n            {\n                return factory.MediaType;\n            }\n        }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_MessageVersion\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_MessageVersion_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">MessageVersion</div>        \r\n          </div>\r\n    \r\n            <p>When overridden in a derived class, gets the message version value that is used by the encoder.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract System.ServiceModel.Channels.MessageVersion MessageVersion { get; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.messageversion\" data-linktype=\"relative-path\">MessageVersion</a></div>\r\n                  </div>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.messageversion\" data-linktype=\"relative-path\">MessageVersion</a> that is used by the encoder.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Specifies the versions of SOAP and WS-Addressing associated with a message and its exchange. If SOAP versions are not to be used, this property should be overridden to return <a class=\"xref\" href=\"system.servicemodel.channels.messageversion#System_ServiceModel_Channels_MessageVersion_None_\" data-linktype=\"relative-path\">None</a>.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to implement the MessageVersion property.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UE_CustomTextMessageEncoder#3\">        public override MessageVersion MessageVersion\n        {\n            get \n            {\n                return this.factory.MessageVersion;\n            }\n        }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"methods\">\r\n        <h2>Methods\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_BeginWriteMessage_System_ServiceModel_Channels_Message_System_IO_Stream_System_AsyncCallback_System_Object_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_BeginWriteMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">BeginWriteMessage(Message,Stream,AsyncCallback,Object)</div>        \r\n          </div>\r\n    \r\n            <p>Starts the writing of message for the message encoder with specified message, stream, callback and state.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public virtual IAsyncResult BeginWriteMessage (System.ServiceModel.Channels.Message message, System.IO.Stream stream, AsyncCallback callback, object state);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>message</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The message.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>stream</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The stream.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>callback</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.asynccallback\" data-linktype=\"relative-path\">AsyncCallback</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The callback.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>state</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">System.Object</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The state.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.iasyncresult\" data-linktype=\"relative-path\">IAsyncResult</a></div>\r\n                  </div>\r\n                  <p>The asynchronous result of the operation.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_EndWriteMessage_System_IAsyncResult_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_EndWriteMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">EndWriteMessage(IAsyncResult)</div>        \r\n          </div>\r\n    \r\n            <p>Ends the writing of messages for the message encoder.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public virtual void EndWriteMessage (IAsyncResult result);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>result</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.iasyncresult\" data-linktype=\"relative-path\">IAsyncResult</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The result of the operation.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_GetProperty__1\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_GetProperty_T__\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetProperty&lt;T&gt;()</div>        \r\n          </div>\r\n    \r\n            <p>Returns a typed object requested, if present, from the appropriate layer in the channel stack.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public virtual T GetProperty&lt;T&gt; () where T : class;</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><span class=\"xref\">T</span></div>\r\n                  </div>\r\n                  <p>The typed object <code>T </code>requested if it is present or <code>null</code> if it is not.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Use this to request a typed object such as an interface for setting properties or getting status from the appropriate layer in the channel stack. If a layer supports returning the requested object, it returns it. If not, it delegates the call down to the next layer in the stack. If it gets to the bottom of the stack and no channel layer supported the requested object, then the method returns <code>null</code>.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_IsContentTypeSupported_System_String_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_IsContentTypeSupported_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">IsContentTypeSupported(String)</div>        \r\n          </div>\r\n    \r\n            <p>Returns a value that indicates whether a specified message-level content-type value is supported by the message encoder.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public virtual bool IsContentTypeSupported (string contentType);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>contentType</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The message-level content-type being tested.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.boolean\" data-linktype=\"relative-path\">Boolean</a></div>\r\n                  </div>\r\n                  <p><code>true</code> if the message-level content-type specified is supported; otherwise <code>false</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This method is used to determine whether the message encoder can be used to read a particular style of message, based on its content-type. The information in the <a class=\"xref\" href=\"system.net.mime.contenttype\" data-linktype=\"relative-path\">ContentType</a> class is used to describe the data that is contained in a message and is used to determine if there is a content-type match.  </p>\n<p> A grammar that details the syntax of the content-type header is described in <a href=\"http://go.microsoft.com/fwlink/?LinkId=95945\" data-linktype=\"external\">RFC 2045</a> Section 5.1. <a href=\"http://go.microsoft.com/fwlink/?LinkId=95944\" data-linktype=\"external\">RFC 2046</a> provides detailed information on Multipurpose Internet Mail Extensions (MIME) media types and their parameters.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code example shows how to override this method to handle different content types with the same media type.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UE_CustomTextMessageEncoder#8\">This snippet ID 8 is used in multiple files: /cs/customtextmessageencoder.cs, /cs/customtextmessageencoderfactory.cs. Rename the duplicate ID to make it unique, and update the reference to the snippet ID in the topic(s).\n</code></pre><pre><code class=\"lang-cs\" name=\"S_UE_CustomTextMessageEncoder#8\">This snippet ID 8 is used in multiple files: /cs/customtextmessageencoder.cs, /cs/customtextmessageencoderfactory.cs. Rename the duplicate ID to make it unique, and update the reference to the snippet ID in the topic(s).\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_ReadMessage_System_ArraySegment_System_Byte__System_ServiceModel_Channels_BufferManager_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_ReadMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">ReadMessage(ArraySegment&lt;Byte&gt;,BufferManager)</div>        \r\n          </div>\r\n    \r\n            <p>When overridden in a derived class, reads a message from a specified buffer.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public System.ServiceModel.Channels.Message ReadMessage (ArraySegment&lt;byte&gt; buffer, System.ServiceModel.Channels.BufferManager bufferManager);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>buffer</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.arraysegment-1\" data-linktype=\"relative-path\">ArraySegment</a>&lt;<a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>&gt;</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A <span class=\"xref\">stem.ArraySegment`1</span> of type <a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a> that provides the buffer from which the message is deserialized.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>bufferManager</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.buffermanager\" data-linktype=\"relative-path\">BufferManager</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.buffermanager\" data-linktype=\"relative-path\">BufferManager</a> that manages the buffer from which the message is deserialized.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a></div>\r\n                  </div>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> that is read from the buffer specified.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_ReadMessage_System_IO_Stream_System_Int32_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_ReadMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">ReadMessage(Stream,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>When overridden in a derived class, reads a message from a specified stream.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public System.ServiceModel.Channels.Message ReadMessage (System.IO.Stream stream, int maxSizeOfHeaders);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>stream</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a> object from which the message is read.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>maxSizeOfHeaders</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The maximum size of the headers that can be read from the message.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a></div>\r\n                  </div>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> that is read from the stream specified.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_ReadMessage_System_ArraySegment_System_Byte__System_ServiceModel_Channels_BufferManager_System_String_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_ReadMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">ReadMessage(ArraySegment&lt;Byte&gt;,BufferManager,String)</div>        \r\n          </div>\r\n    \r\n            <p>When overridden in a derived class, reads a message from a specified stream.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract System.ServiceModel.Channels.Message ReadMessage (ArraySegment&lt;byte&gt; buffer, System.ServiceModel.Channels.BufferManager bufferManager, string contentType);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>buffer</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.arraysegment-1\" data-linktype=\"relative-path\">ArraySegment</a>&lt;<a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>&gt;</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A <span class=\"xref\">stem.ArraySegment`1</span> of type <a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a> that provides the buffer from which the message is deserialized.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>bufferManager</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.buffermanager\" data-linktype=\"relative-path\">BufferManager</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.buffermanager\" data-linktype=\"relative-path\">BufferManager</a> that manages the buffer from which the message is deserialized.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>contentType</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The Multipurpose Internet Mail Extensions (MIME) message-level content-type.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a></div>\r\n                  </div>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> that is read from the stream specified.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code example shows how to implement the ReadMessage method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UE_CustomTextMessageEncoder#4\">        public override Message ReadMessage(ArraySegment&lt;byte&gt; buffer, BufferManager bufferManager, string contentType)\n        {   \n            byte[] msgContents = new byte[buffer.Count];\n            Array.Copy(buffer.Array, buffer.Offset, msgContents, 0, msgContents.Length);\n            bufferManager.ReturnBuffer(buffer.Array);\n\n            MemoryStream stream = new MemoryStream(msgContents);\n            return ReadMessage(stream, int.MaxValue);\n        }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_ReadMessage_System_IO_Stream_System_Int32_System_String_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_ReadMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">ReadMessage(Stream,Int32,String)</div>        \r\n          </div>\r\n    \r\n            <p>When overridden in a derived class, reads a message from a specified stream.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract System.ServiceModel.Channels.Message ReadMessage (System.IO.Stream stream, int maxSizeOfHeaders, string contentType);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>stream</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a> object from which the message is read.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>maxSizeOfHeaders</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The maximum size of the headers that can be read from the message.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>contentType</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The Multipurpose Internet Mail Extensions (MIME) message-level content-type.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a></div>\r\n                  </div>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> that is read from the stream specified.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code example shows how to implement the ReadMessage method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UE_CustomTextMessageEncoder#5\">        public override Message ReadMessage(Stream stream, int maxSizeOfHeaders, string contentType)\n        {\n            XmlReader reader = XmlReader.Create(stream);\n            return Message.CreateMessage(reader, maxSizeOfHeaders, this.MessageVersion);\n        }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_ToString\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_ToString_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">ToString()</div>        \r\n          </div>\r\n    \r\n            <p>Returns the content type that is used by the message encoder.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override string ToString ();</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </div>\r\n                  <p>The content type that is used by the message encoder.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_WriteMessage_System_ServiceModel_Channels_Message_System_IO_Stream_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_WriteMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">WriteMessage(Message,Stream)</div>        \r\n          </div>\r\n    \r\n            <p>When overridden in a derived class, writes a message to a specified stream.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract void WriteMessage (System.ServiceModel.Channels.Message message, System.IO.Stream stream);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>message</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> to write to the <code>stream</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>stream</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a> object to which the <code>message</code> is written.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to implement the WriteMessage method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UE_CustomTextMessageEncoder#7\">        public override void WriteMessage(Message message, Stream stream)\n        {\n            XmlWriter writer = XmlWriter.Create(stream, this.writerSettings);\n            message.WriteMessage(writer);\n            writer.Close();\n        }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_WriteMessage_System_ServiceModel_Channels_Message_System_Int32_System_ServiceModel_Channels_BufferManager_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_WriteMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">WriteMessage(Message,Int32,BufferManager)</div>        \r\n          </div>\r\n    \r\n            <p>Writes a message less than a specified size to a byte array buffer.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public ArraySegment&lt;byte&gt; WriteMessage (System.ServiceModel.Channels.Message message, int maxMessageSize, System.ServiceModel.Channels.BufferManager bufferManager);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>message</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> to write to the message buffer.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>maxMessageSize</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The maximum message size that can be written.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>bufferManager</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.buffermanager\" data-linktype=\"relative-path\">BufferManager</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.buffermanager\" data-linktype=\"relative-path\">BufferManager</a> that manages the buffer to which the message is written.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.arraysegment-1\" data-linktype=\"relative-path\">ArraySegment</a>&lt;<a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>&gt;</div>\r\n                  </div>\r\n                  <p>A <span class=\"xref\">stem.ArraySegment`1</span> of type <code>byte</code> that provides the buffer to which the message is serialized.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This method calls the abstract method <a class=\"xref\" href=\"system.servicemodel.channels.messageencoder#System_ServiceModel_Channels_MessageEncoder_WriteMessage_System_ServiceModel_Channels_Message_System_Int32_System_ServiceModel_Channels_BufferManager_System_Int32_\" data-linktype=\"relative-path\">WriteMessage(Message,Int32,BufferManager,Int32)</a> with <code>messageOffset</code> = 0.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageEncoder_WriteMessage_System_ServiceModel_Channels_Message_System_Int32_System_ServiceModel_Channels_BufferManager_System_Int32_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageEncoder_WriteMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">WriteMessage(Message,Int32,BufferManager,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>When overridden in a derived class, writes a message of less than a specified size to a byte array buffer at the specified offset.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract ArraySegment&lt;byte&gt; WriteMessage (System.ServiceModel.Channels.Message message, int maxMessageSize, System.ServiceModel.Channels.BufferManager bufferManager, int messageOffset);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>message</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> to write to the message buffer.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>maxMessageSize</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The maximum message size that can be written.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>bufferManager</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.buffermanager\" data-linktype=\"relative-path\">BufferManager</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"system.servicemodel.channels.buffermanager\" data-linktype=\"relative-path\">BufferManager</a> that manages the buffer to which the message is written.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>messageOffset</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The offset of the segment that begins from the start of the byte array that provides the buffer.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.arraysegment-1\" data-linktype=\"relative-path\">ArraySegment</a>&lt;<a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>&gt;</div>\r\n                  </div>\r\n                  <p>A <span class=\"xref\">stem.ArraySegment`1</span> of type <code>byte</code> that provides the buffer to which the message is serialized.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This method is called by WriteMessage.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code shows how to implement the WriteMessage method.  </p>\n<pre><code class=\"lang-cs\" name=\"S_UE_CustomTextMessageEncoder#6\">        public override ArraySegment&lt;byte&gt; WriteMessage(Message message, int maxMessageSize, BufferManager bufferManager, int messageOffset)\n        {\n            MemoryStream stream = new MemoryStream();\n            XmlWriter writer = XmlWriter.Create(stream, this.writerSettings);\n            message.WriteMessage(writer);\n            writer.Close();\n            \n            byte[] messageBytes = stream.GetBuffer();\n            int messageLength = (int)stream.Position;\n            stream.Close();\n\n            int totalLength = messageLength + messageOffset;\n            byte[] totalBytes = bufferManager.TakeBuffer(totalLength);\n            Array.Copy(messageBytes, 0, totalBytes, messageOffset, messageLength);\n\n            ArraySegment&lt;byte&gt; byteArray = new ArraySegment&lt;byte&gt;(totalBytes, messageOffset, messageLength);\n            return byteArray;\n        }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n","outputRootRelativePath":"./","pageMetadata":"<meta name=\"breadcrumb_path\" content=\"breadcrumb/toc1.json\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"fulldocset\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.fulldocset\">\r\n<meta name=\"ref_skeleton_gitcommit\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.ServiceModel.Channels.MessageEncoder.yml\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.ServiceModel.Channels.MessageEncoder.yml\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder..ctor\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.BeginWriteMessage\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.ContentType\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.EndWriteMessage\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.GetProperty&lt;T&gt;\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.IsContentTypeSupported\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.MediaType\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.MessageVersion\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.ReadMessage\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.ToString\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageEncoder.WriteMessage\">\r\n<meta name=\"APILocation\" content=\"System.ServiceModel.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-03-01 01:37 AM\">\r\n<meta name=\"document_id\" content=\"856b577d-bf33-9208-5674-e8c4d827c682\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"The encoder is the component that is used to write messages to a stream and to read messages from a stream.\n\">\r\n<meta name=\"toc_rel\" content=\"_splitted/System.ServiceModel.Channels/toc1.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"System.ServiceModel.Channels.MessageEncoder\">\r\n","rawMetadata":{"breadcrumb_path":"breadcrumb/toc.json","search.ms_sitename":"Docs","search.ms_docsetname":"fulldocset","version":null,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/fulldotnet/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":true,"depot_name":"MSDN.fulldocset","_op_gitRefSkeletonCommitHistory":[{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"use plugin in master","commit_sha":"501959ac03e19ac52a27aa4c6bbeb980f8b11c8c","commit_date":"2017-03-01 09:31:20 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"switch from platform to version","commit_sha":"78cdacb5ca782478af490a6b30c3a2cb2b6b873e","commit_date":"2017-02-28 15:09:51 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"update platforms","commit_sha":"39ad5a8919a59afc93a79ac4bd8e07c3b471b37a","commit_date":"2017-02-28 10:38:59 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"checkin yml","commit_sha":"da161b792852497df7140d7768cee2eccd9cb43f","commit_date":"2017-02-28 09:36:15 +0800"}],"ref_skeleton_gitcommit":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.ServiceModel.Channels.MessageEncoder.yml","original_ref_skeleton_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.ServiceModel.Channels.MessageEncoder.yml","open_to_public_contributors":true,"api_name":["System.ServiceModel.Channels.MessageEncoder","System.ServiceModel.Channels.MessageEncoder..ctor","System.ServiceModel.Channels.MessageEncoder.BeginWriteMessage","System.ServiceModel.Channels.MessageEncoder.ContentType","System.ServiceModel.Channels.MessageEncoder.EndWriteMessage","System.ServiceModel.Channels.MessageEncoder.GetProperty<T>","System.ServiceModel.Channels.MessageEncoder.IsContentTypeSupported","System.ServiceModel.Channels.MessageEncoder.MediaType","System.ServiceModel.Channels.MessageEncoder.MessageVersion","System.ServiceModel.Channels.MessageEncoder.ReadMessage","System.ServiceModel.Channels.MessageEncoder.ToString","System.ServiceModel.Channels.MessageEncoder.WriteMessage"],"api_location":["System.ServiceModel.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["System.ServiceModel.Channels.MessageEncoder","System::ServiceModel::Channels::MessageEncoder","System.ServiceModel.Channels.MessageEncoder.#ctor","System::ServiceModel::Channels::MessageEncoder::#ctor","System.ServiceModel.Channels.MessageEncoder.BeginWriteMessage","System::ServiceModel::Channels::MessageEncoder::BeginWriteMessage","System.ServiceModel.Channels.MessageEncoder.ContentType","System::ServiceModel::Channels::MessageEncoder::ContentType","System.ServiceModel.Channels.MessageEncoder.EndWriteMessage","System::ServiceModel::Channels::MessageEncoder::EndWriteMessage","System.ServiceModel.Channels.MessageEncoder.GetProperty``1","System::ServiceModel::Channels::MessageEncoder::GetProperty``1","System.ServiceModel.Channels.MessageEncoder.IsContentTypeSupported","System::ServiceModel::Channels::MessageEncoder::IsContentTypeSupported","System.ServiceModel.Channels.MessageEncoder.MediaType","System::ServiceModel::Channels::MessageEncoder::MediaType","System.ServiceModel.Channels.MessageEncoder.MessageVersion","System::ServiceModel::Channels::MessageEncoder::MessageVersion","System.ServiceModel.Channels.MessageEncoder.ReadMessage","System::ServiceModel::Channels::MessageEncoder::ReadMessage","System.ServiceModel.Channels.MessageEncoder.ToString","System::ServiceModel::Channels::MessageEncoder::ToString","System.ServiceModel.Channels.MessageEncoder.WriteMessage","System::ServiceModel::Channels::MessageEncoder::WriteMessage"],"dev_langs":["csharp"],"updated_at":"2017-03-01 01:37 AM","document_id":"856b577d-bf33-9208-5674-e8c4d827c682","content_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/xml/System.ServiceModel.Channels/MessageEncoder.xml","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"MessageEncoder class | Microsoft Docs","_op_ogTitle":"MessageEncoder class","description":"The encoder is the component that is used to write messages to a stream and to read messages from a stream.\n","toc_asset_id":"_splitted/System.ServiceModel.Channels/toc.json","toc_rel":"_splitted/System.ServiceModel.Channels/toc.json","source_url":"","ms.assetid":"System.ServiceModel.Channels.MessageEncoder","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.servicemodel.channels.messageencoder","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.servicemodel.channels.messageencoder","fileRelativePath":"System.ServiceModel.Channels.MessageEncoder.html"},"themesRelativePathToOutputRoot":"_themes/"}