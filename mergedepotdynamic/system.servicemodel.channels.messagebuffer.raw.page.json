{"content":"    \r\n    <h1 id=\"System_ServiceModel_Channels_MessageBuffer\">\r\n      <span class=\"lang-csharp\">MessageBuffer</span>\r\n        Class\r\n    </h1>\r\n    \r\n    \r\n    <nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n      <h3>In this Article</h3>\r\n    </nav><div class=\"summary\">\r\n    \t<p>Represents a memory buffer that stores an entire message for future consumption.</p>\n\r\n    </div><h2>Syntax</h2>\r\n    \r\n    \t<h3>Declaration</h3>\r\n    \t<pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract class MessageBuffer : IDisposable, System.Xml.XPath.IXPathNavigable</code></pre>\r\n    \r\n    \r\n    \r\n    <h3>Inheritance Hierarchy</h3>\r\n    <ul class=\"inheritance\">\r\n        <li class=\"l0\">\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">System.Object</a>\r\n          </div>\r\n        </li>\r\n      <li class=\"l1\">\r\n        <div class=\"xref\">\r\n          <div class=\"lang-csharp\">MessageBuffer</div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    \r\n      <div class=\"referencebox inheritedMembers\">\r\n        <h3>Inherited Members</h3>\r\n        <h4></h4>\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_\" data-linktype=\"relative-path\">Equals(Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_System_Object_\" data-linktype=\"relative-path\">Equals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_GetHashCode\" data-linktype=\"relative-path\">GetHashCode()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_GetType\" data-linktype=\"relative-path\">GetType()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_MemberwiseClone\" data-linktype=\"relative-path\">MemberwiseClone()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ReferenceEquals_System_Object_System_Object_\" data-linktype=\"relative-path\">ReferenceEquals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ToString\" data-linktype=\"relative-path\">ToString()</a>\r\n          </div>\r\n          \r\n      </div>\r\n    \r\n    \r\n      <h2>Remarks</h2>\r\n      <p>The body of a <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> instance can only be consumed or written once. If you wish to consume a <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> instance more than once, you should use the MessageBuffer class to completely store an entire <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> instance into memory.  </p>\n<p> A MessageBuffer instance is constructed by calling <a class=\"xref\" href=\"system.servicemodel.channels.message#System_ServiceModel_Channels_Message_CreateBufferedCopy_\" data-linktype=\"relative-path\">CreateBufferedCopy</a> of a <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> instance. A new MessageBuffer is then created and returned, which assumes ownership of the <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> and reads the entire content into memory.  </p>\n<p> In order to retrieve a copy of a <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> from the MessageBuffer, you must call the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer#System_ServiceModel_Channels_MessageBuffer_CreateMessage_\" data-linktype=\"relative-path\">CreateMessage</a> method of the MessageBuffer. This returns an identical copy of the original <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> instance you provided.  </p>\n<p> You can control the maximum size of the buffer by setting <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer#System_ServiceModel_Channels_MessageBuffer_BufferSize_\" data-linktype=\"relative-path\">BufferSize</a> to the maximum number of bytes desired. This number does not necessarily cover any transient allocations related to building the buffer, or properties attached to the message.  </p>\n<p> You should always close a MessageBuffer instance by calling <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer#System_ServiceModel_Channels_MessageBuffer_Close_\" data-linktype=\"relative-path\">Close</a> when finished working with it. This allows system resources to potentially be freed sooner.  </p>\n<p> Special note for Managed C++ users deriving from this class:  </p>\n<ul>\n<li><p>Put your cleanup code in (On)(Begin)Close (and/or OnAbort), not in a destructor.  </p>\n</li>\n<li><p>Avoid destructors: they cause the compiler to auto-generate <a class=\"xref\" href=\"system.idisposable\" data-linktype=\"relative-path\">IDisposable</a>  </p>\n</li>\n<li><p>Avoid non-reference members: they can cause the compiler to auto-generate <a class=\"xref\" href=\"system.idisposable\" data-linktype=\"relative-path\">IDisposable</a>  </p>\n</li>\n<li><p>Avoid finalizers; but if you include one, you should suppress the build warning and call <a class=\"xref\" href=\"system.gc#System_GC_SuppressFinalize_System_Object_\" data-linktype=\"relative-path\">SuppressFinalize(Object)</a> and the finalizer itself from (On)(Begin)Close (and/or OnAbort) in order to emulate what would have been the auto-generated <a class=\"xref\" href=\"system.idisposable\" data-linktype=\"relative-path\">IDisposable</a> behavior.</p>\n</li>\n</ul>\n\r\n    \r\n    \r\n    <h2>Constructors\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer__ctor\" data-linktype=\"self-bookmark\">MessageBuffer()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> class.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Properties\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_BufferSize\" data-linktype=\"self-bookmark\">BufferSize</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Gets the approximate number of bytes consumed by this <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a>.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_MessageContentType\" data-linktype=\"self-bookmark\">MessageContentType</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Gets the type of message content stored in this buffer.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Methods\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_Close\" data-linktype=\"self-bookmark\">Close()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Finishes working with the buffer.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_CreateMessage\" data-linktype=\"self-bookmark\">CreateMessage()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Returns a copy of the original message.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_CreateNavigator\" data-linktype=\"self-bookmark\">CreateNavigator()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates a new <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object. This method cannot be inherited.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_CreateNavigator_System_Int32_\" data-linktype=\"self-bookmark\">CreateNavigator(Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates a new <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object, with the navigator positioned on the node specified.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_CreateNavigator_System_Xml_XmlSpace_\" data-linktype=\"self-bookmark\">CreateNavigator(XmlSpace)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates a new <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object, with the specified <code>xml:space</code> scope.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_CreateNavigator_System_Int32_System_Xml_XmlSpace_\" data-linktype=\"self-bookmark\">CreateNavigator(Int32,XmlSpace)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Creates a new <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object, with the navigator positioned on the specified node and <code>xml:space</code> scope.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_WriteMessage_System_IO_Stream_\" data-linktype=\"self-bookmark\">WriteMessage(Stream)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Writes the entire content of this buffer to the specified IO stream.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Explicit Interface Implementations\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_ServiceModel_Channels_MessageBuffer_System_IDisposable_Dispose\" data-linktype=\"self-bookmark\">IDisposable.Dispose()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Releases the unmanaged resources used by the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> and optionally releases the managed resources. This method cannot be inherited.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"constructors\">\r\n        <h2>Constructors\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer__ctor\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">MessageBuffer()</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> class.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">protected MessageBuffer ();</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"properties\">\r\n        <h2>Properties\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_BufferSize\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_BufferSize_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">BufferSize</div>        \r\n          </div>\r\n    \r\n            <p>Gets the approximate number of bytes consumed by this <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a>.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract int BufferSize { get; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The approximate number of bytes consumed by this <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>You can control the maximum size of the buffer by setting BufferSize to the maximum number of bytes desired. This number does not necessarily cover any transient allocations related to building the buffer, or properties attached to the message. It is not related to the actual size of the message when serialized.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_MessageContentType\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_MessageContentType_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">MessageContentType</div>        \r\n          </div>\r\n    \r\n            <p>Gets the type of message content stored in this buffer.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public virtual string MessageContentType { get; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </div>\r\n                  <p>The type of message content stored in this buffer.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"methods\">\r\n        <h2>Methods\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_Close\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_Close_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Close()</div>        \r\n          </div>\r\n    \r\n            <p>Finishes working with the buffer.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract void Close ();</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>You should always close a <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> instance by calling Close when finished working with it. This allows system resources to potentially be freed sooner.  </p>\n<p> If you have called <a class=\"xref\" href=\"system.servicemodel.channels.message#System_ServiceModel_Channels_Message_CreateBufferedCopy_\" data-linktype=\"relative-path\">CreateBufferedCopy</a> to create a message buffer of a message, and inspected the message using <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer#System_ServiceModel_Channels_MessageBuffer_CreateMessage_\" data-linktype=\"relative-path\">CreateMessage</a>, you will get a <a class=\"xref\" href=\"system.invalidoperationexception\" data-linktype=\"relative-path\">InvalidOperationException</a> when you attempt to close the buffer using this method. To avoid this problem, you need to recreate the message from the buffer before closing. See the code sample in the Example section for a demonstration of the previous scenario and a way to resolve this problem.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example demonstrates how to properly close a message buffer.  </p>\n<pre><code>public void AfterReceiveReply(ref Message reply, object correlationState)  \n{  \n    // Create the buffer  \n    MessageBuffer buffer = reply.CreateBufferedCopy(13000);  \n    // Inspect the response (for example, extract the body contents)  \n    Message thisReply = buffer.CreateMessage();  \n    XmlDictionaryReader reader = thisReply.GetReaderAtBodyContents();  \n    StringBuilder info = new StringBuilder();  \n    XmlWriter writer = XmlWriter.Create(info);  \n    writer.WriteNode(reader, true);  \n    writer.Close();  \n    // Resolution:  Re-create the message from the buffer before  \n    // closing.  \n    reply = buffer.CreateMessage();  \n    // You can close the buffer after the message has been recreated.  \n    buffer.Close();\n</code></pre><p> }</p>\n\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_CreateMessage\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_CreateMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateMessage()</div>        \r\n          </div>\r\n    \r\n            <p>Returns a copy of the original message.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public abstract System.ServiceModel.Channels.Message CreateMessage ();</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a></div>\r\n                  </div>\r\n                  <p>An identical copy of the original <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> instance you previously provided to the <span class=\"xref\">stem.ServiceModel.Channels.Message.CreateBufferedCopy*</span> method of a <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> instance.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Calling this method creates an identical copy of the original <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> instance you previously provided to the <a class=\"xref\" href=\"system.servicemodel.channels.message#System_ServiceModel_Channels_Message_CreateBufferedCopy_\" data-linktype=\"relative-path\">CreateBufferedCopy</a> method of a <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a> instance. You can then save the message to a durable storage.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_CreateNavigator\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_CreateNavigator_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateNavigator()</div>        \r\n          </div>\r\n    \r\n            <p>Creates a new <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object. This method cannot be inherited.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public System.Xml.XPath.XPathNavigator CreateNavigator ();</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a></div>\r\n                  </div>\r\n                  <p>An <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Use this method if you want to manipulate just a portion of the message copy.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_CreateNavigator_System_Int32_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_CreateNavigator_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateNavigator(Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Creates a new <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object, with the navigator positioned on the node specified.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public System.Xml.XPath.XPathNavigator CreateNavigator (int nodeQuota);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>nodeQuota</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The location you want the navigator to be positioned on initially.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a></div>\r\n                  </div>\r\n                  <p>An <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Use this method if you want to manipulate just a portion of the message copy.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_CreateNavigator_System_Xml_XmlSpace_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_CreateNavigator_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateNavigator(XmlSpace)</div>        \r\n          </div>\r\n    \r\n            <p>Creates a new <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object, with the specified <code>xml:space</code> scope.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public System.Xml.XPath.XPathNavigator CreateNavigator (System.Xml.XmlSpace space);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>space</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.xml.xmlspace\" data-linktype=\"relative-path\">XmlSpace</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A valid <a class=\"xref\" href=\"system.xml.xmlspace\" data-linktype=\"relative-path\">XmlSpace</a> space.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a></div>\r\n                  </div>\r\n                  <p>An <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Use this method if you want to manipulate just a portion of the message copy.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_CreateNavigator_System_Int32_System_Xml_XmlSpace_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_CreateNavigator_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CreateNavigator(Int32,XmlSpace)</div>        \r\n          </div>\r\n    \r\n            <p>Creates a new <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object, with the navigator positioned on the specified node and <code>xml:space</code> scope.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public System.Xml.XPath.XPathNavigator CreateNavigator (int nodeQuota, System.Xml.XmlSpace space);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>nodeQuota</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The location you want the navigator to be positioned on initially.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>space</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.xml.xmlspace\" data-linktype=\"relative-path\">XmlSpace</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>A valid <a class=\"xref\" href=\"system.xml.xmlspace\" data-linktype=\"relative-path\">XmlSpace</a> space.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a></div>\r\n                  </div>\r\n                  <p>An <a class=\"xref\" href=\"system.xml.xpath.xpathnavigator\" data-linktype=\"relative-path\">XPathNavigator</a> object for navigating this object.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Use this method if you want to manipulate just a portion of the message copy.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_WriteMessage_System_IO_Stream_\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_WriteMessage_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">WriteMessage(Stream)</div>        \r\n          </div>\r\n    \r\n            <p>Writes the entire content of this buffer to the specified IO stream.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public virtual void WriteMessage (System.IO.Stream stream);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>stream</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.io.stream\" data-linktype=\"relative-path\">Stream</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>An IO stream that the entire content of this buffer is written to.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This function uses a binary encoder instead of a UTF-8 encoder. Therefore, you cannot directly convert from a <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> to a <a class=\"xref\" href=\"system.servicemodel.channels.message\" data-linktype=\"relative-path\">Message</a>. The code in the example section shows how to work around this problem.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <pre><code>private byte[] ConvertMessageToByteArray(ref Message message)   \n{  \n....//Memory stream that contains the message  \n....MemoryStream stream = new MemoryStream();  \n....//Create an XmlWriter to serialize the message into a byte array  \n....XmlWriterSettings settings = new XmlWriterSettings();  \n....settings.Encoding = System.Text.Encoding.UTF8;  \n....XmlWriter writer = XmlWriter.Create(stream, settings);  \n....//Copy the message into a buffer   \n....//Note: This call changes the original message&#39;s state  \n....MessageBuffer buffer = message.CreateBufferedCopy(int.MaxValue);  \n....//Create a copy of the message  \n....message = buffer.CreateMessage();  \n....//Serialize the message to the XmlWriter   \n....message.WriteMessage(writer);  \n....//Recreate the message   \n....message = buffer.CreateMessage();  \n....//Flush the contents of the writer so that the stream gets updated  \n....writer.Flush();  \n....stream.Flush();  \n....//Convert the stream to an array  \n....byte[] retval = stream.ToArray();  \n    return retval;  \n}\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"eii\">\r\n        <h2>Explicit Interface Implementations\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_ServiceModel_Channels_MessageBuffer_System_IDisposable_Dispose\">\r\n    \r\n            <a id=\"System_ServiceModel_Channels_MessageBuffer_System_IDisposable_Dispose_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">IDisposable.Dispose()</div>        \r\n          </div>\r\n    \r\n            <p>Releases the unmanaged resources used by the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> and optionally releases the managed resources. This method cannot be inherited.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">void IDisposable.Dispose ();</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Call this method when you are finished using the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a>. This method leaves the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> in an unusable state. After calling this method, you must release all references to the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> so the garbage collector can reclaim the memory that the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> was occupying.  </p>\n<div class=\"NOTE\"><h5>Note</h5><p> Always call this method before you release your last reference to the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a>. Otherwise, the resources it is using are not freed until the garbage collector calls the <a class=\"xref\" href=\"system.servicemodel.channels.messagebuffer\" data-linktype=\"relative-path\">MessageBuffer</a> object&#39;s <code>Finalize</code> method.</p>\n</div>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n","outputRootRelativePath":"./","pageMetadata":"<meta name=\"breadcrumb_path\" content=\"breadcrumb/toc.json\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"fulldocset\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.fulldocset\">\r\n<meta name=\"ref_skeleton_gitcommit\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.ServiceModel.Channels.MessageBuffer.yml\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.ServiceModel.Channels.MessageBuffer.yml\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageBuffer\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageBuffer..ctor\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageBuffer.BufferSize\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageBuffer.Close\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageBuffer.CreateMessage\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageBuffer.CreateNavigator\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageBuffer.MessageContentType\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageBuffer.IDisposable.Dispose\">\r\n<meta name=\"APIName\" content=\"System.ServiceModel.Channels.MessageBuffer.WriteMessage\">\r\n<meta name=\"APILocation\" content=\"System.ServiceModel.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-03-01 01:37 AM\">\r\n<meta name=\"document_id\" content=\"14944a59-7bdf-0bbd-f94f-3f09dc518155\">\r\n<meta name=\"original_ecmaxml_local_path\" content=\"W:\\vejk\\s\\fulldocset\\xml\\System.ServiceModel.Channels\\MessageBuffer.xml\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"Represents a memory buffer that stores an entire message for future consumption.\n\">\r\n<meta name=\"toc_rel\" content=\"_splitted/System.ServiceModel.Channels/toc1.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"System.ServiceModel.Channels.MessageBuffer\">\r\n","rawMetadata":{"breadcrumb_path":"breadcrumb/toc.json","search.ms_sitename":"Docs","search.ms_docsetname":"fulldocset","version":null,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/fulldotnet/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":true,"depot_name":"MSDN.fulldocset","_op_gitRefSkeletonCommitHistory":[{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"use plugin in master","commit_sha":"501959ac03e19ac52a27aa4c6bbeb980f8b11c8c","commit_date":"2017-03-01 09:31:20 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"switch from platform to version","commit_sha":"78cdacb5ca782478af490a6b30c3a2cb2b6b873e","commit_date":"2017-02-28 15:09:51 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"update platforms","commit_sha":"39ad5a8919a59afc93a79ac4bd8e07c3b471b37a","commit_date":"2017-02-28 10:38:59 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"checkin yml","commit_sha":"da161b792852497df7140d7768cee2eccd9cb43f","commit_date":"2017-02-28 09:36:15 +0800"}],"ref_skeleton_gitcommit":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.ServiceModel.Channels.MessageBuffer.yml","original_ref_skeleton_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.ServiceModel.Channels.MessageBuffer.yml","open_to_public_contributors":true,"api_name":["System.ServiceModel.Channels.MessageBuffer","System.ServiceModel.Channels.MessageBuffer..ctor","System.ServiceModel.Channels.MessageBuffer.BufferSize","System.ServiceModel.Channels.MessageBuffer.Close","System.ServiceModel.Channels.MessageBuffer.CreateMessage","System.ServiceModel.Channels.MessageBuffer.CreateNavigator","System.ServiceModel.Channels.MessageBuffer.MessageContentType","System.ServiceModel.Channels.MessageBuffer.IDisposable.Dispose","System.ServiceModel.Channels.MessageBuffer.WriteMessage"],"api_location":["System.ServiceModel.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["System.ServiceModel.Channels.MessageBuffer","System::ServiceModel::Channels::MessageBuffer","System.ServiceModel.Channels.MessageBuffer.#ctor","System::ServiceModel::Channels::MessageBuffer::#ctor","System.ServiceModel.Channels.MessageBuffer.BufferSize","System::ServiceModel::Channels::MessageBuffer::BufferSize","System.ServiceModel.Channels.MessageBuffer.Close","System::ServiceModel::Channels::MessageBuffer::Close","System.ServiceModel.Channels.MessageBuffer.CreateMessage","System::ServiceModel::Channels::MessageBuffer::CreateMessage","System.ServiceModel.Channels.MessageBuffer.CreateNavigator","System::ServiceModel::Channels::MessageBuffer::CreateNavigator","System.ServiceModel.Channels.MessageBuffer.MessageContentType","System::ServiceModel::Channels::MessageBuffer::MessageContentType","System.ServiceModel.Channels.MessageBuffer.System#IDisposable#Dispose","System::ServiceModel::Channels::MessageBuffer::System#IDisposable#Dispose","System.ServiceModel.Channels.MessageBuffer.WriteMessage","System::ServiceModel::Channels::MessageBuffer::WriteMessage"],"dev_langs":["csharp"],"updated_at":"2017-03-01 01:37 AM","document_id":"14944a59-7bdf-0bbd-f94f-3f09dc518155","original_ecmaxml_local_path":"W:\\vejk\\s\\fulldocset\\xml\\System.ServiceModel.Channels\\MessageBuffer.xml","content_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/xml/System.ServiceModel.Channels/MessageBuffer.xml","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"MessageBuffer class | Microsoft Docs","_op_ogTitle":"MessageBuffer class","description":"Represents a memory buffer that stores an entire message for future consumption.\n","toc_asset_id":"_splitted/System.ServiceModel.Channels/toc.json","toc_rel":"_splitted/System.ServiceModel.Channels/toc.json","source_url":"","ms.assetid":"System.ServiceModel.Channels.MessageBuffer","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.servicemodel.channels.messagebuffer","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.servicemodel.channels.messagebuffer","fileRelativePath":"System.ServiceModel.Channels.MessageBuffer.html"},"themesRelativePathToOutputRoot":"_themes/"}