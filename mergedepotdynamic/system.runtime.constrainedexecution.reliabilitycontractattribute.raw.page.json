{"content":"    \r\n    <h1 id=\"System_Runtime_ConstrainedExecution_ReliabilityContractAttribute\">\r\n      <span class=\"lang-csharp\">ReliabilityContractAttribute</span>\r\n        Class\r\n    </h1>\r\n    \r\n    \r\n    <nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n      <h3>In this Article</h3>\r\n    </nav><div class=\"summary\">\r\n    \t<p>Defines a contract for reliability between the author of some code, and the developers who have a dependency on that code.</p>\n\r\n    </div><h2>Syntax</h2>\r\n    \r\n    \t<h3>Declaration</h3>\r\n    \t<pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">[System.AttributeUsage(System.AttributeTargets.Assembly | System.AttributeTargets.Class | System.AttributeTargets.Struct | System.AttributeTargets.Constructor | System.AttributeTargets.Method | System.AttributeTargets.Interface, Inherited=false)]\npublic sealed class ReliabilityContractAttribute : Attribute</code></pre>\r\n    \r\n    \r\n    \r\n    <h3>Inheritance Hierarchy</h3>\r\n    <ul class=\"inheritance\">\r\n        <li class=\"l0\">\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">Object</a>\r\n          </div>\r\n        </li>\r\n        <li class=\"l1\">\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute\" data-linktype=\"relative-path\">System.Attribute</a>\r\n          </div>\r\n        </li>\r\n      <li class=\"l2\">\r\n        <div class=\"xref\">\r\n          <div class=\"lang-csharp\">ReliabilityContractAttribute</div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    \r\n      <div class=\"referencebox inheritedMembers\">\r\n        <h3>Inherited Members</h3>\r\n        <h4></h4>\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_Equals_System_Object_\" data-linktype=\"relative-path\">Equals(Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttribute_System_Reflection_Assembly_System_Type_\" data-linktype=\"relative-path\">GetCustomAttribute(Assembly,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttribute_System_Reflection_Assembly_System_Type_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttribute(Assembly,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttribute_System_Reflection_MemberInfo_System_Type_\" data-linktype=\"relative-path\">GetCustomAttribute(MemberInfo,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttribute_System_Reflection_MemberInfo_System_Type_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttribute(MemberInfo,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttribute_System_Reflection_Module_System_Type_\" data-linktype=\"relative-path\">GetCustomAttribute(Module,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttribute_System_Reflection_Module_System_Type_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttribute(Module,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttribute_System_Reflection_ParameterInfo_System_Type_\" data-linktype=\"relative-path\">GetCustomAttribute(ParameterInfo,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttribute_System_Reflection_ParameterInfo_System_Type_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttribute(ParameterInfo,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_Assembly_\" data-linktype=\"relative-path\">GetCustomAttributes(Assembly)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_Assembly_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttributes(Assembly,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_Assembly_System_Type_\" data-linktype=\"relative-path\">GetCustomAttributes(Assembly,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_Assembly_System_Type_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttributes(Assembly,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_MemberInfo_\" data-linktype=\"relative-path\">GetCustomAttributes(MemberInfo)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_MemberInfo_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttributes(MemberInfo,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_MemberInfo_System_Type_\" data-linktype=\"relative-path\">GetCustomAttributes(MemberInfo,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_MemberInfo_System_Type_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttributes(MemberInfo,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_Module_\" data-linktype=\"relative-path\">GetCustomAttributes(Module)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_Module_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttributes(Module,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_Module_System_Type_\" data-linktype=\"relative-path\">GetCustomAttributes(Module,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_Module_System_Type_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttributes(Module,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_ParameterInfo_\" data-linktype=\"relative-path\">GetCustomAttributes(ParameterInfo)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_ParameterInfo_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttributes(ParameterInfo,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_ParameterInfo_System_Type_\" data-linktype=\"relative-path\">GetCustomAttributes(ParameterInfo,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetCustomAttributes_System_Reflection_ParameterInfo_System_Type_System_Boolean_\" data-linktype=\"relative-path\">GetCustomAttributes(ParameterInfo,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_GetHashCode\" data-linktype=\"relative-path\">GetHashCode()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_IsDefaultAttribute\" data-linktype=\"relative-path\">IsDefaultAttribute()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_IsDefined_System_Reflection_Assembly_System_Type_\" data-linktype=\"relative-path\">IsDefined(Assembly,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_IsDefined_System_Reflection_Assembly_System_Type_System_Boolean_\" data-linktype=\"relative-path\">IsDefined(Assembly,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_IsDefined_System_Reflection_MemberInfo_System_Type_\" data-linktype=\"relative-path\">IsDefined(MemberInfo,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_IsDefined_System_Reflection_MemberInfo_System_Type_System_Boolean_\" data-linktype=\"relative-path\">IsDefined(MemberInfo,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_IsDefined_System_Reflection_Module_System_Type_\" data-linktype=\"relative-path\">IsDefined(Module,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_IsDefined_System_Reflection_Module_System_Type_System_Boolean_\" data-linktype=\"relative-path\">IsDefined(Module,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_IsDefined_System_Reflection_ParameterInfo_System_Type_\" data-linktype=\"relative-path\">IsDefined(ParameterInfo,Type)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_IsDefined_System_Reflection_ParameterInfo_System_Type_System_Boolean_\" data-linktype=\"relative-path\">IsDefined(ParameterInfo,Type,Boolean)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_Match_System_Object_\" data-linktype=\"relative-path\">Match(Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_System_Runtime_InteropServices__Attribute_GetIDsOfNames_System_Guid__System_IntPtr_System_UInt32_System_UInt32_System_IntPtr_\" data-linktype=\"relative-path\">_Attribute.GetIDsOfNames(Guid,IntPtr,UInt32,UInt32,IntPtr)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_System_Runtime_InteropServices__Attribute_GetTypeInfo_System_UInt32_System_UInt32_System_IntPtr_\" data-linktype=\"relative-path\">_Attribute.GetTypeInfo(UInt32,UInt32,IntPtr)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_System_Runtime_InteropServices__Attribute_GetTypeInfoCount_System_UInt32__\" data-linktype=\"relative-path\">_Attribute.GetTypeInfoCount(UInt32)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_System_Runtime_InteropServices__Attribute_Invoke_System_UInt32_System_Guid__System_UInt32_System_Int16_System_IntPtr_System_IntPtr_System_IntPtr_System_IntPtr_\" data-linktype=\"relative-path\">_Attribute.Invoke(UInt32,Guid,UInt32,Int16,IntPtr,IntPtr,IntPtr,IntPtr)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.attribute#System_Attribute_TypeId\" data-linktype=\"relative-path\">TypeId</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_System_Object_\" data-linktype=\"relative-path\">Equals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_GetType\" data-linktype=\"relative-path\">GetType()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_MemberwiseClone\" data-linktype=\"relative-path\">MemberwiseClone()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ReferenceEquals_System_Object_System_Object_\" data-linktype=\"relative-path\">ReferenceEquals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ToString\" data-linktype=\"relative-path\">ToString()</a>\r\n          </div>\r\n          \r\n      </div>\r\n    \r\n    \r\n      <h2>Remarks</h2>\r\n      <p>The ReliabilityContractAttribute attribute provides a mechanism for you to document your code, and to indicate what type of reliability guarantees you can make in the face of exceptional conditions that could potentially lead to an inconsistent state. In this context, exceptional conditions are defined as asynchronous exceptions that can be generated at run time by the common language runtime, such as aborted threads, out-of-memory situations, and stack overflows. You can apply the ReliabilityContractAttribute attribute to assemblies, types, and methods.  </p>\n<p> Use this attribute with the <a class=\"xref\" href=\"system.runtime.constrainedexecution.consistency\" data-linktype=\"relative-path\">Consistency</a> enumeration to define a reliability contract by documenting the level of reliability in a particular piece of code.</p>\n\r\n    \r\n    \r\n    <h2>Constructors\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Runtime_ConstrainedExecution_ReliabilityContractAttribute__ctor_System_Runtime_ConstrainedExecution_Consistency_System_Runtime_ConstrainedExecution_Cer_\" data-linktype=\"self-bookmark\">ReliabilityContractAttribute(Consistency,Cer)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.runtime.constrainedexecution.reliabilitycontractattribute\" data-linktype=\"relative-path\">ReliabilityContractAttribute</a> class with the specified <a class=\"xref\" href=\"system.runtime.constrainedexecution.consistency\" data-linktype=\"relative-path\">Consistency</a> guarantee and <a class=\"xref\" href=\"system.runtime.constrainedexecution.cer\" data-linktype=\"relative-path\">Cer</a> value.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Properties\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Runtime_ConstrainedExecution_ReliabilityContractAttribute_Cer\" data-linktype=\"self-bookmark\">Cer</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Gets the value that determines the behavior of a method, type, or assembly when called under a Constrained Execution Region (CER).</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Runtime_ConstrainedExecution_ReliabilityContractAttribute_ConsistencyGuarantee\" data-linktype=\"self-bookmark\">ConsistencyGuarantee</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Gets the value of the <a class=\"xref\" href=\"system.runtime.constrainedexecution.consistency\" data-linktype=\"relative-path\">Consistency</a> reliability contract.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"constructors\">\r\n        <h2>Constructors\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_Runtime_ConstrainedExecution_ReliabilityContractAttribute__ctor_System_Runtime_ConstrainedExecution_Consistency_System_Runtime_ConstrainedExecution_Cer_\">\r\n    \r\n            <a id=\"System_Runtime_ConstrainedExecution_ReliabilityContractAttribute__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">ReliabilityContractAttribute(Consistency,Cer)</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.runtime.constrainedexecution.reliabilitycontractattribute\" data-linktype=\"relative-path\">ReliabilityContractAttribute</a> class with the specified <a class=\"xref\" href=\"system.runtime.constrainedexecution.consistency\" data-linktype=\"relative-path\">Consistency</a> guarantee and <a class=\"xref\" href=\"system.runtime.constrainedexecution.cer\" data-linktype=\"relative-path\">Cer</a> value.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public ReliabilityContractAttribute (System.Runtime.ConstrainedExecution.Consistency consistencyGuarantee, System.Runtime.ConstrainedExecution.Cer cer);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>consistencyGuarantee</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.runtime.constrainedexecution.consistency\" data-linktype=\"relative-path\">Consistency</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>One of the <a class=\"xref\" href=\"system.runtime.constrainedexecution.consistency\" data-linktype=\"relative-path\">Consistency</a> values.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>cer</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.runtime.constrainedexecution.cer\" data-linktype=\"relative-path\">Cer</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>One of the <a class=\"xref\" href=\"system.runtime.constrainedexecution.cer\" data-linktype=\"relative-path\">Cer</a> values.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code example demonstrates the use of the ReliabilityContractAttribute constructor to create a constrained execution region and a <code>finally</code> block that is guaranteed to execute.  </p>\n<pre><code class=\"lang-vb\" name=\"System.Runtime.ConstrainedExecution#1\">Imports System.Threading\nImports System.Runtime.CompilerServices\nImports System.Runtime.ConstrainedExecution\n\n&#39; Demonstrate CERs using abrupt thread aborts. Demonstrate there\n&#39; is always a finally invocation for any CER that is entered.\nPublic Module Example\n   Public Function Main() As Integer\n      &#39; Run the test a few times--it is timing dependent. The argument \n      &#39; passed in is the stack depth to create.\n      For i As Integer = 0 To 999\n         If Not Test(i Mod 5)\n            Console.WriteLine(&quot;Failed&quot;)\n            Return 0\n         End If\n      Next\n      Console.WriteLine(&quot;Succeeded&quot;)\n      Return 100\n   End Function\n\n   &#39; Create a thread and tell it to create a stack of the required depth. \n   &#39; The first 3 levels will contain CERs, those after will not. Wait for \n   &#39; the thread to start up, but abort it immediately. The thread may be \n   &#39; in the process of setting the stack up at the point the abort occurs.\n   &#39; Check a state variable after the thread exits to determine if there is \n   &#39; a consistent state following the abort. Each level of the stack with a\n   &#39; CER maintains a consistency variable that is reset on entry to the try \n   &#39; and set in the corresponding finally block. None of these variables \n   &#39; should be in a reset state after aborting the thread.\n   Function Test(d As Integer) As Boolean\n      &#39; Create the context for the thread. This sets the stack depth for \n      &#39; the thread and gives the final consistency state after the abort.\n      Dim wu As New WorkUnit(d)\n\n      &#39; Create and start the thread.\n      Dim t As New Thread(AddressOf wu.StackDepth1)\n      t.Start()\n\n      &#39; Wait until the thread is ready to begin.\n      wu.wait.WaitOne()\n\n      &#39; Abort immediately. This will occassionally interrupt the thread \n      &#39; as it is setting up the stack, which is good.\n      t.Abort()\n\n      &#39; Wait for the thread to exit.\n      t.Join()\n\n      &#39; Check the final state for consistency.\n      Return wu.consistentLevel1\n   End Function\nEnd Module\n\n&#39; Context class for the thread worker.\nClass WorkUnit\n   Public wait As EventWaitHandle\n   Public consistentLevel1 As Boolean\n   Public consistentLevel2 As Boolean\n   Public consistentLevel3 As Boolean\n   Public depth As Integer\n\n   Public Sub New(d As Integer)\n      wait = New EventWaitHandle(False, EventResetMode.AutoReset)\n      depth = d\n   End Sub\n\n   Public Sub StackDepth1()\n      &#39; Declare the root CER.\n      RuntimeHelpers.PrepareConstrainedRegions()\n      Try\n         &#39; Cannot be interrupted until the event set below, so set up \n         &#39; for initial success. Level 1 consistency is achieved by \n         &#39; executing the finally the other two levels are assumed \n         &#39; consistent.\n         consistentLevel1 = False\n         consistentLevel2 = True\n         consistentLevel3 = True\n\n         &#39; Signal the parent thread. From this point on, the thread \n         &#39; can be aborted.\n         wait.Set()\n\n         &#39; Halt now if we want a one-level stack.\n         If depth = 1 Then Thread.Sleep(-1)\n\n         &#39; Else move to the next level.\n         StackDepth2()\n      Finally\n         &#39; We should always get here. Compute consistency based on \n         &#39; all the levels.\n         consistentLevel1 = consistentLevel2 And consistentLevel3\n      End Try\n   End Sub\n\n   &lt;ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)&gt;\n   &lt;MethodImpl(MethodImplOptions.NoInlining)&gt;\n   Sub StackDepth2()\n      Try\n         consistentLevel2 = False\n         If depth = 2 Then Thread.Sleep(-1)\n         StackDepth3()\n      Finally\n         consistentLevel2 = True\n      End Try\n   End Sub\n\n   &lt;ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)&gt;\n   &lt;MethodImpl(MethodImplOptions.NoInlining)&gt;\n   Sub StackDepth3()\n      Try\n         consistentLevel3 = False\n         if depth = 3 Then Thread.Sleep(-1)\n         StackDepth4()\n      Finally\n         consistentLevel3 = True\n      End Try\n   End Sub\n\n   &lt;MethodImpl(MethodImplOptions.NoInlining)&gt;\n   Sub StackDepth4()\n      If depth = 4 Then Thread.Sleep(-1)\n      StackDepth5()\n   End Sub\n\n   &lt;MethodImpl(MethodImplOptions.NoInlining)&gt;\n   Sub StackDepth5()\n        Thread.Sleep(-1)\n   End Sub\nEnd Class\n</code></pre><pre><code class=\"lang-cs\" name=\"System.Runtime.ConstrainedExecution#1\">using System;\nusing System.Threading;\nusing System.Runtime.CompilerServices;\nusing System.Runtime.ConstrainedExecution;\n\n// Demonstrate CERs using abrupt thread aborts. Demonstrate there\n// is always a finally invocation for any CER that is entered.\nclass AbruptThreadAbort\n{\n    public static int Main(String[] args)\n    {\n        // Run the test a few times--it is timing dependent. The argument \n        // passed in is the stack depth to create.\n        for (int i = 0; i &lt; 1000; i++)\n            if (!Test(i % 5))\n            {\n                Console.WriteLine(&quot;Failed&quot;);\n                return 0;\n            }\n\n        Console.WriteLine(&quot;Succeeded&quot;);\n        return 100;\n    }\n\n    // Create a thread and tell it to create a stack of the required depth. \n    // The first 3 levels will contain CERs, those after will not. Wait for \n    // the thread to start up, but abort it immediately. The thread may be \n    // in the process of setting the stack up at the point the abort occurs.\n    // Check a state variable after the thread exits to determine if there is \n    // a consistent state following the abort. Each level of the stack with a\n    // CER maintains a consistency variable that is reset on entry to the try \n    // and set in the corresponding finally block. None of these variables \n    // should be in a reset state after aborting the thread.\n    static bool Test(int d)\n    {\n        // Create the context for the thread. This sets the stack depth for \n        // the thread and gives the final consistency state after the abort.\n        WorkUnit wu = new WorkUnit(d);\n\n        // Create and start the thread.\n        Thread t = new Thread(new ThreadStart(wu.StackDepth1));\n        t.Start();\n\n        // Wait until the thread is ready to begin.\n        wu.wait.WaitOne();\n\n        // Abort immediately. This will occassionally interrupt the thread \n        // as it is setting up the stack, which is good.\n        t.Abort();\n\n        // Wait for the thread to exit.\n        t.Join();\n\n        // Check the final state for consistency.\n        return wu.consistentLevel1;\n    }\n}\n\n// Context class for the thread worker.\nclass WorkUnit\n{\n    public EventWaitHandle wait;\n    public bool consistentLevel1;\n    public bool consistentLevel2;\n    public bool consistentLevel3;\n    public int depth;\n\n    public WorkUnit(int d)\n    {\n        wait = new EventWaitHandle(false, EventResetMode.AutoReset);\n        depth = d;\n    }\n    public void StackDepth1()\n    {\n        // Declare the root CER.\n        RuntimeHelpers.PrepareConstrainedRegions();\n        try\n        {\n\n            // Cannot be interrupted until the event set below, so set up \n            // for initial success. Level 1 consistency is achieved by \n            // executing the finally; the other two levels are assumed \n            // consistent.\n            consistentLevel1 = false;\n            consistentLevel2 = true;\n            consistentLevel3 = true;\n\n            // Signal the parent thread. From this point on, the thread \n            // can be aborted.\n            wait.Set();\n\n            // Halt now if we want a one-level stack.\n            if (depth == 1)\n                Thread.Sleep(-1);\n\n            // Else move to the next level.\n            StackDepth2();\n\n        }\n        finally\n        {\n            // We should always get here. Compute consistency based on \n            // all the levels.\n            consistentLevel1 = consistentLevel2 &amp;&amp; consistentLevel3;\n        }\n    }\n\n    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]\n    [MethodImpl(MethodImplOptions.NoInlining)]\n    void StackDepth2()\n    {\n        try\n        {\n            consistentLevel2 = false;\n            if (depth == 2)\n                Thread.Sleep(-1);\n            StackDepth3();\n        }\n        finally\n        {\n            consistentLevel2 = true;\n        }\n    }\n    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]\n    [MethodImpl(MethodImplOptions.NoInlining)]\n    void StackDepth3()\n    {\n        try\n        {\n            consistentLevel3 = false;\n            if (depth == 3)\n                Thread.Sleep(-1);\n            StackDepth4();\n        }\n        finally\n        {\n            consistentLevel3 = true;\n        }\n    }\n\n    [MethodImpl(MethodImplOptions.NoInlining)]\n    void StackDepth4()\n    {\n        if (depth == 4)\n            Thread.Sleep(-1);\n        StackDepth5();\n    }\n\n    [MethodImpl(MethodImplOptions.NoInlining)]\n    void StackDepth5()\n    {\n        Thread.Sleep(-1);\n    }\n}\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"properties\">\r\n        <h2>Properties\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_Runtime_ConstrainedExecution_ReliabilityContractAttribute_Cer\">\r\n    \r\n            <a id=\"System_Runtime_ConstrainedExecution_ReliabilityContractAttribute_Cer_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Cer</div>        \r\n          </div>\r\n    \r\n            <p>Gets the value that determines the behavior of a method, type, or assembly when called under a Constrained Execution Region (CER).</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public System.Runtime.ConstrainedExecution.Cer Cer { get; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.runtime.constrainedexecution.cer\" data-linktype=\"relative-path\">Cer</a></div>\r\n                  </div>\r\n                  <p>One of the <a class=\"xref\" href=\"system.runtime.constrainedexecution.cer\" data-linktype=\"relative-path\">Cer</a> values.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Runtime_ConstrainedExecution_ReliabilityContractAttribute_ConsistencyGuarantee\">\r\n    \r\n            <a id=\"System_Runtime_ConstrainedExecution_ReliabilityContractAttribute_ConsistencyGuarantee_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">ConsistencyGuarantee</div>        \r\n          </div>\r\n    \r\n            <p>Gets the value of the <a class=\"xref\" href=\"system.runtime.constrainedexecution.consistency\" data-linktype=\"relative-path\">Consistency</a> reliability contract.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public System.Runtime.ConstrainedExecution.Consistency ConsistencyGuarantee { get; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.runtime.constrainedexecution.consistency\" data-linktype=\"relative-path\">Consistency</a></div>\r\n                  </div>\r\n                  <p>One of the <a class=\"xref\" href=\"system.runtime.constrainedexecution.consistency\" data-linktype=\"relative-path\">Consistency</a> values.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n","outputRootRelativePath":"./","pageMetadata":"<meta name=\"breadcrumb_path\" content=\"breadcrumb/toc.json\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"fulldocset\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.fulldocset\">\r\n<meta name=\"ref_skeleton_gitcommit\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.yml\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.yml\">\r\n<meta name=\"APIName\" content=\"System.Runtime.ConstrainedExecution.ReliabilityContractAttribute\">\r\n<meta name=\"APIName\" content=\"System.Runtime.ConstrainedExecution.ReliabilityContractAttribute..ctor\">\r\n<meta name=\"APIName\" content=\"System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.Cer\">\r\n<meta name=\"APIName\" content=\"System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.ConsistencyGuarantee\">\r\n<meta name=\"APILocation\" content=\"mscorlib.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-03-01 01:37 AM\">\r\n<meta name=\"document_id\" content=\"c5edd3a2-fdf0-8dcc-8468-280eab436c39\">\r\n<meta name=\"original_ecmaxml_local_path\" content=\"W:\\vejk\\s\\fulldocset\\xml\\System.Runtime.ConstrainedExecution\\ReliabilityContractAttribute.xml\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"Defines a contract for reliability between the author of some code, and the developers who have a dependency on that code.\n\">\r\n<meta name=\"toc_rel\" content=\"_splitted/System.Runtime.ConstrainedExecution/toc1.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"System.Runtime.ConstrainedExecution.ReliabilityContractAttribute\">\r\n","rawMetadata":{"breadcrumb_path":"breadcrumb/toc.json","search.ms_sitename":"Docs","search.ms_docsetname":"fulldocset","version":null,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/fulldotnet/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":true,"depot_name":"MSDN.fulldocset","_op_gitRefSkeletonCommitHistory":[{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"use plugin in master","commit_sha":"501959ac03e19ac52a27aa4c6bbeb980f8b11c8c","commit_date":"2017-03-01 09:31:20 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"switch from platform to version","commit_sha":"78cdacb5ca782478af490a6b30c3a2cb2b6b873e","commit_date":"2017-02-28 15:09:51 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"update platforms","commit_sha":"39ad5a8919a59afc93a79ac4bd8e07c3b471b37a","commit_date":"2017-02-28 10:38:59 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"checkin yml","commit_sha":"da161b792852497df7140d7768cee2eccd9cb43f","commit_date":"2017-02-28 09:36:15 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"delete ymls","commit_sha":"417c04fd1daf0cb211ec4909020356fc1fe69260","commit_date":"2017-02-27 14:12:48 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"update latest xml","commit_sha":"1e40a158586a88a698e0cb5342785002a56898b2","commit_date":"2017-02-24 16:20:57 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"transform see cref and fix paramref format","commit_sha":"3d0ea34483c97ac77f4020a7f294757d67a5c1d4","commit_date":"2017-02-23 10:03:17 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"fix param transform, fix escaped xref","commit_sha":"2af997a764c82488dfa824f1c7bc4d736757d943","commit_date":"2017-02-22 17:04:48 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"convert exceptions","commit_sha":"0a5bf3370731dd35a596c91081e5dc82e2eace3a","commit_date":"2017-02-22 11:54:30 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"remove _yml from url","commit_sha":"f9314af8858edb8c329d223328490093aef4f55f","commit_date":"2017-02-17 15:31:12 +0800"}],"ref_skeleton_gitcommit":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.yml","original_ref_skeleton_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.yml","open_to_public_contributors":true,"api_name":["System.Runtime.ConstrainedExecution.ReliabilityContractAttribute","System.Runtime.ConstrainedExecution.ReliabilityContractAttribute..ctor","System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.Cer","System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.ConsistencyGuarantee"],"api_location":["mscorlib.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["System.Runtime.ConstrainedExecution.ReliabilityContractAttribute","System::Runtime::ConstrainedExecution::ReliabilityContractAttribute","System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.#ctor","System::Runtime::ConstrainedExecution::ReliabilityContractAttribute::#ctor","System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.Cer","System::Runtime::ConstrainedExecution::ReliabilityContractAttribute::Cer","System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.ConsistencyGuarantee","System::Runtime::ConstrainedExecution::ReliabilityContractAttribute::ConsistencyGuarantee"],"dev_langs":["csharp"],"updated_at":"2017-03-01 01:37 AM","document_id":"c5edd3a2-fdf0-8dcc-8468-280eab436c39","original_ecmaxml_local_path":"W:\\vejk\\s\\fulldocset\\xml\\System.Runtime.ConstrainedExecution\\ReliabilityContractAttribute.xml","content_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/xml/System.Runtime.ConstrainedExecution/ReliabilityContractAttribute.xml","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"ReliabilityContractAttribute class | Microsoft Docs","_op_ogTitle":"ReliabilityContractAttribute class","description":"Defines a contract for reliability between the author of some code, and the developers who have a dependency on that code.\n","toc_asset_id":"_splitted/System.Runtime.ConstrainedExecution/toc.json","toc_rel":"_splitted/System.Runtime.ConstrainedExecution/toc.json","source_url":"","ms.assetid":"System.Runtime.ConstrainedExecution.ReliabilityContractAttribute","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.runtime.constrainedexecution.reliabilitycontractattribute","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.runtime.constrainedexecution.reliabilitycontractattribute","fileRelativePath":"System.Runtime.ConstrainedExecution.ReliabilityContractAttribute.html"},"themesRelativePathToOutputRoot":"_themes/"}