{"content":"    \r\n    <h1 id=\"System_Security_Cryptography_Rfc2898DeriveBytes\">\r\n      <span class=\"lang-csharp\">Rfc2898DeriveBytes</span>\r\n        Class\r\n    </h1>\r\n    \r\n    \r\n    <nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n      <h3>In this Article</h3>\r\n    </nav><div class=\"summary\">\r\n    \t<p>Implements password-based key derivation functionality, PBKDF2, by using a pseudo-random number generator based on <a class=\"xref\" href=\"system.security.cryptography.hmacsha1\" data-linktype=\"relative-path\">HMACSHA1</a>.</p>\n\r\n    </div><h2>Syntax</h2>\r\n    \r\n    \t<h3>Declaration</h3>\r\n    \t<pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">[System.Runtime.InteropServices.ComVisible(true)]\npublic class Rfc2898DeriveBytes : System.Security.Cryptography.DeriveBytes</code></pre>\r\n    \r\n    \r\n    \r\n    <h3>Inheritance Hierarchy</h3>\r\n    <ul class=\"inheritance\">\r\n        <li class=\"l0\">\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">Object</a>\r\n          </div>\r\n        </li>\r\n        <li class=\"l1\">\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.security.cryptography.derivebytes\" data-linktype=\"relative-path\">System.Security.Cryptography.DeriveBytes</a>\r\n          </div>\r\n        </li>\r\n      <li class=\"l2\">\r\n        <div class=\"xref\">\r\n          <div class=\"lang-csharp\">Rfc2898DeriveBytes</div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    \r\n      <div class=\"referencebox inheritedMembers\">\r\n        <h3>Inherited Members</h3>\r\n        <h4></h4>\r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_\" data-linktype=\"relative-path\">Equals(Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_System_Object_\" data-linktype=\"relative-path\">Equals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_GetHashCode\" data-linktype=\"relative-path\">GetHashCode()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_GetType\" data-linktype=\"relative-path\">GetType()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_MemberwiseClone\" data-linktype=\"relative-path\">MemberwiseClone()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ReferenceEquals_System_Object_System_Object_\" data-linktype=\"relative-path\">ReferenceEquals(Object,Object)</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.object#System_Object_ToString\" data-linktype=\"relative-path\">ToString()</a>\r\n          </div>\r\n          , \r\n          <div class=\"lang-csharp\">\r\n            <a class=\"xref\" href=\"system.security.cryptography.derivebytes#System_Security_Cryptography_DeriveBytes_Dispose\" data-linktype=\"relative-path\">Dispose()</a>\r\n          </div>\r\n          \r\n      </div>\r\n    \r\n    \r\n      <h2>Remarks</h2>\r\n      <p>Rfc2898DeriveBytes takes a password, a salt, and an iteration count, and then generates keys through calls to the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes#System_Security_Cryptography_Rfc2898DeriveBytes_GetBytes_\" data-linktype=\"relative-path\">GetBytes</a> method.  </p>\n<p> RFC 2898 includes methods for creating a key and initialization vector (IV) from a password and salt. You can use PBKDF2, a password-based key derivation function, to derive keys using a pseudo-random function that allows keys of virtually unlimited length to be generated. The Rfc2898DeriveBytes class can be used to produce a derived key from a base key and other parameters. In a password-based key derivation function, the base key is a password and the other parameters are a salt value and an iteration count.  </p>\n<p> For more information about PBKDF2, see RFC 2898, &quot;PKCS #5: Password-Based Cryptography Specification Version 2.0,&quot; available on the <a href=\"http://go.microsoft.com/fwlink/?LinkID=37119\" data-linktype=\"external\">Request for Comments Web site</a>. See section 5.2, &quot;PBKDF2,&quot; for complete details.  </p>\n<div class=\"IMPORTANT\"><h5>Important</h5><p> Never hard-code a password within your source code.  Hard-coded passwords can be retrieved from an assembly by using the <a href=\"../Topic/Ildasm.exe%20(IL%20Disassembler).md\" data-linktype=\"relative-path\">Ildasm.exe (IL Disassembler)</a>, by using a hexadecimal editor, or by simply opening up the assembly in a text editor such as Notepad.exe.</p>\n</div>\n\r\n    \r\n    \r\n    <h2>Constructors\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_String_System_Byte___\" data-linktype=\"self-bookmark\">Rfc2898DeriveBytes(String,Byte[])</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using a password and salt to derive the key.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_String_System_Int32_\" data-linktype=\"self-bookmark\">Rfc2898DeriveBytes(String,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using the password and salt size to derive the key.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_Byte___System_Byte___System_Int32_\" data-linktype=\"self-bookmark\">Rfc2898DeriveBytes(Byte[],Byte[],Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using a password, a salt, and number of iterations to derive the key.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_String_System_Byte___System_Int32_\" data-linktype=\"self-bookmark\">Rfc2898DeriveBytes(String,Byte[],Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using a password, a salt, and number of iterations to derive the key.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_String_System_Int32_System_Int32_\" data-linktype=\"self-bookmark\">Rfc2898DeriveBytes(String,Int32,Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using a password, a salt size, and number of iterations to derive the key.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Properties\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes_IterationCount\" data-linktype=\"self-bookmark\">IterationCount</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Gets or sets the number of iterations for the operation.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes_Salt\" data-linktype=\"self-bookmark\">Salt</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Gets or sets the key salt value for the operation.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <h2>Methods\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes_CryptDeriveKey_System_String_System_String_System_Int32_System_Byte___\" data-linktype=\"self-bookmark\">CryptDeriveKey(String,String,Int32,Byte[])</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Derives a cryptographic key from the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> object.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes_Dispose_System_Boolean_\" data-linktype=\"self-bookmark\">Dispose(Boolean)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Releases the unmanaged resources used by the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class and optionally releases the managed resources.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes_GetBytes_System_Int32_\" data-linktype=\"self-bookmark\">GetBytes(Int32)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Returns the pseudo-random key for this object.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Security_Cryptography_Rfc2898DeriveBytes_Reset\" data-linktype=\"self-bookmark\">Reset()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Resets the state of the operation.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"constructors\">\r\n        <h2>Constructors\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_String_System_Byte___\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Rfc2898DeriveBytes(String,Byte[])</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using a password and salt to derive the key.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public Rfc2898DeriveBytes (string password, byte[] salt);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>password</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The password used to derive the key.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>salt</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The key salt used to derive the key.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>The specified salt size is smaller than 8 bytes or the iteration count is less than 1.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p>The password or salt is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The salt size must be 8 bytes or larger.  </p>\n<p> RFC 2898 includes methods for creating a key and initialization vector (IV) from a password and salt. You can use PBKDF2, a password-based key derivation function, to derive keys using a pseudo-random function that allows keys of virtually unlimited length to be generated. The <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class can be used to produce a derived key from a base key and other parameters. In a password-based key derivation function, the base key is a password and the other parameters are a salt value and an iteration count.  </p>\n<p> For more information about PBKDF2, see RFC 2898, &quot;PKCS #5: Password-Based Cryptography Specification Version 2.0,&quot; available on the <a href=\"http://go.microsoft.com/fwlink/?LinkID=37119\" data-linktype=\"external\">Request for Comments Web site</a>. See section 5.2, &quot;PBKDF2,&quot; for complete details.  </p>\n<div class=\"IMPORTANT\"><h5>Important</h5><p> Never hard-code a password within your source code.  Hard-coded passwords can be retrieved from an assembly by using the <a href=\"../Topic/Ildasm.exe%20(IL%20Disassembler).md\" data-linktype=\"relative-path\">Ildasm.exe (IL Disassembler)</a>, by using a hexadecimal editor, or by simply opening up the assembly in a text editor such as Notepad.exe.</p>\n</div>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code example uses the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class to create two identical keys for the <a class=\"xref\" href=\"system.security.cryptography.tripledes\" data-linktype=\"relative-path\">TripleDES</a> class.  It then encrypts and decrypts some data using the keys.  </p>\n<pre><code class=\"lang-cs\" name=\"rfc28981#1\">using System;\nusing System.IO;\nusing System.Text;\nusing System.Security.Cryptography;\n\npublic class rfc2898test\n{\n    // Generate a key k1 with password pwd1 and salt salt1.\n    // Generate a key k2 with password pwd1 and salt salt1.\n    // Encrypt data1 with key k1 using symmetric encryption, creating edata1.\n    // Decrypt edata1 with key k2 using symmetric decryption, creating data2.\n    // data2 should equal data1.\n\n    private const string usageText = &quot;Usage: RFC2898 &lt;password&gt;<br>You must \nspecify the password for encryption.<br>&quot;;\n    public static void Main(string[] passwordargs)\n    {\n        //If no file name is specified, write usage text.\n        if (passwordargs.Length == 0)\n        {\n            Console.WriteLine(usageText);\n        }\n        else\n        {\n            string pwd1 = passwordargs[0];\n            // Create a byte array to hold the random value. \n            byte[] salt1 = new byte[8];\n            using (RNGCryptoServiceProvider rngCsp = new \nRNGCryptoServiceProvider())\n            {\n                // Fill the array with a random value.\n                rngCsp.GetBytes(salt1);\n            }\n\n            //data1 can be a string or contents of a file.\n            string data1 = &quot;Some test data&quot;;\n            //The default iteration count is 1000 so the two methods use the \nsame iteration count.\n            int myIterations = 1000;\n            try\n            {\n                Rfc2898DeriveBytes k1 = new Rfc2898DeriveBytes(pwd1, salt1, \nmyIterations);\n                Rfc2898DeriveBytes k2 = new Rfc2898DeriveBytes(pwd1, salt1);\n                // Encrypt the data.\n                TripleDES encAlg = TripleDES.Create();\n                encAlg.Key = k1.GetBytes(16);\n                MemoryStream encryptionStream = new MemoryStream();\n                CryptoStream encrypt = new CryptoStream(encryptionStream, \nencAlg.CreateEncryptor(), CryptoStreamMode.Write);\n                byte[] utfD1 = new System.Text.UTF8Encoding(false).GetBytes(\ndata1);\n\n                encrypt.Write(utfD1, 0, utfD1.Length);\n                encrypt.FlushFinalBlock();\n                encrypt.Close();\n                byte[] edata1 = encryptionStream.ToArray();\n                k1.Reset();\n\n                // Try to decrypt, thus showing it can be round-tripped.\n                TripleDES decAlg = TripleDES.Create();\n                decAlg.Key = k2.GetBytes(16);\n                decAlg.IV = encAlg.IV;\n                MemoryStream decryptionStreamBacking = new MemoryStream();\n                CryptoStream decrypt = new CryptoStream(\ndecryptionStreamBacking, decAlg.CreateDecryptor(), CryptoStreamMode.Write);\n                decrypt.Write(edata1, 0, edata1.Length);\n                decrypt.Flush();\n                decrypt.Close();\n                k2.Reset();\n                string data2 = new UTF8Encoding(false).GetString(\ndecryptionStreamBacking.ToArray());\n\n                if (!data1.Equals(data2))\n                {\n                    Console.WriteLine(&quot;Error: The two values are not equal.&quot;);\n                }\n                else\n                {\n                    Console.WriteLine(&quot;The two values are equal.&quot;);\n                    Console.WriteLine(&quot;k1 iterations: {0}&quot;, k1.IterationCount);\n                    Console.WriteLine(&quot;k2 iterations: {0}&quot;, k2.IterationCount);\n                }\n            }\n            catch (Exception e)\n            {\n                Console.WriteLine(&quot;Error: &quot;, e);\n            }\n\n        }\n    }\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"rfc28981#1\">Imports System\nImports System.IO\nImports System.Text\nImports System.Security.Cryptography\n\n\n\nPublic Class rfc2898test\n    &#39; Generate a key k1 with password pwd1 and salt salt1.\n    &#39; Generate a key k2 with password pwd1 and salt salt1.\n    &#39; Encrypt data1 with key k1 using symmetric encryption, creating edata1.\n    &#39; Decrypt edata1 with key k2 using symmetric decryption, creating data2.\n    &#39; data2 should equal data1.\n    Private Const usageText As String = &quot;Usage: RFC2898 &lt;password&gt;&quot; + vbLf + &quot;You must specify the password for encryption.&quot; + vbLf\n\n    Public Shared Sub Main(ByVal passwordargs() As String)\n        &#39;If no file name is specified, write usage text.\n        If passwordargs.Length = 0 Then\n            Console.WriteLine(usageText)\n        Else\n            Dim pwd1 As String = passwordargs(0)\n\n            Dim salt1(8) As Byte\n            Using rngCsp As New RNGCryptoServiceProvider()\n                rngCsp.GetBytes(salt1)\n            End Using\n            &#39;data1 can be a string or contents of a file.\n            Dim data1 As String = &quot;Some test data&quot;\n            &#39;The default iteration count is 1000 so the two methods use the same iteration count.\n            Dim myIterations As Integer = 1000\n            Try\n                Dim k1 As New Rfc2898DeriveBytes(pwd1, salt1, myIterations)\n                Dim k2 As New Rfc2898DeriveBytes(pwd1, salt1)\n                &#39; Encrypt the data.\n                Dim encAlg As TripleDES = TripleDES.Create()\n                encAlg.Key = k1.GetBytes(16)\n                Dim encryptionStream As New MemoryStream()\n                Dim encrypt As New CryptoStream(encryptionStream, encAlg.CreateEncryptor(), CryptoStreamMode.Write)\n                Dim utfD1 As Byte() = New System.Text.UTF8Encoding(False).GetBytes(data1)\n                encrypt.Write(utfD1, 0, utfD1.Length)\n                encrypt.FlushFinalBlock()\n                encrypt.Close()\n                Dim edata1 As Byte() = encryptionStream.ToArray()\n                k1.Reset()\n\n                &#39; Try to decrypt, thus showing it can be round-tripped.\n                Dim decAlg As TripleDES = TripleDES.Create()\n                decAlg.Key = k2.GetBytes(16)\n                decAlg.IV = encAlg.IV\n                Dim decryptionStreamBacking As New MemoryStream()\n                Dim decrypt As New CryptoStream(decryptionStreamBacking, decAlg.CreateDecryptor(), CryptoStreamMode.Write)\n                decrypt.Write(edata1, 0, edata1.Length)\n                decrypt.Flush()\n                decrypt.Close()\n                k2.Reset()\n                Dim data2 As String = New UTF8Encoding(False).GetString(decryptionStreamBacking.ToArray())\n\n                If Not data1.Equals(data2) Then\n                    Console.WriteLine(&quot;Error: The two values are not equal.&quot;)\n                Else\n                    Console.WriteLine(&quot;The two values are equal.&quot;)\n                    Console.WriteLine(&quot;k1 iterations: {0}&quot;, k1.IterationCount)\n                    Console.WriteLine(&quot;k2 iterations: {0}&quot;, k2.IterationCount)\n                End If\n            Catch e As Exception\n                Console.WriteLine(&quot;Error: &quot;, e)\n            End Try\n        End If\n\n    End Sub\nEnd Class\n</code></pre><pre><code class=\"lang-cpp\" name=\"rfc28981#1\">using namespace System;\nusing namespace System::IO;\nusing namespace System::Text;\nusing namespace System::Security::Cryptography;\n\n// Generate a key k1 with password pwd1 and salt salt1.\n// Generate a key k2 with password pwd1 and salt salt1.\n// Encrypt data1 with key k1 using symmetric encryption, creating edata1.\n// Decrypt edata1 with key k2 using symmetric decryption, creating data2.\n// data2 should equal data1.\n\nint main()\n{\n   array&lt;String^&gt;^passwordargs = Environment::GetCommandLineArgs();\n   String^ usageText = &quot;Usage: RFC2898 &lt;password&gt;<br>You must specify the password for encryption.<br>&quot;;\n\n   //If no file name is specified, write usage text.\n   if ( passwordargs-&gt;Length == 1 )\n   {\n      Console::WriteLine( usageText );\n   }\n   else\n   {\n      String^ pwd1 = passwordargs[ 1 ];\n      \n      array&lt;Byte&gt;^salt1 = gcnew array&lt;Byte&gt;(8);\n\t  RNGCryptoServiceProvider ^ rngCsp = gcnew RNGCryptoServiceProvider();\n\t\t rngCsp-&gt;GetBytes(salt1);\n      //data1 can be a string or contents of a file.\n      String^ data1 = &quot;Some test data&quot;;\n\n      //The default iteration count is 1000 so the two methods use the same iteration count.\n      int myIterations = 1000;\n\n      try\n      {\n         Rfc2898DeriveBytes ^ k1 = gcnew Rfc2898DeriveBytes( pwd1,salt1,myIterations );\n         Rfc2898DeriveBytes ^ k2 = gcnew Rfc2898DeriveBytes( pwd1,salt1 );\n\n         // Encrypt the data.\n         TripleDES^ encAlg = TripleDES::Create();\n         encAlg-&gt;Key = k1-&gt;GetBytes( 16 );\n         MemoryStream^ encryptionStream = gcnew MemoryStream;\n         CryptoStream^ encrypt = gcnew CryptoStream( encryptionStream,encAlg-&gt;CreateEncryptor(),CryptoStreamMode::Write );\n         array&lt;Byte&gt;^utfD1 = (gcnew System::Text::UTF8Encoding( false ))-&gt;GetBytes( data1 );\n\n         encrypt-&gt;Write( utfD1, 0, utfD1-&gt;Length );\n         encrypt-&gt;FlushFinalBlock();\n         encrypt-&gt;Close();\n         array&lt;Byte&gt;^edata1 = encryptionStream-&gt;ToArray();\n         k1-&gt;Reset();\n\n         // Try to decrypt, thus showing it can be round-tripped.\n         TripleDES^ decAlg = TripleDES::Create();\n         decAlg-&gt;Key = k2-&gt;GetBytes( 16 );\n         decAlg-&gt;IV = encAlg-&gt;IV;\n         MemoryStream^ decryptionStreamBacking = gcnew MemoryStream;\n         CryptoStream^ decrypt = gcnew CryptoStream( decryptionStreamBacking,decAlg-&gt;CreateDecryptor(),CryptoStreamMode::Write );\n\n         decrypt-&gt;Write( edata1, 0, edata1-&gt;Length );\n         decrypt-&gt;Flush();\n         decrypt-&gt;Close();\n         k2-&gt;Reset();\n\n         String^ data2 = (gcnew UTF8Encoding( false ))-&gt;GetString( decryptionStreamBacking-&gt;ToArray() );\n         if (  !data1-&gt;Equals( data2 ) )\n         {\n            Console::WriteLine( &quot;Error: The two values are not equal.&quot; );\n         }\n         else\n         {\n            Console::WriteLine( &quot;The two values are equal.&quot; );\n            Console::WriteLine( &quot;k1 iterations: {0}&quot;, k1-&gt;IterationCount );\n            Console::WriteLine( &quot;k2 iterations: {0}&quot;, k2-&gt;IterationCount );\n         }\n      }\n\n      catch ( Exception^ e ) \n      {\n         Console::WriteLine( &quot;Error: &quot;, e );\n      }\n   }\n}\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_String_System_Int32_\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Rfc2898DeriveBytes(String,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using the password and salt size to derive the key.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public Rfc2898DeriveBytes (string password, int saltSize);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>password</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The password used to derive the key.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>saltSize</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The size of the random salt that you want the class to generate.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>The specified salt size is smaller than 8 bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p>The password or salt is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The salt size must be 8 bytes or larger.  </p>\n<p> RFC 2898 includes methods for creating a key and initialization vector (IV) from a password and salt. You can use PBKDF2, a password-based key derivation function, to derive keys using a pseudo-random function that allows keys of virtually unlimited length to be generated. The <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class can be used to produce a derived key from a base key and other parameters. In a password-based key derivation function, the base key is a password and the other parameters are a salt value and an iteration count.  </p>\n<p> For more information about PBKDF2, see RFC 2898, &quot;PKCS #5: Password-Based Cryptography Specification Version 2.0,&quot; available on the <a href=\"http://go.microsoft.com/fwlink/?LinkID=37119\" data-linktype=\"external\">Request for Comments Web site</a>. See section 5.2, &quot;PBKDF2,&quot; for complete details.  </p>\n<div class=\"IMPORTANT\"><h5>Important</h5><p> Never hard-code a password within your source code.  Hard-coded passwords can be retrieved from an assembly by using the <a href=\"../Topic/Ildasm.exe%20(IL%20Disassembler).md\" data-linktype=\"relative-path\">Ildasm.exe (IL Disassembler)</a>, by using a hexadecimal editor, or by simply opening up the assembly in a text editor such as Notepad.exe.</p>\n</div>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_Byte___System_Byte___System_Int32_\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Rfc2898DeriveBytes(Byte[],Byte[],Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using a password, a salt, and number of iterations to derive the key.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public Rfc2898DeriveBytes (byte[] password, byte[] salt, int iterations);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>password</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The password used to derive the key.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>salt</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The key salt used to derive the key.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>iterations</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of iterations for the operation.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>The specified salt size is smaller than 8 bytes or the iteration count is less than 1.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p>The password or salt is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The salt size must be 8 bytes or larger and the iteration count must be greater than zero. The minimum recommended number of iterations is 1000.  </p>\n<p> RFC 2898 includes methods for creating a key and initialization vector (IV) from a password and salt. You can use PBKDF2, a password-based key derivation function, to derive keys using a pseudo-random function that allows keys of virtually unlimited length to be generated. The <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class can be used to produce a derived key from a base key and other parameters. In a password-based key derivation function, the base key is a password and the other parameters are a salt value and an iteration count.  </p>\n<p> For more information about PBKDF2, see RFC 2898, &quot;PKCS #5: Password-Based Cryptography Specification Version 2.0,&quot; available on the <a href=\"http://go.microsoft.com/fwlink/?LinkID=37119\" data-linktype=\"external\">Request for Comments Web site</a>. See section 5.2, &quot;PBKDF2,&quot; for complete details.  </p>\n<div class=\"IMPORTANT\"><h5>Important</h5><p> Never hard-code a password within your source code.  Hard-coded passwords can be retrieved from an assembly by using the <a href=\"../Topic/Ildasm.exe%20(IL%20Disassembler).md\" data-linktype=\"relative-path\">Ildasm.exe (IL Disassembler)</a>, by using a hexadecimal editor, or by simply opening up the assembly in a text editor such as Notepad.exe.</p>\n</div>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_String_System_Byte___System_Int32_\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Rfc2898DeriveBytes(String,Byte[],Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using a password, a salt, and number of iterations to derive the key.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public Rfc2898DeriveBytes (string password, byte[] salt, int iterations);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>password</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The password used to derive the key.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>salt</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The key salt used to derive the key.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>iterations</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of iterations for the operation.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>The specified salt size is smaller than 8 bytes or the iteration count is less than 1.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p>The password or salt is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The salt size must be 8 bytes or larger and the iteration count must be greater than zero. The minimum recommended number of iterations is 1000.  </p>\n<p> RFC 2898 includes methods for creating a key and initialization vector (IV) from a password and salt. You can use PBKDF2, a password-based key derivation function, to derive keys using a pseudo-random function that allows keys of virtually unlimited length to be generated. The <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class can be used to produce a derived key from a base key and other parameters. In a password-based key derivation function, the base key is a password and the other parameters are a salt value and an iteration count.  </p>\n<p> For more information about PBKDF2, see RFC 2898, &quot;PKCS #5: Password-Based Cryptography Specification Version 2.0,&quot; available on the <a href=\"http://go.microsoft.com/fwlink/?LinkID=37119\" data-linktype=\"external\">Request for Comments Web site</a>. See section 5.2, &quot;PBKDF2,&quot; for complete details.  </p>\n<div class=\"IMPORTANT\"><h5>Important</h5><p> Never hard-code a password within your source code.  Hard-coded passwords can be retrieved from an assembly by using the <a href=\"../Topic/Ildasm.exe%20(IL%20Disassembler).md\" data-linktype=\"relative-path\">Ildasm.exe (IL Disassembler)</a>, by using a hexadecimal editor, or by simply opening up the assembly in a text editor such as Notepad.exe.</p>\n</div>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following code example uses the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class to create two identical keys for the <a class=\"xref\" href=\"system.security.cryptography.tripledes\" data-linktype=\"relative-path\">TripleDES</a> class.  It then encrypts and decrypts some data using the keys.  </p>\n<pre><code class=\"lang-cs\" name=\"rfc28981#1\">using System;\nusing System.IO;\nusing System.Text;\nusing System.Security.Cryptography;\n\npublic class rfc2898test\n{\n    // Generate a key k1 with password pwd1 and salt salt1.\n    // Generate a key k2 with password pwd1 and salt salt1.\n    // Encrypt data1 with key k1 using symmetric encryption, creating edata1.\n    // Decrypt edata1 with key k2 using symmetric decryption, creating data2.\n    // data2 should equal data1.\n\n    private const string usageText = &quot;Usage: RFC2898 &lt;password&gt;<br>You must \nspecify the password for encryption.<br>&quot;;\n    public static void Main(string[] passwordargs)\n    {\n        //If no file name is specified, write usage text.\n        if (passwordargs.Length == 0)\n        {\n            Console.WriteLine(usageText);\n        }\n        else\n        {\n            string pwd1 = passwordargs[0];\n            // Create a byte array to hold the random value. \n            byte[] salt1 = new byte[8];\n            using (RNGCryptoServiceProvider rngCsp = new \nRNGCryptoServiceProvider())\n            {\n                // Fill the array with a random value.\n                rngCsp.GetBytes(salt1);\n            }\n\n            //data1 can be a string or contents of a file.\n            string data1 = &quot;Some test data&quot;;\n            //The default iteration count is 1000 so the two methods use the \nsame iteration count.\n            int myIterations = 1000;\n            try\n            {\n                Rfc2898DeriveBytes k1 = new Rfc2898DeriveBytes(pwd1, salt1, \nmyIterations);\n                Rfc2898DeriveBytes k2 = new Rfc2898DeriveBytes(pwd1, salt1);\n                // Encrypt the data.\n                TripleDES encAlg = TripleDES.Create();\n                encAlg.Key = k1.GetBytes(16);\n                MemoryStream encryptionStream = new MemoryStream();\n                CryptoStream encrypt = new CryptoStream(encryptionStream, \nencAlg.CreateEncryptor(), CryptoStreamMode.Write);\n                byte[] utfD1 = new System.Text.UTF8Encoding(false).GetBytes(\ndata1);\n\n                encrypt.Write(utfD1, 0, utfD1.Length);\n                encrypt.FlushFinalBlock();\n                encrypt.Close();\n                byte[] edata1 = encryptionStream.ToArray();\n                k1.Reset();\n\n                // Try to decrypt, thus showing it can be round-tripped.\n                TripleDES decAlg = TripleDES.Create();\n                decAlg.Key = k2.GetBytes(16);\n                decAlg.IV = encAlg.IV;\n                MemoryStream decryptionStreamBacking = new MemoryStream();\n                CryptoStream decrypt = new CryptoStream(\ndecryptionStreamBacking, decAlg.CreateDecryptor(), CryptoStreamMode.Write);\n                decrypt.Write(edata1, 0, edata1.Length);\n                decrypt.Flush();\n                decrypt.Close();\n                k2.Reset();\n                string data2 = new UTF8Encoding(false).GetString(\ndecryptionStreamBacking.ToArray());\n\n                if (!data1.Equals(data2))\n                {\n                    Console.WriteLine(&quot;Error: The two values are not equal.&quot;);\n                }\n                else\n                {\n                    Console.WriteLine(&quot;The two values are equal.&quot;);\n                    Console.WriteLine(&quot;k1 iterations: {0}&quot;, k1.IterationCount);\n                    Console.WriteLine(&quot;k2 iterations: {0}&quot;, k2.IterationCount);\n                }\n            }\n            catch (Exception e)\n            {\n                Console.WriteLine(&quot;Error: &quot;, e);\n            }\n\n        }\n    }\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"rfc28981#1\">Imports System\nImports System.IO\nImports System.Text\nImports System.Security.Cryptography\n\n\n\nPublic Class rfc2898test\n    &#39; Generate a key k1 with password pwd1 and salt salt1.\n    &#39; Generate a key k2 with password pwd1 and salt salt1.\n    &#39; Encrypt data1 with key k1 using symmetric encryption, creating edata1.\n    &#39; Decrypt edata1 with key k2 using symmetric decryption, creating data2.\n    &#39; data2 should equal data1.\n    Private Const usageText As String = &quot;Usage: RFC2898 &lt;password&gt;&quot; + vbLf + &quot;You must specify the password for encryption.&quot; + vbLf\n\n    Public Shared Sub Main(ByVal passwordargs() As String)\n        &#39;If no file name is specified, write usage text.\n        If passwordargs.Length = 0 Then\n            Console.WriteLine(usageText)\n        Else\n            Dim pwd1 As String = passwordargs(0)\n\n            Dim salt1(8) As Byte\n            Using rngCsp As New RNGCryptoServiceProvider()\n                rngCsp.GetBytes(salt1)\n            End Using\n            &#39;data1 can be a string or contents of a file.\n            Dim data1 As String = &quot;Some test data&quot;\n            &#39;The default iteration count is 1000 so the two methods use the same iteration count.\n            Dim myIterations As Integer = 1000\n            Try\n                Dim k1 As New Rfc2898DeriveBytes(pwd1, salt1, myIterations)\n                Dim k2 As New Rfc2898DeriveBytes(pwd1, salt1)\n                &#39; Encrypt the data.\n                Dim encAlg As TripleDES = TripleDES.Create()\n                encAlg.Key = k1.GetBytes(16)\n                Dim encryptionStream As New MemoryStream()\n                Dim encrypt As New CryptoStream(encryptionStream, encAlg.CreateEncryptor(), CryptoStreamMode.Write)\n                Dim utfD1 As Byte() = New System.Text.UTF8Encoding(False).GetBytes(data1)\n                encrypt.Write(utfD1, 0, utfD1.Length)\n                encrypt.FlushFinalBlock()\n                encrypt.Close()\n                Dim edata1 As Byte() = encryptionStream.ToArray()\n                k1.Reset()\n\n                &#39; Try to decrypt, thus showing it can be round-tripped.\n                Dim decAlg As TripleDES = TripleDES.Create()\n                decAlg.Key = k2.GetBytes(16)\n                decAlg.IV = encAlg.IV\n                Dim decryptionStreamBacking As New MemoryStream()\n                Dim decrypt As New CryptoStream(decryptionStreamBacking, decAlg.CreateDecryptor(), CryptoStreamMode.Write)\n                decrypt.Write(edata1, 0, edata1.Length)\n                decrypt.Flush()\n                decrypt.Close()\n                k2.Reset()\n                Dim data2 As String = New UTF8Encoding(False).GetString(decryptionStreamBacking.ToArray())\n\n                If Not data1.Equals(data2) Then\n                    Console.WriteLine(&quot;Error: The two values are not equal.&quot;)\n                Else\n                    Console.WriteLine(&quot;The two values are equal.&quot;)\n                    Console.WriteLine(&quot;k1 iterations: {0}&quot;, k1.IterationCount)\n                    Console.WriteLine(&quot;k2 iterations: {0}&quot;, k2.IterationCount)\n                End If\n            Catch e As Exception\n                Console.WriteLine(&quot;Error: &quot;, e)\n            End Try\n        End If\n\n    End Sub\nEnd Class\n</code></pre><pre><code class=\"lang-cpp\" name=\"rfc28981#1\">using namespace System;\nusing namespace System::IO;\nusing namespace System::Text;\nusing namespace System::Security::Cryptography;\n\n// Generate a key k1 with password pwd1 and salt salt1.\n// Generate a key k2 with password pwd1 and salt salt1.\n// Encrypt data1 with key k1 using symmetric encryption, creating edata1.\n// Decrypt edata1 with key k2 using symmetric decryption, creating data2.\n// data2 should equal data1.\n\nint main()\n{\n   array&lt;String^&gt;^passwordargs = Environment::GetCommandLineArgs();\n   String^ usageText = &quot;Usage: RFC2898 &lt;password&gt;<br>You must specify the password for encryption.<br>&quot;;\n\n   //If no file name is specified, write usage text.\n   if ( passwordargs-&gt;Length == 1 )\n   {\n      Console::WriteLine( usageText );\n   }\n   else\n   {\n      String^ pwd1 = passwordargs[ 1 ];\n      \n      array&lt;Byte&gt;^salt1 = gcnew array&lt;Byte&gt;(8);\n\t  RNGCryptoServiceProvider ^ rngCsp = gcnew RNGCryptoServiceProvider();\n\t\t rngCsp-&gt;GetBytes(salt1);\n      //data1 can be a string or contents of a file.\n      String^ data1 = &quot;Some test data&quot;;\n\n      //The default iteration count is 1000 so the two methods use the same iteration count.\n      int myIterations = 1000;\n\n      try\n      {\n         Rfc2898DeriveBytes ^ k1 = gcnew Rfc2898DeriveBytes( pwd1,salt1,myIterations );\n         Rfc2898DeriveBytes ^ k2 = gcnew Rfc2898DeriveBytes( pwd1,salt1 );\n\n         // Encrypt the data.\n         TripleDES^ encAlg = TripleDES::Create();\n         encAlg-&gt;Key = k1-&gt;GetBytes( 16 );\n         MemoryStream^ encryptionStream = gcnew MemoryStream;\n         CryptoStream^ encrypt = gcnew CryptoStream( encryptionStream,encAlg-&gt;CreateEncryptor(),CryptoStreamMode::Write );\n         array&lt;Byte&gt;^utfD1 = (gcnew System::Text::UTF8Encoding( false ))-&gt;GetBytes( data1 );\n\n         encrypt-&gt;Write( utfD1, 0, utfD1-&gt;Length );\n         encrypt-&gt;FlushFinalBlock();\n         encrypt-&gt;Close();\n         array&lt;Byte&gt;^edata1 = encryptionStream-&gt;ToArray();\n         k1-&gt;Reset();\n\n         // Try to decrypt, thus showing it can be round-tripped.\n         TripleDES^ decAlg = TripleDES::Create();\n         decAlg-&gt;Key = k2-&gt;GetBytes( 16 );\n         decAlg-&gt;IV = encAlg-&gt;IV;\n         MemoryStream^ decryptionStreamBacking = gcnew MemoryStream;\n         CryptoStream^ decrypt = gcnew CryptoStream( decryptionStreamBacking,decAlg-&gt;CreateDecryptor(),CryptoStreamMode::Write );\n\n         decrypt-&gt;Write( edata1, 0, edata1-&gt;Length );\n         decrypt-&gt;Flush();\n         decrypt-&gt;Close();\n         k2-&gt;Reset();\n\n         String^ data2 = (gcnew UTF8Encoding( false ))-&gt;GetString( decryptionStreamBacking-&gt;ToArray() );\n         if (  !data1-&gt;Equals( data2 ) )\n         {\n            Console::WriteLine( &quot;Error: The two values are not equal.&quot; );\n         }\n         else\n         {\n            Console::WriteLine( &quot;The two values are equal.&quot; );\n            Console::WriteLine( &quot;k1 iterations: {0}&quot;, k1-&gt;IterationCount );\n            Console::WriteLine( &quot;k2 iterations: {0}&quot;, k2-&gt;IterationCount );\n         }\n      }\n\n      catch ( Exception^ e ) \n      {\n         Console::WriteLine( &quot;Error: &quot;, e );\n      }\n   }\n}\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_System_String_System_Int32_System_Int32_\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes__ctor_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Rfc2898DeriveBytes(String,Int32,Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Initializes a new instance of the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class using a password, a salt size, and number of iterations to derive the key.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public Rfc2898DeriveBytes (string password, int saltSize, int iterations);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>password</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The password used to derive the key.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>saltSize</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The size of the random salt that you want the class to generate.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>iterations</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of iterations for the operation.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>The specified salt size is smaller than 8 bytes or the iteration count is less than 1.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p>The password or salt is <code>null</code>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>iterations </code>is out of range. This parameter requires a non-negative number.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The salt size must be 8 bytes or larger and the iteration count must be greater than zero. The minimum recommended number of iterations is 1000.  </p>\n<p> RFC 2898 includes methods for creating a key and initialization vector (IV) from a password and salt. You can use PBKDF2, a password-based key derivation function, to derive keys using a pseudo-random function that allows keys of virtually unlimited length to be generated. The <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class can be used to produce a derived key from a base key and other parameters. In a password-based key derivation function, the base key is a password and the other parameters are a salt value and an iteration count.  </p>\n<p> For more information on PBKDF2, see RFC 2898,&quot;PKCS #5: Password-Based Cryptography Specification Version 2.0,&quot; available on the <a href=\"http://go.microsoft.com/fwlink/?LinkID=37119\" data-linktype=\"external\">Request for Comments Web site</a>. See section 5.2, &quot;PBKDF2,&quot; for complete details.  </p>\n<div class=\"IMPORTANT\"><h5>Important</h5><p> Never hard-code a password within your source code.  Hard-coded passwords can be retrieved from an assembly by using the <a href=\"../Topic/Ildasm.exe%20(IL%20Disassembler).md\" data-linktype=\"relative-path\">Ildasm.exe (IL Disassembler)</a>, by using a hexadecimal editor, or by simply opening up the assembly in a text editor such as Notepad.exe.</p>\n</div>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"properties\">\r\n        <h2>Properties\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes_IterationCount\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes_IterationCount_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">IterationCount</div>        \r\n          </div>\r\n    \r\n            <p>Gets or sets the number of iterations for the operation.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public int IterationCount { get; set; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </div>\r\n                  <p>The number of iterations for the operation.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p>The number of iterations is less than 1.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Iteration count is the number of times an operation is performed. For this method, the count should be greater than zero. The minimum recommended number of iterations is 1000.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example shows how to use the IterationCount property to display the number of iterations used in the generation of the key. This code example is part of a larger example provided for the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class.  </p>\n<pre><code class=\"lang-cs\" name=\"rfc28981#3\">            //The default iteration count is 1000 so the two methods use the \nsame iteration count.\n            int myIterations = 1000;\n            try\n            {\n                Rfc2898DeriveBytes k1 = new Rfc2898DeriveBytes(pwd1, salt1, \nmyIterations);\n                Rfc2898DeriveBytes k2 = new Rfc2898DeriveBytes(pwd1, salt1);\n                // Encrypt the data.\n                TripleDES encAlg = TripleDES.Create();\n                encAlg.Key = k1.GetBytes(16);\n                MemoryStream encryptionStream = new MemoryStream();\n                CryptoStream encrypt = new CryptoStream(encryptionStream, \nencAlg.CreateEncryptor(), CryptoStreamMode.Write);\n                byte[] utfD1 = new System.Text.UTF8Encoding(false).GetBytes(\ndata1);\n\n                encrypt.Write(utfD1, 0, utfD1.Length);\n                encrypt.FlushFinalBlock();\n                encrypt.Close();\n                byte[] edata1 = encryptionStream.ToArray();\n                k1.Reset();\n\n                // Try to decrypt, thus showing it can be round-tripped.\n                TripleDES decAlg = TripleDES.Create();\n                decAlg.Key = k2.GetBytes(16);\n                decAlg.IV = encAlg.IV;\n                MemoryStream decryptionStreamBacking = new MemoryStream();\n                CryptoStream decrypt = new CryptoStream(\ndecryptionStreamBacking, decAlg.CreateDecryptor(), CryptoStreamMode.Write);\n                decrypt.Write(edata1, 0, edata1.Length);\n                decrypt.Flush();\n                decrypt.Close();\n                k2.Reset();\n                string data2 = new UTF8Encoding(false).GetString(\ndecryptionStreamBacking.ToArray());\n\n                if (!data1.Equals(data2))\n                {\n                    Console.WriteLine(&quot;Error: The two values are not equal.&quot;);\n                }\n                else\n                {\n                    Console.WriteLine(&quot;The two values are equal.&quot;);\n                    Console.WriteLine(&quot;k1 iterations: {0}&quot;, k1.IterationCount);\n                    Console.WriteLine(&quot;k2 iterations: {0}&quot;, k2.IterationCount);\n                }\n</code></pre><pre><code class=\"lang-vb\" name=\"rfc28981#3\">            &#39;The default iteration count is 1000 so the two methods use the same iteration count.\n            Dim myIterations As Integer = 1000\n            Try\n                Dim k1 As New Rfc2898DeriveBytes(pwd1, salt1, myIterations)\n                Dim k2 As New Rfc2898DeriveBytes(pwd1, salt1)\n                &#39; Encrypt the data.\n                Dim encAlg As TripleDES = TripleDES.Create()\n                encAlg.Key = k1.GetBytes(16)\n                Dim encryptionStream As New MemoryStream()\n                Dim encrypt As New CryptoStream(encryptionStream, encAlg.CreateEncryptor(), CryptoStreamMode.Write)\n                Dim utfD1 As Byte() = New System.Text.UTF8Encoding(False).GetBytes(data1)\n                encrypt.Write(utfD1, 0, utfD1.Length)\n                encrypt.FlushFinalBlock()\n                encrypt.Close()\n                Dim edata1 As Byte() = encryptionStream.ToArray()\n                k1.Reset()\n\n                &#39; Try to decrypt, thus showing it can be round-tripped.\n                Dim decAlg As TripleDES = TripleDES.Create()\n                decAlg.Key = k2.GetBytes(16)\n                decAlg.IV = encAlg.IV\n                Dim decryptionStreamBacking As New MemoryStream()\n                Dim decrypt As New CryptoStream(decryptionStreamBacking, decAlg.CreateDecryptor(), CryptoStreamMode.Write)\n                decrypt.Write(edata1, 0, edata1.Length)\n                decrypt.Flush()\n                decrypt.Close()\n                k2.Reset()\n                Dim data2 As String = New UTF8Encoding(False).GetString(decryptionStreamBacking.ToArray())\n\n                If Not data1.Equals(data2) Then\n                    Console.WriteLine(&quot;Error: The two values are not equal.&quot;)\n                Else\n                    Console.WriteLine(&quot;The two values are equal.&quot;)\n                    Console.WriteLine(&quot;k1 iterations: {0}&quot;, k1.IterationCount)\n                    Console.WriteLine(&quot;k2 iterations: {0}&quot;, k2.IterationCount)\n                End If\n</code></pre><pre><code class=\"lang-cpp\" name=\"rfc28981#3\">      //The default iteration count is 1000 so the two methods use the same iteration count.\n      int myIterations = 1000;\n\n      try\n      {\n         Rfc2898DeriveBytes ^ k1 = gcnew Rfc2898DeriveBytes( pwd1,salt1,myIterations );\n         Rfc2898DeriveBytes ^ k2 = gcnew Rfc2898DeriveBytes( pwd1,salt1 );\n\n         // Encrypt the data.\n         TripleDES^ encAlg = TripleDES::Create();\n         encAlg-&gt;Key = k1-&gt;GetBytes( 16 );\n         MemoryStream^ encryptionStream = gcnew MemoryStream;\n         CryptoStream^ encrypt = gcnew CryptoStream( encryptionStream,encAlg-&gt;CreateEncryptor(),CryptoStreamMode::Write );\n         array&lt;Byte&gt;^utfD1 = (gcnew System::Text::UTF8Encoding( false ))-&gt;GetBytes( data1 );\n\n         encrypt-&gt;Write( utfD1, 0, utfD1-&gt;Length );\n         encrypt-&gt;FlushFinalBlock();\n         encrypt-&gt;Close();\n         array&lt;Byte&gt;^edata1 = encryptionStream-&gt;ToArray();\n         k1-&gt;Reset();\n\n         // Try to decrypt, thus showing it can be round-tripped.\n         TripleDES^ decAlg = TripleDES::Create();\n         decAlg-&gt;Key = k2-&gt;GetBytes( 16 );\n         decAlg-&gt;IV = encAlg-&gt;IV;\n         MemoryStream^ decryptionStreamBacking = gcnew MemoryStream;\n         CryptoStream^ decrypt = gcnew CryptoStream( decryptionStreamBacking,decAlg-&gt;CreateDecryptor(),CryptoStreamMode::Write );\n\n         decrypt-&gt;Write( edata1, 0, edata1-&gt;Length );\n         decrypt-&gt;Flush();\n         decrypt-&gt;Close();\n         k2-&gt;Reset();\n\n         String^ data2 = (gcnew UTF8Encoding( false ))-&gt;GetString( decryptionStreamBacking-&gt;ToArray() );\n         if (  !data1-&gt;Equals( data2 ) )\n         {\n            Console::WriteLine( &quot;Error: The two values are not equal.&quot; );\n         }\n         else\n         {\n            Console::WriteLine( &quot;The two values are equal.&quot; );\n            Console::WriteLine( &quot;k1 iterations: {0}&quot;, k1-&gt;IterationCount );\n            Console::WriteLine( &quot;k2 iterations: {0}&quot;, k2-&gt;IterationCount );\n         }\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes_Salt\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes_Salt_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Salt</div>        \r\n          </div>\r\n    \r\n            <p>Gets or sets the key salt value for the operation.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public byte[] Salt { get; set; }</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n              <h4>Property Value</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </div>\r\n                  <p>The key salt value for the operation.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentexception\" data-linktype=\"relative-path\">ArgumentException</a></div>\r\n                  </div>\r\n                  <p>The specified salt size is smaller than 8 bytes.</p>\n\r\n                </li>\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></div>\r\n                  </div>\r\n                  <p>The salt is <code>null</code>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Salt, a random set of bytes, is used to make unauthorized decrypting of a message more difficult. A dictionary attack is an attack in which the attacker attempts to decrypt an encrypted message by comparing the encrypted value with previously computed encrypted values for the most likely keys. This attack is made much more difficult by the introduction of salt, or random bytes, at the end of the password before the key derivation.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section><section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"methods\">\r\n        <h2>Methods\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes_CryptDeriveKey_System_String_System_String_System_Int32_System_Byte___\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes_CryptDeriveKey_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">CryptDeriveKey(String,String,Int32,Byte[])</div>        \r\n          </div>\r\n    \r\n            <p>Derives a cryptographic key from the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> object.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public byte[] CryptDeriveKey (string algname, string alghashname, int keySize, byte[] rgbIV);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>algname</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The algorithm name for which to derive the key.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>alghashname</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.string\" data-linktype=\"relative-path\">String</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The hash algorithm name to use to derive the key.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>keySize</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The size of the key, in bits, to derive.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>rgbIV</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The initialization vector (IV) to use to derive the key.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </div>\r\n                  <p>The derived key.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.security.cryptography.cryptographicexception\" data-linktype=\"relative-path\">CryptographicException</a></div>\r\n                  </div>\r\n                  <p>The <code>keySize</code> parameter is incorrect.  </p>\n<p> -or-  </p>\n<p> The cryptographic service provider (CSP) cannot be acquired.  </p>\n<p> -or-  </p>\n<p> The <code>algname</code> parameter is not a valid algorithm name.  </p>\n<p> -or-  </p>\n<p> The <code>alghashname</code> parameter is not a valid hash algorithm name.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This function is a wrapper for the Crypto API function CryptDeriveKey(), and is intended to offer interoperability with applications using the Crypto API.  </p>\n<p> If the <code>keySize</code> parameter is set to 0 bits, the default key size for the specified algorithm is used.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes_Dispose_System_Boolean_\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes_Dispose_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Dispose(Boolean)</div>        \r\n          </div>\r\n    \r\n            <p>Releases the unmanaged resources used by the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class and optionally releases the managed resources.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">protected override void Dispose (bool disposing);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>disposing</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.boolean\" data-linktype=\"relative-path\">Boolean</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p><code>true</code> to release both managed and unmanaged resources; <code>false</code> to release only unmanaged resources.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This method is called by the public <code>Dispose()</code> method and the <code>Finalize</code> method. <code>Dispose()</code> invokes the protected <code>Dispose(Boolean)</code> method with the <code>disposing</code> parameter set to <code>true</code>. <code>Finalize</code> invokes <code>Dispose</code> with <code>disposing</code> set to <code>false</code>.  </p>\n<p> When the <code>disposing</code> parameter is <code>true</code>, this method releases all resources held by any managed objects that this <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> references. This method invokes the <code>Dispose()</code> method of each referenced object.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes_GetBytes_System_Int32_\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes_GetBytes_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetBytes(Int32)</div>        \r\n          </div>\r\n    \r\n            <p>Returns the pseudo-random key for this object.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override byte[] GetBytes (int cb);</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>cb</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.int32\" data-linktype=\"relative-path\">Int32</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The number of pseudo-random key bytes to generate.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</div>\r\n                  </div>\r\n                  <p>A byte array filled with pseudo-random key bytes.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n              <h4>Exceptions</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentoutofrangeexception\" data-linktype=\"relative-path\">ArgumentOutOfRangeException</a></div>\r\n                  </div>\r\n                  <p><code>cb </code>is out of range. This parameter requires a non-negative number.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class implements PBKDF2 functionality by using a pseudorandom number generator based on <a class=\"xref\" href=\"system.security.cryptography.hmacsha1\" data-linktype=\"relative-path\">HMACSHA1</a>. The <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class takes a password, a salt, and an iteration count, and then generates keys through calls to the GetBytes method. Repeated calls to this method will not generate the same key; instead, appending two calls of the GetBytes method with a <code>cb</code> parameter value of <code>20</code> is the equivalent of calling the GetBytes method once with a <code>cb</code> parameter value of <code>40</code>.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example shows how to use the GetBytes method to get the key for an instance of <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a>. This code example is part of a larger example provided for the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class.  </p>\n<pre><code class=\"lang-cs\" name=\"rfc28981#2\">            try\n            {\n                Rfc2898DeriveBytes k1 = new Rfc2898DeriveBytes(pwd1, salt1, \nmyIterations);\n                Rfc2898DeriveBytes k2 = new Rfc2898DeriveBytes(pwd1, salt1);\n                // Encrypt the data.\n                TripleDES encAlg = TripleDES.Create();\n                encAlg.Key = k1.GetBytes(16);\n                MemoryStream encryptionStream = new MemoryStream();\n                CryptoStream encrypt = new CryptoStream(encryptionStream, \nencAlg.CreateEncryptor(), CryptoStreamMode.Write);\n                byte[] utfD1 = new System.Text.UTF8Encoding(false).GetBytes(\ndata1);\n</code></pre><pre><code class=\"lang-vb\" name=\"rfc28981#2\">            Try\n                Dim k1 As New Rfc2898DeriveBytes(pwd1, salt1, myIterations)\n                Dim k2 As New Rfc2898DeriveBytes(pwd1, salt1)\n                &#39; Encrypt the data.\n                Dim encAlg As TripleDES = TripleDES.Create()\n                encAlg.Key = k1.GetBytes(16)\n                Dim encryptionStream As New MemoryStream()\n                Dim encrypt As New CryptoStream(encryptionStream, encAlg.CreateEncryptor(), CryptoStreamMode.Write)\n                Dim utfD1 As Byte() = New System.Text.UTF8Encoding(False).GetBytes(data1)\n</code></pre><pre><code class=\"lang-cpp\" name=\"rfc28981#2\">      try\n      {\n         Rfc2898DeriveBytes ^ k1 = gcnew Rfc2898DeriveBytes( pwd1,salt1,myIterations );\n         Rfc2898DeriveBytes ^ k2 = gcnew Rfc2898DeriveBytes( pwd1,salt1 );\n\n         // Encrypt the data.\n         TripleDES^ encAlg = TripleDES::Create();\n         encAlg-&gt;Key = k1-&gt;GetBytes( 16 );\n         MemoryStream^ encryptionStream = gcnew MemoryStream;\n         CryptoStream^ encrypt = gcnew CryptoStream( encryptionStream,encAlg-&gt;CreateEncryptor(),CryptoStreamMode::Write );\n         array&lt;Byte&gt;^utfD1 = (gcnew System::Text::UTF8Encoding( false ))-&gt;GetBytes( data1 );\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Security_Cryptography_Rfc2898DeriveBytes_Reset\">\r\n    \r\n            <a id=\"System_Security_Cryptography_Rfc2898DeriveBytes_Reset_\"></a>\r\n    \r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">Reset()</div>        \r\n          </div>\r\n    \r\n            <p>Resets the state of the operation.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public override void Reset ();</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>This method is automatically called if the salt or iteration count is modified.</p>\n\r\n    \r\n            <h4>Example</h4>\r\n            <p>The following example shows how to use the Reset method. This code example is part of a larger example provided for the <a class=\"xref\" href=\"system.security.cryptography.rfc2898derivebytes\" data-linktype=\"relative-path\">Rfc2898DeriveBytes</a> class.  </p>\n<pre><code class=\"lang-cs\" name=\"rfc28981#5\">                decrypt.Write(edata1, 0, edata1.Length);\n                decrypt.Flush();\n                decrypt.Close();\n                k2.Reset();\n</code></pre><pre><code class=\"lang-vb\" name=\"rfc28981#5\">                decrypt.Write(edata1, 0, edata1.Length)\n                decrypt.Flush()\n                decrypt.Close()\n                k2.Reset()\n</code></pre><pre><code class=\"lang-cpp\" name=\"rfc28981#5\">         decrypt-&gt;Write( edata1, 0, edata1-&gt;Length );\n         decrypt-&gt;Flush();\n         decrypt-&gt;Close();\n         k2-&gt;Reset();\n</code></pre>\r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n","outputRootRelativePath":"./","pageMetadata":"<meta name=\"breadcrumb_path\" content=\"breadcrumb/toc.json\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"fulldocset\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.fulldocset\">\r\n<meta name=\"ref_skeleton_gitcommit\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.Security.Cryptography.Rfc2898DeriveBytes.yml\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.Security.Cryptography.Rfc2898DeriveBytes.yml\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.Rfc2898DeriveBytes\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.Rfc2898DeriveBytes..ctor\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.Rfc2898DeriveBytes.CryptDeriveKey\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.Rfc2898DeriveBytes.Dispose\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.Rfc2898DeriveBytes.GetBytes\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.Rfc2898DeriveBytes.IterationCount\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.Rfc2898DeriveBytes.Reset\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.Rfc2898DeriveBytes.Salt\">\r\n<meta name=\"APILocation\" content=\"mscorlib.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-03-01 01:37 AM\">\r\n<meta name=\"document_id\" content=\"4a3e596f-b713-a08e-d23b-a8b11d5ba23c\">\r\n<meta name=\"original_ecmaxml_local_path\" content=\"W:\\vejk\\s\\fulldocset\\xml\\System.Security.Cryptography\\Rfc2898DeriveBytes.xml\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"Implements password-based key derivation functionality, PBKDF2, by using a pseudo-random number generator based on .\n\">\r\n<meta name=\"toc_rel\" content=\"_splitted/System.Security.Cryptography/toc1.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"System.Security.Cryptography.Rfc2898DeriveBytes\">\r\n","rawMetadata":{"breadcrumb_path":"breadcrumb/toc.json","search.ms_sitename":"Docs","search.ms_docsetname":"fulldocset","version":null,"_op_canonicalUrlPrefix":"https://ppe.docs.microsoft.com/en-us/fulldotnet/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":true,"depot_name":"MSDN.fulldocset","_op_gitRefSkeletonCommitHistory":[{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"use plugin in master","commit_sha":"501959ac03e19ac52a27aa4c6bbeb980f8b11c8c","commit_date":"2017-03-01 09:31:20 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"fix pointer ref","commit_sha":"76befb0e7f7b41839ec719047e5b39a5981298f3","commit_date":"2017-02-28 15:47:23 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"switch from platform to version","commit_sha":"78cdacb5ca782478af490a6b30c3a2cb2b6b873e","commit_date":"2017-02-28 15:09:51 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"update platforms","commit_sha":"39ad5a8919a59afc93a79ac4bd8e07c3b471b37a","commit_date":"2017-02-28 10:38:59 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"checkin yml","commit_sha":"da161b792852497df7140d7768cee2eccd9cb43f","commit_date":"2017-02-28 09:36:15 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"delete ymls","commit_sha":"417c04fd1daf0cb211ec4909020356fc1fe69260","commit_date":"2017-02-27 14:12:48 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"update latest xml","commit_sha":"1e40a158586a88a698e0cb5342785002a56898b2","commit_date":"2017-02-24 16:20:57 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"add exceptions to reference section","commit_sha":"2f337ac32baa36b4ee4b5d8987b29dba4ce77336","commit_date":"2017-02-24 11:22:25 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"transform see cref and fix paramref format","commit_sha":"3d0ea34483c97ac77f4020a7f294757d67a5c1d4","commit_date":"2017-02-23 10:03:17 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"fix param transform, fix escaped xref","commit_sha":"2af997a764c82488dfa824f1c7bc4d736757d943","commit_date":"2017-02-22 17:04:48 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"convert exceptions","commit_sha":"0a5bf3370731dd35a596c91081e5dc82e2eace3a","commit_date":"2017-02-22 11:54:30 +0800"},{"author_name":"Tianqi Zhang","author_email":"tianzh@microsoft.com","committer_name":"Tianqi Zhang","comitter_email":"tianzh@microsoft.com","message":"remove _yml from url","commit_sha":"f9314af8858edb8c329d223328490093aef4f55f","commit_date":"2017-02-17 15:31:12 +0800"}],"ref_skeleton_gitcommit":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/501959ac03e19ac52a27aa4c6bbeb980f8b11c8c/fulldocset/System.Security.Cryptography.Rfc2898DeriveBytes.yml","original_ref_skeleton_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/System.Security.Cryptography.Rfc2898DeriveBytes.yml","open_to_public_contributors":true,"api_name":["System.Security.Cryptography.Rfc2898DeriveBytes","System.Security.Cryptography.Rfc2898DeriveBytes..ctor","System.Security.Cryptography.Rfc2898DeriveBytes.CryptDeriveKey","System.Security.Cryptography.Rfc2898DeriveBytes.Dispose","System.Security.Cryptography.Rfc2898DeriveBytes.GetBytes","System.Security.Cryptography.Rfc2898DeriveBytes.IterationCount","System.Security.Cryptography.Rfc2898DeriveBytes.Reset","System.Security.Cryptography.Rfc2898DeriveBytes.Salt"],"api_location":["mscorlib.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["System.Security.Cryptography.Rfc2898DeriveBytes","System::Security::Cryptography::Rfc2898DeriveBytes","System.Security.Cryptography.Rfc2898DeriveBytes.#ctor","System::Security::Cryptography::Rfc2898DeriveBytes::#ctor","System.Security.Cryptography.Rfc2898DeriveBytes.CryptDeriveKey","System::Security::Cryptography::Rfc2898DeriveBytes::CryptDeriveKey","System.Security.Cryptography.Rfc2898DeriveBytes.Dispose","System::Security::Cryptography::Rfc2898DeriveBytes::Dispose","System.Security.Cryptography.Rfc2898DeriveBytes.GetBytes","System::Security::Cryptography::Rfc2898DeriveBytes::GetBytes","System.Security.Cryptography.Rfc2898DeriveBytes.IterationCount","System::Security::Cryptography::Rfc2898DeriveBytes::IterationCount","System.Security.Cryptography.Rfc2898DeriveBytes.Reset","System::Security::Cryptography::Rfc2898DeriveBytes::Reset","System.Security.Cryptography.Rfc2898DeriveBytes.Salt","System::Security::Cryptography::Rfc2898DeriveBytes::Salt"],"dev_langs":["csharp"],"updated_at":"2017-03-01 01:37 AM","document_id":"4a3e596f-b713-a08e-d23b-a8b11d5ba23c","original_ecmaxml_local_path":"W:\\vejk\\s\\fulldocset\\xml\\System.Security.Cryptography\\Rfc2898DeriveBytes.xml","content_git_url":"https://github.com/TianqiZhang/ECMA2YamlTestRepo2/blob/master/fulldocset/xml/System.Security.Cryptography/Rfc2898DeriveBytes.xml","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"Rfc2898DeriveBytes class | Microsoft Docs","_op_ogTitle":"Rfc2898DeriveBytes class","description":"Implements password-based key derivation functionality, PBKDF2, by using a pseudo-random number generator based on .\n","toc_asset_id":"_splitted/System.Security.Cryptography/toc.json","toc_rel":"_splitted/System.Security.Cryptography/toc.json","source_url":"","ms.assetid":"System.Security.Cryptography.Rfc2898DeriveBytes","canonical_url":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.security.cryptography.rfc2898derivebytes","_op_canonicalUrl":"https://ppe.docs.microsoft.com/en-us/mergedepotdynamic/system.security.cryptography.rfc2898derivebytes","fileRelativePath":"System.Security.Cryptography.Rfc2898DeriveBytes.html"},"themesRelativePathToOutputRoot":"_themes/"}